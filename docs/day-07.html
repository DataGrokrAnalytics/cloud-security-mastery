<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Day 7 ‚Äî Week 1 Portfolio & Review</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root{--bg:#0d0f14;--surface:#13161d;--surface2:#181c26;--border:#1f2330;--border-hi:#2e3447;--text:#c8d0e0;--muted:#5a6178;--faint:#3a3f52;--accent:#4af0c4;--accent-dim:rgba(74,240,196,.08);--amber:#f0924a;--violet:#8a7fff;--danger:#f05a5a;--code-bg:#0a0c10;--pill:#1a1f2e;--lab:#f0c84a;--lab-dim:rgba(240,200,74,.08);}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;font-weight:300;font-size:15px;line-height:1.75;min-height:100vh;overflow-x:hidden}
.shell{display:grid;grid-template-columns:268px 1fr;min-height:100vh}
.sidebar{background:var(--surface);border-right:1px solid var(--border);padding:32px 0;position:sticky;top:0;height:100vh;overflow-y:auto;display:flex;flex-direction:column}
.sidebar-header{padding:0 24px 24px;border-bottom:1px solid var(--border)}
.day-badge{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.12em;text-transform:uppercase;color:var(--accent);margin-bottom:6px}
.sidebar-header h2{font-family:'DM Serif Display',serif;font-size:15px;font-weight:400;color:#e4eaf6;line-height:1.4}
.sidebar-meta{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
.chip{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.06em;background:var(--pill);color:var(--muted);padding:3px 8px;border-radius:3px}
.lesson-nav{padding:16px 0;flex:1}
.nav-group-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.14em;text-transform:uppercase;color:var(--faint);padding:10px 24px 6px}
.nav-item{display:flex;align-items:center;gap:10px;padding:9px 24px;cursor:pointer;transition:background .15s;border-left:2px solid transparent}
.nav-item:hover{background:rgba(255,255,255,.03)}
.nav-item.active{background:var(--accent-dim);border-left-color:var(--accent)}.nav-item.active .nav-label{color:var(--accent)}
.nav-item.lab-item.active{background:var(--lab-dim);border-left-color:var(--lab)}.nav-item.lab-item.active .nav-label{color:var(--lab)}
.nav-num{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);width:18px;flex-shrink:0;text-align:right}
.nav-label{font-size:12.5px;color:#8a92a8;line-height:1.3}
.nav-check{margin-left:auto;width:14px;height:14px;border-radius:50%;border:1px solid var(--border-hi);flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:8px;color:transparent;transition:all .2s}
.nav-item.done .nav-check{background:var(--accent);border-color:var(--accent);color:var(--bg)}
.nav-item.lab-item.done .nav-check{background:var(--lab);border-color:var(--lab);color:var(--bg)}
.sidebar-footer{padding:20px 24px;border-top:1px solid var(--border);margin-top:auto}
.progress-label{display:flex;justify-content:space-between;font-size:11px;color:var(--muted);margin-bottom:8px}
.progress-bar{height:3px;background:var(--border);border-radius:2px;overflow:hidden}
.progress-fill{height:100%;background:var(--accent);border-radius:2px;transition:width .4s ease;width:0%}

/* ‚îÄ‚îÄ Sidebar back navigation ‚îÄ‚îÄ */
.sidebar-back{padding:14px 24px 12px;border-bottom:1px solid var(--border);display:flex;flex-direction:column;gap:6px}
.back-index{display:flex;align-items:center;gap:8px;font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.06em;color:var(--muted);text-decoration:none;padding:6px 10px;border-radius:5px;border:1px solid var(--border-hi);transition:all .15s;background:transparent}
.back-index:hover{color:var(--accent);border-color:var(--accent);background:var(--accent-dim)}
.back-index svg{flex-shrink:0;opacity:.6}
.week-jumps-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.1em;text-transform:uppercase;color:var(--faint);margin-bottom:1px}
.week-jumps{display:flex;gap:5px;flex-wrap:wrap;margin-top:2px}
.week-jump{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.06em;padding:3px 9px;border-radius:3px;border:1px solid var(--border-hi);color:var(--muted);text-decoration:none;transition:all .12s;background:transparent}
.week-jump:hover{color:var(--text);background:rgba(255,255,255,.04)}
.week-jump.wj1{color:#4af0c4;border-color:rgba(74,240,196,.3)}
.week-jump.wj2{color:#8a7fff;border-color:rgba(138,127,255,.3)}
.week-jump.wj3{color:#f0924a;border-color:rgba(240,146,74,.3)}
.week-jump.wj4{color:#f05a5a;border-color:rgba(240,90,90,.3)}

/* ‚îÄ‚îÄ Day nav strip ‚îÄ‚îÄ */
.day-nav-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.1em;text-transform:uppercase;color:var(--faint);margin-top:8px;margin-bottom:2px}
.day-nav{display:flex;gap:4px;flex-wrap:wrap}
.day-link{font-family:'IBM Plex Mono',monospace;font-size:9px;padding:3px 7px;border-radius:3px;border:1px solid var(--border-hi);color:var(--muted);text-decoration:none;transition:all .12s;background:transparent}
.day-link:hover{color:var(--text);background:rgba(255,255,255,.04)}
.day-link.current{color:var(--accent);border-color:rgba(74,240,196,.4);background:rgba(74,240,196,.06);font-weight:600}



.main{display:flex;flex-direction:column}
.lesson-topbar{display:flex;align-items:center;justify-content:space-between;padding:16px 48px;border-bottom:1px solid var(--border);background:var(--surface);position:sticky;top:0;z-index:10}
.lesson-crumb{font-family:'IBM Plex Mono',monospace;font-size:11px;color:var(--muted)}.lesson-crumb span{color:var(--text)}
.nav-arrows{display:flex;gap:8px}
.arrow-btn{background:var(--pill);border:1px solid var(--border-hi);color:var(--muted);border-radius:5px;padding:5px 12px;font-size:12px;cursor:pointer;font-family:'IBM Plex Mono',monospace;transition:all .15s}
.arrow-btn:hover:not(:disabled){border-color:var(--accent);color:var(--accent)}.arrow-btn:disabled{opacity:.3;cursor:default}
.lesson-pane{display:none;flex-direction:column;padding:56px 48px 80px;max-width:760px;animation:fadeIn .3s ease}
.lesson-pane.active{display:flex}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.lesson-tag{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.12em;text-transform:uppercase;margin-bottom:14px}
.tag-concept{color:var(--violet)}.tag-warning{color:var(--amber)}.tag-security{color:var(--accent)}.tag-ops{color:#f0c84a}.tag-lab{color:var(--lab)}.tag-review{color:var(--accent)}
.lesson-pane h1{font-family:'DM Serif Display',serif;font-size:28px;font-weight:400;line-height:1.25;color:#e8eef8;margin-bottom:24px}
.lesson-pane h1 em{font-style:italic;color:var(--accent)}.lab-pane h1 em{color:var(--lab)}
.lesson-pane p{color:var(--text);margin-bottom:18px;font-size:15px}
.lesson-pane strong{color:#e0e6f0;font-weight:500}
.callout{border-left:3px solid;padding:16px 20px;border-radius:0 6px 6px 0;margin:24px 0;font-size:14px;line-height:1.7}
.callout-title{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.1em;text-transform:uppercase;margin-bottom:8px;font-weight:600}
.callout.breach{border-color:var(--danger);background:rgba(240,90,90,.06)}.callout.breach .callout-title{color:var(--danger)}
.callout.insight{border-color:var(--violet);background:rgba(138,127,255,.06)}.callout.insight .callout-title{color:var(--violet)}
.callout.tip{border-color:var(--accent);background:var(--accent-dim)}.callout.tip .callout-title{color:var(--accent)}
.callout.warning{border-color:var(--amber);background:rgba(240,146,74,.06)}.callout.warning .callout-title{color:var(--amber)}
.callout.lab-note{border-color:var(--lab);background:var(--lab-dim)}.callout.lab-note .callout-title{color:var(--lab)}
.week-recap{display:flex;flex-direction:column;gap:0;margin:24px 0;border:1px solid var(--border);border-radius:8px;overflow:hidden}
.recap-row{display:grid;grid-template-columns:80px 1fr 200px;align-items:center;gap:0;border-bottom:1px solid var(--border)}
.recap-row:last-child{border-bottom:none}
.recap-row:hover{background:rgba(74,240,196,.02)}
.recap-day{font-family:'IBM Plex Mono',monospace;font-size:11px;color:var(--muted);padding:14px 16px;border-right:1px solid var(--border);text-align:center;background:var(--surface)}
.recap-topic{padding:14px 20px;font-size:14px;color:var(--text)}
.recap-outcome{padding:14px 16px;font-size:12px;color:#8a92a8;border-left:1px solid var(--border)}
.supply-chain{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:24px;margin:24px 0}
.sc-title{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.1em;text-transform:uppercase;color:var(--amber);margin-bottom:16px}
.sc-flow{display:flex;flex-direction:column;gap:8px}
.sc-item{display:flex;align-items:flex-start;gap:12px;font-size:13.5px;color:#8a92a8;line-height:1.6}
.sc-arrow{color:var(--border-hi);flex-shrink:0;margin-top:2px}
.sc-item strong{color:var(--text)}
.styled-table{width:100%;border-collapse:collapse;margin:24px 0;font-size:13.5px}
.styled-table th{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.1em;text-transform:uppercase;color:var(--muted);text-align:left;padding:10px 16px;border-bottom:1px solid var(--border);background:var(--surface)}
.styled-table td{padding:11px 16px;border-bottom:1px solid var(--border);color:var(--text);vertical-align:top}
.styled-table tr:hover td{background:rgba(255,255,255,.02)}
.styled-table td:first-child{font-family:'IBM Plex Mono',monospace;font-size:11.5px;color:var(--violet)}
.badge-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:24px 0}
.badge-card{border:1px solid var(--border);border-radius:8px;padding:16px;text-align:center;background:var(--surface)}
.badge-icon{font-size:28px;margin-bottom:8px}
.badge-name{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--accent);letter-spacing:.06em;text-transform:uppercase;margin-bottom:4px}
.badge-desc{font-size:11px;color:var(--muted);line-height:1.5}
.code-block{background:var(--code-bg);border:1px solid var(--border);border-radius:6px;margin:20px 0;overflow:hidden}
.code-header{display:flex;align-items:center;justify-content:space-between;padding:8px 16px;border-bottom:1px solid var(--border);background:rgba(255,255,255,.02)}
.code-lang{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.06em;color:var(--muted);text-transform:uppercase}
.copy-btn{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);background:transparent;border:1px solid var(--border-hi);border-radius:3px;padding:2px 8px;cursor:pointer;transition:all .15s}
.copy-btn:hover{color:var(--accent);border-color:var(--accent)}
.code-block pre{font-family:'IBM Plex Mono',monospace;font-size:12.5px;line-height:1.8;padding:16px 20px;color:#a8b4cc;overflow-x:auto}
.code-block pre .hl{color:var(--accent)}.code-block pre .hl2{color:var(--amber)}.code-block pre .comment{color:var(--muted)}
.kcheck{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:28px 28px 24px;margin:36px 0 24px}
.kcheck-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.14em;text-transform:uppercase;color:var(--violet);margin-bottom:14px}
.kcheck-q{font-size:15px;color:#d0d8ec;font-weight:500;margin-bottom:20px;line-height:1.5}
.kcheck-options{display:flex;flex-direction:column;gap:10px}
.kcheck-opt{display:flex;align-items:flex-start;gap:12px;padding:12px 16px;border:1px solid var(--border-hi);border-radius:7px;cursor:pointer;transition:all .15s;font-size:13.5px;color:#8a92a8;background:transparent;width:100%;text-align:left}
.kcheck-opt:hover:not(.disabled){border-color:var(--violet);background:rgba(138,127,255,.05);color:var(--text)}
.kcheck-opt.correct{border-color:var(--accent);background:rgba(74,240,196,.07);color:var(--accent)}
.kcheck-opt.wrong{border-color:var(--danger);background:rgba(240,90,90,.07);color:var(--danger)}
.kcheck-opt.reveal-correct{border-color:var(--accent);background:rgba(74,240,196,.04);color:#6e9e90}
.opt-key{font-family:'IBM Plex Mono',monospace;font-size:11px;width:22px;height:22px;border-radius:4px;background:var(--border);display:flex;align-items:center;justify-content:center;flex-shrink:0;color:var(--muted);transition:all .15s;margin-top:1px}
.kcheck-opt.correct .opt-key{background:var(--accent);color:var(--bg)}.kcheck-opt.wrong .opt-key{background:var(--danger);color:#fff}.kcheck-opt.reveal-correct .opt-key{background:rgba(74,240,196,.2);color:var(--accent)}
.kcheck-feedback{margin-top:18px;padding:14px 16px;border-radius:7px;font-size:13.5px;line-height:1.65;display:none}
.kcheck-feedback.show{display:block}.kcheck-feedback.good{background:rgba(74,240,196,.08);border:1px solid rgba(74,240,196,.2);color:#7eceb8}.kcheck-feedback.bad{background:rgba(240,90,90,.08);border:1px solid rgba(240,90,90,.2);color:#c47a7a}
.lab-steps{display:flex;flex-direction:column;gap:0;margin:24px 0}
.lab-step{display:flex;gap:20px;padding:20px 0;border-bottom:1px solid var(--border)}.lab-step:last-child{border-bottom:none}
.step-num-wrap{display:flex;flex-direction:column;align-items:center;flex-shrink:0}
.step-num{width:32px;height:32px;border-radius:50%;background:var(--pill);border:2px solid var(--border-hi);font-family:'IBM Plex Mono',monospace;font-size:12px;color:var(--muted);display:flex;align-items:center;justify-content:center;transition:all .3s;position:relative;z-index:1}
.step-connector{width:2px;flex:1;background:var(--border);margin-top:4px}.lab-step:last-child .step-connector{display:none}
.step-content{flex:1;padding-top:4px}
.step-title{font-family:'DM Serif Display',serif;font-size:16px;color:#e4eaf6;margin-bottom:8px}
.step-body{font-size:14px;color:var(--text);line-height:1.7}
.step-body ol{padding-left:20px;display:flex;flex-direction:column;gap:6px;margin:10px 0}.step-body li{color:#a0a8bc}
.step-body code{font-family:'IBM Plex Mono',monospace;font-size:12px;background:var(--pill);padding:1px 6px;border-radius:3px;color:var(--violet)}
.checklist{display:flex;flex-direction:column;gap:10px;margin:24px 0}
.check-item{display:flex;align-items:flex-start;gap:12px;padding:12px 16px;background:var(--surface);border:1px solid var(--border);border-radius:7px;cursor:pointer;transition:all .2s;user-select:none}
.check-item:hover{border-color:var(--border-hi)}.check-item.checked{border-color:rgba(240,200,74,.3);background:rgba(240,200,74,.05)}
.check-box{width:18px;height:18px;border-radius:4px;border:2px solid var(--border-hi);flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:all .2s;margin-top:1px;font-size:10px;color:transparent}
.check-item.checked .check-box{background:var(--lab);border-color:var(--lab);color:var(--bg)}
.check-text{font-size:13.5px;color:#8a92a8;line-height:1.5}.check-item.checked .check-text{color:var(--muted);text-decoration:line-through;text-decoration-color:var(--faint)}
.checklist-progress{display:flex;align-items:center;gap:12px;margin-bottom:16px}
.checklist-progress-bar{flex:1;height:3px;background:var(--border);border-radius:2px;overflow:hidden}
.checklist-progress-fill{height:100%;background:var(--lab);border-radius:2px;transition:width .4s ease}
.checklist-progress-label{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);white-space:nowrap}
.lesson-nav-footer{display:flex;justify-content:space-between;align-items:center;margin-top:52px;padding-top:28px;border-top:1px solid var(--border)}
.next-btn{background:var(--accent);color:var(--bg);border:none;border-radius:6px;padding:11px 24px;font-family:'IBM Plex Mono',monospace;font-size:12px;font-weight:600;cursor:pointer;letter-spacing:.04em;transition:opacity .15s;display:flex;align-items:center;gap:8px;text-decoration:none}
.next-btn:hover{opacity:.88}.next-btn.lab-btn{background:var(--lab)}.next-btn.week2{background:var(--violet)}
.prev-btn{background:transparent;color:var(--muted);border:1px solid var(--border-hi);border-radius:6px;padding:11px 20px;font-family:'IBM Plex Mono',monospace;font-size:12px;cursor:pointer;letter-spacing:.04em;transition:all .15s;text-decoration:none;display:inline-flex;align-items:center}
.prev-btn:hover{color:var(--text);border-color:var(--text)}.prev-btn:disabled{opacity:.3;cursor:default}
.completion-card{text-align:center;padding:56px 32px}
.completion-icon{font-size:48px;margin-bottom:20px;display:block}
.completion-card h1{font-family:'DM Serif Display',serif;font-size:32px;color:var(--accent);margin-bottom:12px}
.completion-card p{color:var(--muted);max-width:420px;margin:0 auto 28px;font-size:14px}
.score-pill{display:inline-flex;align-items:center;gap:8px;background:rgba(74,240,196,.1);border:1px solid rgba(74,240,196,.25);color:var(--accent);border-radius:40px;padding:8px 20px;font-family:'IBM Plex Mono',monospace;font-size:13px;margin-bottom:8px}
.lab-score-pill{display:inline-flex;align-items:center;gap:8px;background:rgba(240,200,74,.1);border:1px solid rgba(240,200,74,.25);color:var(--lab);border-radius:40px;padding:8px 20px;font-family:'IBM Plex Mono',monospace;font-size:13px;margin-bottom:32px}
::-webkit-scrollbar{width:5px;height:5px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border-hi);border-radius:3px}
@media(max-width:768px){.shell{grid-template-columns:1fr}.sidebar{display:none}.lesson-pane{padding:32px 24px 60px}.badge-grid{grid-template-columns:1fr 1fr}.lesson-topbar{padding:14px 24px}}
</style>
</head>
<body>
<div class="shell">
<nav class="sidebar">
  <div class="sidebar-header">
    <div class="day-badge">Week 1 ¬∑ Day 7</div>
    <h2>Week 1 Portfolio<br>&amp; Review</h2>
    <div class="sidebar-meta"><span class="chip">Review</span><span class="chip">3 lessons</span><span class="chip">1 lab</span><span class="chip">~3.5h</span></div>
  </div>

  <div class="sidebar-back">
    <a class="back-index" href="../index.html">
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M7.5 2L3.5 6L7.5 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      Course Index
    </a>
    <div class="week-jumps-label">Jump to week</div>
    <div class="week-jumps">
      <a class="week-jump wj1" href="../index.html#week-1">W1</a>
      <a class="week-jump wj2" href="../index.html#week-2">W2</a>
      <a class="week-jump wj3" href="../index.html#week-3">W3</a>
      <a class="week-jump wj4" href="../index.html#week-4">W4</a>
    </div>
    <div class="day-nav-label">Week 1 days</div>
    <div class="day-nav">
      <a class="day-link " href="day-01.html">D1</a>
      <a class="day-link" href="day-02.html">D2</a>
      <a class="day-link" href="day-03.html">D3</a>
      <a class="day-link" href="day-04.html">D4</a>
      <a class="day-link " href="day-05.html">D5</a>
      <a class="day-link " href="day-06.html">D6</a>
      <a class="day-link current" href="day-07.html">D7</a>
    </div>
  </div>


  <div class="lesson-nav">
    <div class="nav-group-label">Lessons</div>
    <div class="nav-item active" onclick="goTo(0)"><span class="nav-num">01</span><span class="nav-label">Week 1 Consolidation</span><span class="nav-check">‚úì</span></div>
    <div class="nav-item" onclick="goTo(1)"><span class="nav-num">02</span><span class="nav-label">Supply Chain Security</span><span class="nav-check">‚úì</span></div>
    <div class="nav-item" onclick="goTo(2)"><span class="nav-num">03</span><span class="nav-label">Week 1 Assessment</span><span class="nav-check">‚úì</span></div>
    <div class="nav-group-label" style="margin-top:8px">Lab</div>
    <div class="nav-item lab-item" onclick="goTo(3)"><span class="nav-num" style="color:var(--lab)">üî¨</span><span class="nav-label">Hands-on: Portfolio &amp; Cleanup</span><span class="nav-check">‚úì</span></div>
  </div>
  <div class="sidebar-footer">
    <div class="progress-label"><span>Progress</span><span id="progress-pct">0 / 4</span></div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
  </div>
</nav>
<div class="main">
  <div class="lesson-topbar">
    <div class="lesson-crumb">Day 7 &nbsp;/&nbsp; <span id="topbar-title">Week 1 Consolidation</span></div>
    <div class="nav-arrows">
      <button class="arrow-btn" id="btn-prev" onclick="prev()" disabled>‚Üê Prev</button>
      <button class="arrow-btn" id="btn-next" onclick="next()">Next ‚Üí</button>
    </div>
  </div>

  <!-- LESSON 1 -->
  <div class="lesson-pane active" id="pane-0">
    <div class="lesson-tag tag-review">Week Review</div>
    <h1>Week 1<br><em>Consolidation</em></h1>
    <p><strong>Objective:</strong> Consolidate the seven concepts from this week into a coherent mental model ‚Äî the foundational layer that everything else in this programme builds on.</p>
    <div class="week-recap">
      <div class="recap-row">
        <div class="recap-day">Day 1</div>
        <div class="recap-topic"><strong>Account hardening</strong> ‚Äî root MFA, IAM admin user, billing alert</div>
        <div class="recap-outcome">Foundation: nothing else matters if root is exposed</div>
      </div>
      <div class="recap-row">
        <div class="recap-day">Day 2</div>
        <div class="recap-topic"><strong>CSPM with AWS Config</strong> ‚Äî resource recording, managed rules, config timeline</div>
        <div class="recap-outcome">Visibility: you can't fix what you can't see</div>
      </div>
      <div class="recap-row">
        <div class="recap-day">Day 3</div>
        <div class="recap-topic"><strong>Security Hub + CIS Benchmark</strong> ‚Äî aggregation, scoring, workflow states</div>
        <div class="recap-outcome">Standards: CIS >80% is the industry proof point</div>
      </div>
      <div class="recap-row">
        <div class="recap-day">Day 4</div>
        <div class="recap-topic"><strong>Organizations + SCPs</strong> ‚Äî guardrails vs. permissions, evaluation logic</div>
        <div class="recap-outcome">Governance: preventive controls before detective ones</div>
      </div>
      <div class="recap-row">
        <div class="recap-day">Day 5</div>
        <div class="recap-topic"><strong>Compliance operations</strong> ‚Äî SOC2, PCI DSS, AWS Artifact, evidence automation</div>
        <div class="recap-outcome">Proof: auditable evidence that controls work</div>
      </div>
      <div class="recap-row">
        <div class="recap-day">Day 6</div>
        <div class="recap-topic"><strong>CSPM operations</strong> ‚Äî remediation workflows, KMS rotation, multi-cloud translation</div>
        <div class="recap-outcome">Operations: turning findings into fixed controls</div>
      </div>
      <div class="recap-row" style="border-bottom:none">
        <div class="recap-day">Day 7</div>
        <div class="recap-topic"><strong>Portfolio completion</strong> ‚Äî supply chain risk, GitHub README, Week 1 cleanup</div>
        <div class="recap-outcome">Proof of work: CISO-ready artefacts</div>
      </div>
    </div>
    <div class="callout insight"><div class="callout-title">üí° The Layered Security Model</div>Days 1‚Äì7 follow a deliberate sequence: Secure the account (1) ‚Üí See the environment (2‚Äì3) ‚Üí Govern it (4) ‚Üí Prove it (5) ‚Üí Operate it (6). This isn't arbitrary ‚Äî it's how mature cloud security programmes are structured. You've built all four layers in one week.</div>
    <div class="kcheck">
      <div class="kcheck-label">Week Review ‚Äî Knowledge Check</div>
      <div class="kcheck-q">A new Cloud Security Engineer asks: "Why did we set up SCPs (Day 4) before doing CSPM operations (Day 6)?" What's the architectural reason?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">A</span>SCPs are easier to configure ‚Äî we do simple things first</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">B</span>Config requires SCPs to be active before it can record resources</button>
        <button class="kcheck-opt" onclick="check(this,true,0)"><span class="opt-key">C</span>Preventive controls (SCPs) stop misconfigurations from occurring at all ‚Äî detective controls (Config/Security Hub) catch what slips through. You want both layers, but prevention first.</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">D</span>SCPs generate findings that appear in Security Hub ‚Äî they must be active first</button>
      </div>
      <div class="kcheck-feedback" id="fb-0"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" disabled>‚Üê Previous</button><button class="next-btn" onclick="next()">Next Lesson ‚Üí</button></div>
  </div>

  <!-- LESSON 2 -->
  <div class="lesson-pane" id="pane-1">
    <div class="lesson-tag tag-warning">Supply Chain Risk</div>
    <h1>Supply Chain<br><em>Security</em></h1>
    <p><strong>Objective:</strong> Understand third-party IAM access patterns ‚Äî why they're risky and how to manage them ‚Äî as a preview of Week 2's identity work.</p>
    <p>Most organisations grant external vendors, contractors, and SaaS tools IAM access to their AWS accounts. These are called third-party access patterns, and they're a significant but often overlooked attack surface.</p>
    <div class="supply-chain">
      <div class="sc-title">‚ö† Common Third-Party Access Patterns</div>
      <div class="sc-flow">
        <div class="sc-item"><span class="sc-arrow">‚ñ∏</span><div><strong>SaaS security tools</strong> (e.g. CloudHealth, Lacework) ‚Äî granted ReadOnlyAccess or SecurityAudit IAM role to scan your account. If the vendor is breached, attackers inherit their cross-account access.</div></div>
        <div class="sc-item"><span class="sc-arrow">‚ñ∏</span><div><strong>DevOps tools</strong> (e.g. GitHub Actions, Jenkins) ‚Äî often granted broad deployment permissions. Compromised CI/CD pipeline = arbitrary code execution in your AWS account.</div></div>
        <div class="sc-item"><span class="sc-arrow">‚ñ∏</span><div><strong>Consulting access</strong> ‚Äî contractors granted admin for a project, then forgotten. Dormant credentials = easy attacker footholds months later.</div></div>
        <div class="sc-item"><span class="sc-arrow">‚ñ∏</span><div><strong>Managed service providers</strong> ‚Äî may hold long-lived access keys. If they're compromised, your account is at risk through their credentials.</div></div>
      </div>
    </div>
    <div class="callout tip"><div class="callout-title">‚úì Key Mitigations (covered in Week 2)</div>IAM Access Analyzer (Day 9) finds all cross-account access automatically. JIT access with 1-hour TTL (Day 13) eliminates standing access entirely. CIEM operations (Day 10) identifies dormant credentials for cleanup.</div>
    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">A vendor you use for cloud cost management needs read access to your AWS account. What is the safest architecture for this?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">A</span>Create an IAM user with ReadOnlyAccess and share the access keys with the vendor</button>
        <button class="kcheck-opt" onclick="check(this,true,1)"><span class="opt-key">B</span>Create an IAM role with minimal read permissions and allow the vendor's account to assume it ‚Äî no long-lived keys leave your account</button>
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">C</span>Give the vendor your root credentials ‚Äî ReadOnly role permissions sometimes block cost management tools</button>
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">D</span>Create a separate AWS account for the vendor and connect it to your main account via VPC peering</button>
      </div>
      <div class="kcheck-feedback" id="fb-1"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn" onclick="next()">Next Lesson ‚Üí</button></div>
  </div>

  <!-- LESSON 3: WEEK 1 ASSESSMENT -->
  <div class="lesson-pane" id="pane-2">
    <div class="lesson-tag tag-review">Week 1 Assessment</div>
    <h1>Week 1<br><em>Assessment</em></h1>
    <p><strong>Objective:</strong> Test your retention across all seven days with scenario-based questions. These are harder than the daily quizzes ‚Äî they combine concepts across multiple days.</p>
    <div class="callout tip"><div class="callout-title">‚úì Assessment Format</div>4 scenario questions covering the full week. Each tests applied knowledge, not just recall. Aim for 3/4 or better. Answers include detailed explanations linking back to the relevant day's lessons.</div>

    <div class="kcheck">
      <div class="kcheck-label">Assessment Question 1 of 4 ‚Äî Days 1‚Äì2</div>
      <div class="kcheck-q">A security audit finds that an S3 bucket containing customer data was publicly accessible for 48 hours. The root account has MFA enabled. Which failure in your Week 1 controls allowed this?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,2)"><span class="opt-key">A</span>Root MFA wasn't strong enough ‚Äî a hardware key would have prevented this</button>
        <button class="kcheck-opt" onclick="check(this,true,2)"><span class="opt-key">B</span>Either Config wasn't monitoring S3 public access, or the SCP permitting public bucket configuration wasn't in place ‚Äî both should have caught this</button>
        <button class="kcheck-opt" onclick="check(this,false,2)"><span class="opt-key">C</span>IAM policies allowed the bucket to be made public ‚Äî needs a more restrictive identity policy</button>
        <button class="kcheck-opt" onclick="check(this,false,2)"><span class="opt-key">D</span>This could not happen if Security Hub was enabled ‚Äî it would have blocked the configuration change</button>
      </div>
      <div class="kcheck-feedback" id="fb-2"></div>
    </div>

    <div class="kcheck" style="margin-top:12px">
      <div class="kcheck-label">Assessment Question 2 of 4 ‚Äî Days 3‚Äì4</div>
      <div class="kcheck-q">An attacker gains AdministratorAccess to a member AWS account via a compromised IAM key. They immediately try to disable GuardDuty and delete CloudTrail logs. Neither action succeeds. Why?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">A</span>Security Hub prevented the changes ‚Äî it has immutable protection on security services</button>
        <button class="kcheck-opt" onclick="check(this,true,3)"><span class="opt-key">B</span>An SCP on the organisation denies disabling GuardDuty and CloudTrail ‚Äî SCPs override even AdministratorAccess in member accounts</button>
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">C</span>The CIS Benchmark controls blocked the changes automatically upon detection</button>
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">D</span>GuardDuty self-protects against deletion by any IAM identity below root</button>
      </div>
      <div class="kcheck-feedback" id="fb-3"></div>
    </div>

    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn lab-btn" onclick="next()">Start Portfolio Lab ‚Üí</button></div>
  </div>

  <!-- LAB -->
  <div class="lesson-pane lab-pane" id="pane-3">
    <div class="lesson-tag tag-lab">üî¨ Hands-On Lab</div>
    <h1>Week 1 Portfolio<br><em>&amp; Resource Cleanup</em></h1>
    <p>Today you build the public-facing evidence of your Week 1 work and clean up resources to ensure your Free Tier bill stays at $0. This is the most important lab of the week for your career.</p>
    <div class="callout lab-note"><div class="callout-title">‚ö° Why Cleanup Matters</div>Leaving resources running costs money and demonstrates poor practice. Professional cloud engineers clean up non-production resources after every lab. The cleanup script is in <code>week-1/labs/cleanup.sh</code>.</div>

    <div class="lab-steps">
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">1</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Build the Shared Responsibility Diagram <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~20 min</span></div>
          <div class="step-body">
            <p style="margin-bottom:10px;color:#8a92a8">Create a visual diagram showing IaaS/PaaS/SaaS boundaries and which controls from this week map to each layer. Tools: draw.io, Lucidchart (free), or even a clear hand-drawn photo.</p>
            <ol>
              <li>Three columns: IaaS (EC2), PaaS (RDS/Lambda), SaaS (S3)</li>
              <li>Two rows: AWS responsibility (below the line), Customer responsibility (above the line)</li>
              <li>Place your Week 1 controls: MFA (customer, all layers), Config (customer), SCPs (customer), KMS (customer), AWS Artifact (AWS-side evidence)</li>
              <li>Export as PNG ‚Üí save to <code>portfolio/diagrams/week-1-shared-responsibility.png</code></li>
            </ol>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">2</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Write the Week 1 Executive Summary <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~30 min</span></div>
          <div class="step-body">
            <p style="margin-bottom:10px;color:#8a92a8">A 1-page document that a CISO could read in 5 minutes and understand what you built. Use this template:</p>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">Markdown ‚Äî week-1-executive-summary.md</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
              <pre><span class="comment"># Week 1: Cloud Security Foundations ‚Äî Executive Summary</span>

<span class="hl">## What Was Built</span>
- Hardened AWS account with phishing-resistant MFA
- CSPM baseline: AWS Config + Security Hub
- CIS AWS Foundations Benchmark: [your score]%
- Governance layer: AWS Organizations + SCP (DenyPublicS3)
- Compliance evidence: SOC2 Type II + PCI DSS AoC
- KMS key rotation enabled

<span class="hl">## Risk Reduction</span>
- Root account: protected against credential theft (MFA)
- S3 public exposure: prevented via Config rules + SCP
- Ongoing misconfigurations: detected within minutes (Config)
- Audit readiness: CIS score + compliance evidence folder

<span class="hl">## CIS Benchmark Progress</span>
- Day 3 baseline: [score]%
- Day 7 final: [score]%
- Remaining gaps: [list any intentional exceptions + justification]

<span class="hl">## Next Week Preview</span>
Week 2 builds Zero Trust identity controls: IAM policy mastery,
Access Analyzer, CIEM operations, and JIT privileged access.</pre>
            </div>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">3</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Publish to GitHub <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~15 min</span></div>
          <div class="step-body">
            <div class="code-block">
              <div class="code-header"><span class="code-lang">bash</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
              <pre><span class="comment"># Final Week 1 commit</span>
git add portfolio/ screenshots/
git commit -m <span class="hl">"Week 1 Complete: CIS [score]% | CSPM baseline | SCPs deployed | SOC2 evidence ready"</span>
git push

<span class="comment"># Update your README.md progress badge</span>
<span class="comment"># Replace [score] with your actual CIS percentage</span></pre>
            </div>
            <p style="color:#8a92a8;font-size:13px;margin-top:8px">Your GitHub commit history is your evidence trail. Each commit message tells a story of what you built and when.</p>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">4</div></div>
        <div class="step-content">
          <div class="step-title">Resource Cleanup <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~20 min</span></div>
          <div class="step-body">
            <ol>
              <li>Run the cleanup script: <code>bash week-1/labs/cleanup.sh</code></li>
              <li>Verify in AWS Console ‚Üí Billing ‚Üí Cost Explorer: this month's charges should be $0.00 or trace amounts</li>
              <li><strong>Keep running:</strong> AWS Config, Security Hub (free tier: 10,000 evaluations/month), Organizations (free), KMS ($1/month per CMK ‚Äî delete if not needed)</li>
              <li><strong>Delete if done:</strong> Any EC2 instances, RDS instances, NAT Gateways, Elastic IPs (these cost money idle)</li>
              <li>Check <strong>AWS Budgets</strong> ‚Äî your $5 alert should show $0 forecasted spend</li>
            </ol>
            <div class="callout warning" style="margin-top:12px;margin-bottom:0"><div class="callout-title">‚ö† KMS Key Cost</div>Each KMS customer-managed key costs $1/month. If you created a key for the lab and don't need it, schedule it for deletion (minimum 7-day waiting period). Go to KMS ‚Üí Key actions ‚Üí Schedule key deletion.</div>
          </div>
        </div>
      </div>
    </div>

    <h2 style="font-family:'DM Serif Display',serif;font-size:20px;color:#e4eaf6;margin:32px 0 16px;font-weight:400">Week 1 Completion Checklist</h2>
    <div class="checklist-progress">
      <div class="checklist-progress-bar"><div class="checklist-progress-fill" id="cl-fill"></div></div>
      <span class="checklist-progress-label" id="cl-label">0 / 8</span>
    </div>
    <div class="checklist">
      <div class="check-item" onclick="toggleCheck(this,0)"><div class="check-box">‚úì</div><div class="check-text">Shared responsibility diagram created and in portfolio</div></div>
      <div class="check-item" onclick="toggleCheck(this,1)"><div class="check-box">‚úì</div><div class="check-text">Week 1 executive summary written with your actual CIS score</div></div>
      <div class="check-item" onclick="toggleCheck(this,2)"><div class="check-box">‚úì</div><div class="check-text">CIS score at or above 80% (or documented exceptions for remaining gaps)</div></div>
      <div class="check-item" onclick="toggleCheck(this,3)"><div class="check-box">‚úì</div><div class="check-text">GitHub repo has at least 7 commits ‚Äî one per day</div></div>
      <div class="check-item" onclick="toggleCheck(this,4)"><div class="check-box">‚úì</div><div class="check-text">Portfolio folder contains: screenshots, diagrams, compliance-reports, control-mapping.csv</div></div>
      <div class="check-item" onclick="toggleCheck(this,5)"><div class="check-box">‚úì</div><div class="check-text">Cleanup script run ‚Äî no billable resources (EC2, RDS, NAT GW) running idle</div></div>
      <div class="check-item" onclick="toggleCheck(this,6)"><div class="check-box">‚úì</div><div class="check-text">AWS Budgets shows $0 or minimal forecasted spend</div></div>
      <div class="check-item" onclick="toggleCheck(this,7)"><div class="check-box">‚úì</div><div class="check-text">Final Week 1 GitHub commit pushed with summary message</div></div>
    </div>

    <h2 style="font-family:'DM Serif Display',serif;font-size:20px;color:#e4eaf6;margin:32px 0 16px;font-weight:400">Week 1 Portfolio Badges</h2>
    <div class="badge-grid">
      <div class="badge-card"><div class="badge-icon">üîí</div><div class="badge-name">Account Hardened</div><div class="badge-desc">Root MFA + IAM admin user + billing alert</div></div>
      <div class="badge-card"><div class="badge-icon">üì°</div><div class="badge-name">CSPM Baseline</div><div class="badge-desc">Config + Security Hub active</div></div>
      <div class="badge-card"><div class="badge-icon">üèÜ</div><div class="badge-name">CIS 80%+</div><div class="badge-desc">Industry benchmark achieved</div></div>
      <div class="badge-card"><div class="badge-icon">üèõÔ∏è</div><div class="badge-name">SCP Governance</div><div class="badge-desc">Preventive controls deployed</div></div>
      <div class="badge-card"><div class="badge-icon">üìú</div><div class="badge-name">Audit Ready</div><div class="badge-desc">SOC2 + PCI evidence organised</div></div>
      <div class="badge-card"><div class="badge-icon">üîë</div><div class="badge-name">KMS Rotation</div><div class="badge-desc">Annual key rotation enabled</div></div>
    </div>

    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn lab-btn" onclick="finish()">Complete Week 1 ‚úì</button></div>
  </div>

  <!-- COMPLETION -->
  <div class="lesson-pane" id="pane-complete">
    <div class="completion-card">
      <span class="completion-icon">üéâ</span>
      <h1>Week 1 Complete!</h1>
      <p>You've built a production-grade cloud security foundation in 7 days. Account hardening, CSPM, CIS benchmark compliance, governance controls, audit-ready evidence, and operational remediation skills.</p>
      <div class="score-pill"><span>‚ö°</span> Assessment: <span id="score-val">‚Äî</span></div><br>
      <div class="lab-score-pill"><span>üî¨</span> Portfolio: <span id="lab-score-val">‚Äî</span> / 8 items complete</div>
      <p style="font-size:13px;color:var(--accent);margin-bottom:24px;font-family:'IBM Plex Mono',monospace"></p>
      <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
        <button class="prev-btn" onclick="goTo(0);resetAll()">‚Ü© Review</button>
        <a href="../index.html" style="text-decoration:none"><button class="next-btn" style="background:var(--pill);color:var(--muted);border:1px solid var(--border-hi)">‚Üê Course Index</button></a>
        <a href="day-08.html" style="text-decoration:none"><button class="next-btn week2">Week 2: IAM ‚Üí</button></a>
      </div>
    </div>
  </div>
</div>
</div>
<script>
const STORAGE_KEY='csm-day07';const TOTAL=4;
const titles=['Week 1 Consolidation','Supply Chain Security','Week 1 Assessment','Hands-on: Portfolio & Cleanup'];
const fb={
  0:{good:"Correct. The architecture is deliberate: SCPs (preventive) stop the misconfiguration from occurring in the first place. Config + Security Hub (detective) catch anything that slips through. Layered defence needs both, in that priority order.",bad:"Not quite. Config does not require SCPs to be active. The sequence is architectural: preventive controls (SCPs) stop misconfigs from occurring; detective controls (Config/Security Hub) catch what slips through. Prevention before detection."},
  1:{good:"Correct. IAM roles with cross-account assume-role are the industry standard for third-party access. No long-lived keys leave your account. The vendor's account assumes the role temporarily, and you can revoke it instantly by modifying the trust policy.",bad:"Not quite. IAM users with access keys create long-lived credentials that could be stolen from the vendor. Roles with cross-account assume are the correct pattern ‚Äî temporary, revocable, and no keys to share."},
  2:{good:"Correct. Both layers failed: Config's s3-bucket-public-read-prohibited rule should have fired within minutes of the change, and the SCP should have prevented the public configuration from being set at all. One layer failing is bad; both failing is a control design issue.",bad:"Not quite. Root MFA protects against root account takeover, not S3 misconfigurations. The failure here is in the detective layer (Config not monitoring S3) and the preventive layer (no SCP blocking public bucket creation). Security Hub detects but cannot block configuration changes."},
  3:{good:"Correct. SCPs apply to all IAM identities in member accounts ‚Äî including those with AdministratorAccess. The 'protect security tooling' SCP explicitly denies guardduty:DeleteDetector and cloudtrail:DeleteTrail ‚Äî preventing exactly this attacker playbook.",bad:"Not quite. Security Hub cannot block API calls ‚Äî it only detects misconfigurations. CIS Benchmark controls are compliance checks, not blockers. GuardDuty has no self-protection mechanism against deletion. Only an SCP with explicit Deny for these actions could prevent an admin from disabling them."}
};
let state=loadState();
function loadState(){try{const s=localStorage.getItem(STORAGE_KEY);if(s)return JSON.parse(s);}catch(e){}return{current:0,done:[],correct:[],answered:[],checks:[]};}
function saveState(){try{localStorage.setItem(STORAGE_KEY,JSON.stringify(state));}catch(e){}}
function goTo(n){document.querySelectorAll('.lesson-pane').forEach(p=>p.classList.remove('active'));document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('active'));state.current=n;document.getElementById('pane-'+(n===TOTAL?'complete':n)).classList.add('active');const items=document.querySelectorAll('.nav-item');if(items[n])items[n].classList.add('active');document.getElementById('topbar-title').textContent=titles[n]||'Complete';document.getElementById('btn-prev').disabled=(n===0);document.getElementById('btn-next').disabled=(n>=TOTAL-1);window.scrollTo(0,0);saveState();updateProgress();}
function next(){if(state.current<TOTAL-1)goTo(state.current+1);}function prev(){if(state.current>0)goTo(state.current-1);}
function finish(){markDone(state.current);document.querySelectorAll('.lesson-pane').forEach(p=>p.classList.remove('active'));document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('active'));const pct=Math.round(state.correct.length/4*100);document.getElementById('score-val').textContent=state.correct.length+' / 4 ('+pct+'%)';const checked=state.checks.filter(Boolean).length;document.getElementById('lab-score-val').textContent=checked;document.getElementById('pane-complete').classList.add('active');document.getElementById('topbar-title').textContent='Week 1 Complete!';document.getElementById('btn-prev').disabled=true;document.getElementById('btn-next').disabled=true;saveState();}
function markDone(n){if(!state.done.includes(n))state.done.push(n);const items=document.querySelectorAll('.nav-item');if(items[n])items[n].classList.add('done');updateProgress();}
function updateProgress(){const c=state.done.length;document.getElementById('progress-pct').textContent=c+' / '+TOTAL;document.getElementById('progress-fill').style.width=(c/TOTAL*100)+'%';}
function check(btn,isCorrect,idx){if(state.answered.includes(idx))return;state.answered.push(idx);const opts=btn.closest('.kcheck-options').querySelectorAll('.kcheck-opt');opts.forEach(o=>{o.classList.add('disabled');o.style.pointerEvents='none';});const fbEl=document.getElementById('fb-'+idx);if(isCorrect){btn.classList.add('correct');fbEl.className='kcheck-feedback show good';fbEl.textContent='‚úì '+fb[idx].good;if(!state.correct.includes(idx))state.correct.push(idx);}else{btn.classList.add('wrong');fbEl.className='kcheck-feedback show bad';fbEl.textContent='‚úó '+fb[idx].bad;opts.forEach(o=>{if(o.getAttribute('onclick')&&o.getAttribute('onclick').includes('true'))o.classList.add('reveal-correct');});}markDone(idx);saveState();}
function toggleCheck(el,idx){if(!state.checks[idx])state.checks[idx]=false;state.checks[idx]=!state.checks[idx];el.classList.toggle('checked',state.checks[idx]);updateChecklist();saveState();}
function updateChecklist(){const total=8,checked=state.checks.filter(Boolean).length;document.getElementById('cl-fill').style.width=(checked/total*100)+'%';document.getElementById('cl-label').textContent=checked+' / '+total;if(checked===total&&!state.done.includes(3))markDone(3);}
function copyCode(btn){const pre=btn.closest('.code-block').querySelector('pre');navigator.clipboard.writeText(pre.innerText).then(()=>{btn.textContent='copied!';setTimeout(()=>btn.textContent='copy',1500);});}
function resetAll(){state={current:0,done:[],correct:[],answered:[],checks:[]};saveState();document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('done'));document.querySelectorAll('.kcheck-opt').forEach(o=>{o.classList.remove('correct','wrong','reveal-correct','disabled');o.style.pointerEvents='';});document.querySelectorAll('.kcheck-feedback').forEach(f=>{f.className='kcheck-feedback';f.textContent='';});document.querySelectorAll('.check-item').forEach(i=>i.classList.remove('checked'));updateChecklist();updateProgress();goTo(0);}
function restoreState(){state.done.forEach(n=>{const items=document.querySelectorAll('.nav-item');if(items[n])items[n].classList.add('done');});state.answered.forEach(idx=>{const paneEl=document.getElementById('pane-'+idx);if(!paneEl)return;const opts=paneEl.querySelectorAll('.kcheck-opt');opts.forEach(o=>{o.classList.add('disabled');o.style.pointerEvents='none';});const fbEl=document.getElementById('fb-'+idx);if(state.correct.includes(idx)){const co=Array.from(opts).find(o=>o.getAttribute('onclick')&&o.getAttribute('onclick').includes('true'));if(co)co.classList.add('correct');if(fbEl){fbEl.className='kcheck-feedback show good';fbEl.textContent='‚úì '+fb[idx].good;}}else{opts.forEach(o=>{if(o.getAttribute('onclick')&&o.getAttribute('onclick').includes('true'))o.classList.add('reveal-correct');});if(fbEl){fbEl.className='kcheck-feedback show bad';fbEl.textContent='‚úó '+fb[idx].bad;}}});state.checks.forEach((v,i)=>{if(v){const items=document.querySelectorAll('.check-item');if(items[i])items[i].classList.add('checked');}});updateChecklist();updateProgress();goTo(state.current||0);}
restoreState();
</script>
</body>
</html>
