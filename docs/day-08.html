<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Day 8 ‚Äî IAM Policy Mastery</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="shared.css">
</head>
<body>
<div class="shell">
<nav class="sidebar">
  <div class="sidebar-header">
    <div class="day-badge">Week 2 ¬∑ Day 8</div>
    <h2>IAM Policy<br>Mastery</h2>
    <div class="sidebar-meta"><span class="chip">Identity</span><span class="chip">4 lessons</span><span class="chip">1 lab</span><span class="chip">~4h</span></div>
  </div>
  <div class="sidebar-back">
    <a class="back-index" href="../index.html">
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M7.5 2L3.5 6L7.5 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      Course Index
    </a>
    <div class="week-jumps-label">Jump to week</div>
    <div class="week-jumps">
      <a class="week-jump wj1" href="../index.html#week-1">W1</a>
      <a class="week-jump wj2" href="../index.html#week-2">W2</a>
      <a class="week-jump wj3" href="../index.html#week-3">W3</a>
      <a class="week-jump wj4" href="../index.html#week-4">W4</a>
    </div>
    <div class="day-nav-label">Week 2 days</div>
    <div class="day-nav">
      <a class="day-link current" href="day-08.html">D8</a>
      <a class="day-link" href="day-09.html">D9</a>
      <a class="day-link" href="day-10.html">D10</a>
      <a class="day-link" href="day-11.html">D11</a>
      <a class="day-link" href="day-12.html">D12</a>
      <a class="day-link" href="day-13.html">D13</a>
      <a class="day-link" href="day-14.html">D14</a>
    </div>
  </div>

  <div class="lesson-nav">
    <div class="nav-group-label">Lessons</div>
    <div class="nav-item active" onclick="goTo(0)"><span class="nav-num">01</span><span class="nav-label">IAM Evaluation Logic</span><span class="nav-check">‚úì</span></div>
    <div class="nav-item" onclick="goTo(1)"><span class="nav-num">02</span><span class="nav-label">Policy Types &amp; Structure</span><span class="nav-check">‚úì</span></div>
    <div class="nav-item" onclick="goTo(2)"><span class="nav-num">03</span><span class="nav-label">Least Privilege &amp; Boundaries</span><span class="nav-check">‚úì</span></div>
    <div class="nav-item" onclick="goTo(3)"><span class="nav-num">04</span><span class="nav-label">IAM Policy Simulator</span><span class="nav-check">‚úì</span></div>
    <div class="nav-group-label" style="margin-top:8px">Lab</div>
    <div class="nav-item lab-item" onclick="goTo(4)"><span class="nav-num" style="color:var(--lab)">üî¨</span><span class="nav-label">Hands-on: 5 Custom IAM Policies</span><span class="nav-check">‚úì</span></div>
  </div>
  <div class="sidebar-footer">
    <div class="progress-label"><span>Progress</span><span id="progress-pct">0 / 5</span></div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
  </div>
</nav>
<div class="main">
  <div class="lesson-topbar">
    <div class="lesson-crumb">Week 2 ¬∑ Day 8 &nbsp;/&nbsp; <span id="topbar-title">IAM Evaluation Logic</span></div>
    <div class="nav-arrows">
      <button class="arrow-btn" id="btn-prev" onclick="prev()" disabled>‚Üê Prev</button>
      <button class="arrow-btn" id="btn-next" onclick="next()">Next ‚Üí</button>
    </div>
  </div>

  <!-- LESSON 1 -->
  <div class="lesson-pane active" id="pane-0">
    <div class="lesson-tag tag-concept">Core Concept</div>
    <h1>IAM<br><em>Evaluation Logic</em></h1>
    <p><strong>Objective:</strong> Understand the exact order in which AWS evaluates IAM policies so you can predict whether a request will be allowed or denied ‚Äî before you deploy anything.</p>
    <p>Every single API call in AWS goes through IAM evaluation. Whether it's an EC2 instance calling S3, a Lambda function writing to DynamoDB, or a developer deleting a security group ‚Äî the same six-step logic applies.</p>

    <div class="eval-flow">
      <div class="eval-step">
        <div class="eval-num">1</div>
        <div class="eval-body"><strong>Explicit Deny check</strong> ‚Äî Is there any policy (identity, resource, SCP, permission boundary) that explicitly denies this action? If yes, stop immediately.</div>
        <div class="eval-result result-deny">‚Üí DENY</div>
      </div>
      <div class="eval-step">
        <div class="eval-num">2</div>
        <div class="eval-body"><strong>SCP check (Organizations)</strong> ‚Äî Is the action within the SCPs allowed for this account? If SCPs don't allow it, no identity policy can override.</div>
        <div class="eval-result result-deny">‚Üí DENY if blocked</div>
      </div>
      <div class="eval-step">
        <div class="eval-num">3</div>
        <div class="eval-body"><strong>Resource-based policy check</strong> ‚Äî Is there a resource policy (e.g. S3 bucket policy, KMS key policy) that explicitly allows this principal?</div>
        <div class="eval-result result-allow">‚Üí ALLOW if matched</div>
      </div>
      <div class="eval-step">
        <div class="eval-num">4</div>
        <div class="eval-body"><strong>Permission boundary check</strong> ‚Äî If the identity has a permission boundary, the action must also be allowed in the boundary policy.</div>
        <div class="eval-result result-deny">‚Üí DENY if not in boundary</div>
      </div>
      <div class="eval-step">
        <div class="eval-num">5</div>
        <div class="eval-body"><strong>Identity policy check</strong> ‚Äî Is the action explicitly allowed in the attached identity policies (inline, managed, group)?</div>
        <div class="eval-result result-check">‚Üí ALLOW if found</div>
      </div>
      <div class="eval-step">
        <div class="eval-num">6</div>
        <div class="eval-body"><strong>Implicit deny</strong> ‚Äî No explicit allow found anywhere. Default behaviour is deny.</div>
        <div class="eval-result result-deny">‚Üí DENY (default)</div>
      </div>
    </div>

    <div class="callout insight"><div class="callout-title">üí° The Key Insight</div>There is no "allow by default" anywhere in AWS. Every action is denied unless there is an explicit allow ‚Äî and even then, an explicit deny anywhere in the chain overrides it. This is the foundation of Zero Trust in IAM.</div>

    <div class="callout breach"><div class="callout-title">‚ö† Real Breach Pattern ‚Äî Capital One (2019)</div>A misconfigured EC2 IAM role had an overly broad policy. The instance metadata service (IMDS) returned temporary credentials to anyone who could reach it via SSRF. Those credentials had S3:GetObject across all buckets. Explicit allow + no boundary = 100M+ customer records exfiltrated.</div>

    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">A developer has an identity policy that explicitly allows <code>s3:DeleteBucket</code>. The AWS Organizations SCP for this account denies <code>s3:DeleteBucket</code>. What happens when they try to delete a bucket?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">A</span>The identity policy wins ‚Äî it's more specific than the SCP</button>
        <button class="kcheck-opt" onclick="check(this,true,0)"><span class="opt-key">B</span>The request is denied ‚Äî SCPs are evaluated before identity policies and explicit deny always wins</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">C</span>The request succeeds only if the developer is an admin</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">D</span>AWS prompts for MFA before allowing the destructive action</button>
      </div>
      <div class="kcheck-feedback" id="fb-0"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" disabled>‚Üê Previous</button><button class="next-btn" onclick="next()">Next Lesson ‚Üí</button></div>
  </div>

  <!-- LESSON 2 -->
  <div class="lesson-pane" id="pane-1">
    <div class="lesson-tag tag-concept">Policy Structure</div>
    <h1>Policy Types<br><em>&amp; Structure</em></h1>
    <p><strong>Objective:</strong> Know the anatomy of an IAM policy document and the differences between the six policy types so you can choose the right tool for each security requirement.</p>

    <div class="policy-anatomy">
      <div class="anatomy-title">IAM Policy Document Anatomy</div>
      <div class="anatomy-row"><div class="anatomy-key">Version</div><div class="anatomy-val">Always <strong>"2012-10-17"</strong> ‚Äî the policy language version. Never omit this.</div></div>
      <div class="anatomy-row"><div class="anatomy-key">Effect</div><div class="anatomy-val"><strong>Allow</strong> or <strong>Deny</strong>. Deny overrides any Allow.</div></div>
      <div class="anatomy-row"><div class="anatomy-key">Action</div><div class="anatomy-val">AWS API operations: <strong>s3:GetObject</strong>, <strong>ec2:*</strong>, <strong>iam:CreateUser</strong>. Use wildcards carefully.</div></div>
      <div class="anatomy-row"><div class="anatomy-key">Resource</div><div class="anatomy-val">ARN of the target resource. <strong>*</strong> means all resources. Scope as tightly as possible.</div></div>
      <div class="anatomy-row"><div class="anatomy-key">Principal</div><div class="anatomy-val">Who the policy applies to. Used in resource-based policies, not identity policies.</div></div>
      <div class="anatomy-row"><div class="anatomy-key">Condition</div><div class="anatomy-val">Optional constraints: require MFA, restrict to IP, enforce TLS, limit to specific regions.</div></div>
    </div>

    <div class="code-block">
      <div class="code-header"><span class="code-lang">JSON ‚Äî Least Privilege S3 Read Policy</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
      <pre>{
  <span class="key">"Version"</span>: <span class="str">"2012-10-17"</span>,
  <span class="key">"Statement"</span>: [
    {
      <span class="key">"Sid"</span>: <span class="str">"AllowReadProductionBucket"</span>,
      <span class="key">"Effect"</span>: <span class="hl">"Allow"</span>,
      <span class="key">"Action"</span>: [
        <span class="str">"s3:GetObject"</span>,
        <span class="str">"s3:GetObjectVersion"</span>
      ],
      <span class="key">"Resource"</span>: <span class="str">"arn:aws:s3:::my-production-bucket/*"</span>,
      <span class="key">"Condition"</span>: {
        <span class="key">"Bool"</span>: {
          <span class="str">"aws:SecureTransport"</span>: <span class="hl2">"true"</span>  <span class="comment">// HTTPS only</span>
        }
      }
    }
  ]
}</pre>
    </div>

    <p><strong>The six policy types:</strong> Identity policies (attached to users/roles/groups) are the most common. Resource-based policies live on the resource itself (S3 buckets, KMS keys, Lambda). SCPs are guardrails applied at the Organizations level. Permission boundaries limit the maximum permissions an identity can have. Session policies constrain temporary credentials. ACLs are legacy and largely replaced by bucket policies.</p>

    <div class="callout tip"><div class="callout-title">‚úì Best Practice: Always Scope Resources</div>Never write <code>"Resource": "*"</code> unless you genuinely mean all resources in all regions in all accounts. A policy with <code>"Action": "s3:*", "Resource": "*"</code> is a lateral movement gift to any attacker who compromises that identity.</div>

    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">You need to give an external security vendor read-only access to your S3 audit logs bucket. They have their own AWS account. Which policy type is most appropriate?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">A</span>Identity policy on an IAM user ‚Äî create a user and share the access keys</button>
        <button class="kcheck-opt" onclick="check(this,true,1)"><span class="opt-key">B</span>Resource-based policy (S3 bucket policy) granting access to the vendor's AWS account principal via cross-account role assumption</button>
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">C</span>SCP ‚Äî apply it to your account to allow cross-account S3 access</button>
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">D</span>Permission boundary ‚Äî apply it to the bucket to restrict who can access it</button>
      </div>
      <div class="kcheck-feedback" id="fb-1"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn" onclick="next()">Next Lesson ‚Üí</button></div>
  </div>

  <!-- LESSON 3 -->
  <div class="lesson-pane" id="pane-2">
    <div class="lesson-tag tag-security">Zero Trust</div>
    <h1>Least Privilege<br><em>&amp; Permission Boundaries</em></h1>
    <p><strong>Objective:</strong> Apply least privilege as an operational discipline and use permission boundaries to safely delegate IAM administration without creating privilege escalation paths.</p>

    <p>Least privilege sounds simple: grant only what's needed. In practice it's operationally hard because developers ask for broad permissions to move fast, and security teams can't easily audit hundreds of policies. The tools that make least privilege practical are <strong>IAM Access Advisor</strong>, <strong>last-accessed data</strong>, and <strong>permission boundaries</strong>.</p>

    <div class="callout insight"><div class="callout-title">üí° The 10√ó Sprawl Problem</div>Palo Alto Unit 42 found that cloud identities have on average 10√ó more permissions than they actually use. This isn't malice ‚Äî it's laziness and convenience. The fix is automated right-sizing using last-accessed data, not manual policy review.</div>

    <p><strong>Permission boundaries</strong> solve a specific problem: you want to let developers create IAM roles for their applications, but you don't want them to be able to create roles with more permissions than they themselves have (privilege escalation). A permission boundary says: "this identity can never have permissions beyond this boundary, regardless of what policies are attached to it."</p>

    <div class="code-block">
      <div class="code-header"><span class="code-lang">JSON ‚Äî Developer Permission Boundary</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
      <pre><span class="comment">// Boundary attached to dev IAM roles.
// They can do anything WITHIN this boundary ‚Äî
// but can never grant permissions BEYOND it.</span>
{
  <span class="key">"Version"</span>: <span class="str">"2012-10-17"</span>,
  <span class="key">"Statement"</span>: [
    {
      <span class="key">"Effect"</span>: <span class="hl">"Allow"</span>,
      <span class="key">"Action"</span>: [
        <span class="str">"s3:*"</span>, <span class="str">"dynamodb:*"</span>, <span class="str">"lambda:*"</span>, <span class="str">"cloudwatch:*"</span>
      ],
      <span class="key">"Resource"</span>: <span class="str">"*"</span>
    },
    {
      <span class="key">"Effect"</span>: <span class="hl2">"Deny"</span>,
      <span class="comment">// Devs can never touch IAM or security services</span>
      <span class="key">"Action"</span>: [<span class="str">"iam:*"</span>, <span class="str">"organizations:*"</span>, <span class="str">"guardduty:*"</span>],
      <span class="key">"Resource"</span>: <span class="str">"*"</span>
    }
  ]
}</pre>
    </div>

    <div class="callout warning"><div class="callout-title">‚ö† Common Mistake ‚Äî Wildcard Actions on Narrow Resources</div><code>"Action": "s3:*", "Resource": "arn:aws:s3:::prod-bucket/*"</code> looks scoped but still allows <code>s3:PutBucketPolicy</code> ‚Äî which lets the holder make the bucket public. Always think about what each action actually enables, not just what service it touches.</div>

    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">A developer has an identity policy with <code>iam:CreateRole</code> permission. A permission boundary is attached that only allows S3 and Lambda actions. Can the developer create an IAM role?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,2)"><span class="opt-key">A</span>Yes ‚Äî the identity policy explicitly allows iam:CreateRole</button>
        <button class="kcheck-opt" onclick="check(this,true,2)"><span class="opt-key">B</span>No ‚Äî the permission boundary doesn't include iam:CreateRole, so it's implicitly denied regardless of the identity policy</button>
        <button class="kcheck-opt" onclick="check(this,false,2)"><span class="opt-key">C</span>Yes ‚Äî permission boundaries only apply to the permissions of roles created by the developer, not to the developer themselves</button>
        <button class="kcheck-opt" onclick="check(this,false,2)"><span class="opt-key">D</span>It depends on whether the developer is in the admin group</button>
      </div>
      <div class="kcheck-feedback" id="fb-2"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn" onclick="next()">Next Lesson ‚Üí</button></div>
  </div>

  <!-- LESSON 4 -->
  <div class="lesson-pane" id="pane-3">
    <div class="lesson-tag tag-concept">Tooling</div>
    <h1>IAM Policy<br><em>Simulator</em></h1>
    <p><strong>Objective:</strong> Use the AWS IAM Policy Simulator to validate policies before deployment, catch privilege escalation paths, and build testable policy documentation for your portfolio.</p>

    <p>The IAM Policy Simulator lets you test policies against specific API actions without executing them in your real environment. It's the closest thing to a "dry run" for access control ‚Äî and it's free.</p>

    <div class="callout tip"><div class="callout-title">‚úì When to Use the Simulator</div>Before deploying any new IAM role or policy. After incident response to verify a scoped-down policy works. When onboarding a third-party tool and validating the minimal permissions it actually needs. Before any compliance audit to generate testable evidence.</div>

    <p>The simulator evaluates a given principal + action + resource combination through the same evaluation logic AWS uses in production. It tells you which specific statement caused an allow or deny ‚Äî invaluable for debugging complex policy interactions.</p>

    <div class="code-block">
      <div class="code-header"><span class="code-lang">bash ‚Äî CLI Policy Simulation</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
      <pre><span class="comment"># Simulate whether a role can delete S3 objects</span>
aws iam simulate-principal-policy \
  --policy-source-arn <span class="hl">arn:aws:iam::123456789:role/AppRole</span> \
  --action-names <span class="hl2">s3:DeleteObject</span> \
  --resource-arns <span class="str">arn:aws:s3:::prod-bucket/*</span>

<span class="comment"># Output: EvalDecision = "implicitDeny" or "allowed" or "explicitDeny"
# Also shows: MatchedStatements ‚Äî which statement caused the result</span></pre>
    </div>

    <div class="callout insight"><div class="callout-title">üí° Policy Simulation Prevents 92% of Privilege Escalation</div>Permiso Security (2025) found that organisations that use policy simulation as a pre-deployment gate reduce privilege escalation incidents by 92%. The check takes 30 seconds. The breach costs $4.45M average.</div>

    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">You run the IAM Policy Simulator and it returns <code>EvalDecision: implicitDeny</code> for <code>dynamodb:PutItem</code>. What does this mean?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">A</span>There's an explicit Deny statement blocking the action</button>
        <button class="kcheck-opt" onclick="check(this,true,3)"><span class="opt-key">B</span>No policy has explicitly allowed this action ‚Äî the default deny applies. No statement is blocking it; it's simply not permitted.</button>
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">C</span>The DynamoDB table has a resource policy that blocks the principal</button>
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">D</span>The SCP for this account denies DynamoDB operations</button>
      </div>
      <div class="kcheck-feedback" id="fb-3"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn lab-btn" onclick="next()">Start Lab ‚Üí</button></div>
  </div>

  <!-- LAB -->
  <div class="lesson-pane lab-pane" id="pane-4">
    <div class="lesson-tag tag-lab">üî¨ Hands-On Lab</div>
    <h1>5 Custom IAM Policies<br><em>&amp; Simulator Testing</em></h1>
    <p>Build five real-world IAM policies covering different access patterns, test each with the Policy Simulator, and document the results as portfolio evidence.</p>
    <div class="callout lab-note"><div class="callout-title">‚ö° Lab Prerequisites</div>IAM admin user from Day 1. AWS Console access. No additional services needed ‚Äî IAM and the Policy Simulator are always free.</div>

    <div class="lab-steps">
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">1</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Create 5 Custom Managed Policies <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~30 min</span></div>
          <div class="step-body">
            <p style="color:#8a92a8;margin-bottom:12px">IAM ‚Üí Policies ‚Üí Create policy ‚Üí JSON tab. Create one policy for each pattern below.</p>
            <ol>
              <li><strong>S3-ReadOnly-Prod</strong> ‚Äî s3:GetObject, s3:ListBucket on arn:aws:s3:::*prod* only</li>
              <li><strong>DynamoDB-AppRole</strong> ‚Äî dynamodb:PutItem, GetItem, UpdateItem, Query on a specific table ARN</li>
              <li><strong>EC2-ReadOnly-Viewer</strong> ‚Äî ec2:Describe* on all resources, nothing else</li>
              <li><strong>Lambda-Deploy-NoBoundary</strong> ‚Äî lambda:CreateFunction, UpdateFunctionCode. No iam:* allowed</li>
              <li><strong>Deny-Destructive-Actions</strong> ‚Äî Explicit Deny on s3:DeleteBucket, ec2:TerminateInstances, rds:DeleteDBInstance</li>
            </ol>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">2</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Create a Test Role &amp; Attach Policies <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~10 min</span></div>
          <div class="step-body">
            <ol>
              <li>IAM ‚Üí Roles ‚Üí Create role ‚Üí Trusted entity: AWS account (this account)</li>
              <li>Attach your 5 custom policies to this role</li>
              <li>Name it <code>csm-day08-test-role</code></li>
            </ol>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">3</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Run Policy Simulator Tests <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~20 min</span></div>
          <div class="step-body">
            <p style="color:#8a92a8;margin-bottom:10px">IAM ‚Üí Policy Simulator ‚Üí Select your test role ‚Üí Run these 6 tests and screenshot each result:</p>
            <ol>
              <li><code>s3:GetObject</code> on <code>arn:aws:s3:::my-prod-bucket/file.txt</code> ‚Üí Expected: Allow</li>
              <li><code>s3:DeleteObject</code> on same bucket ‚Üí Expected: ImplicitDeny</li>
              <li><code>s3:DeleteBucket</code> ‚Üí Expected: ExplicitDeny (from policy #5)</li>
              <li><code>ec2:DescribeInstances</code> ‚Üí Expected: Allow</li>
              <li><code>ec2:TerminateInstances</code> ‚Üí Expected: ExplicitDeny</li>
              <li><code>iam:CreateUser</code> ‚Üí Expected: ImplicitDeny</li>
            </ol>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">4</div></div>
        <div class="step-content">
          <div class="step-title">Document as Portfolio Evidence <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~10 min</span></div>
          <div class="step-body">
            <ol>
              <li>Save simulator screenshots to <code>portfolio/screenshots/day-08-simulator/</code></li>
              <li>Export each policy JSON to <code>labs/week-2/day-08-policies/</code></li>
              <li>Write <code>DAY-08-IAM-Policies.md</code>: one paragraph per policy explaining the business use case and what it allows/denies</li>
              <li>GitHub commit: <code>"Day 8: 5 IAM policies + simulator validation ‚Äî all 6 tests pass"</code></li>
            </ol>
          </div>
        </div>
      </div>
    </div>

    <h2 style="font-family:'DM Serif Display',serif;font-size:20px;color:#e4eaf6;margin:32px 0 16px;font-weight:400">Lab Completion Checklist</h2>
    <div class="checklist-progress"><div class="checklist-progress-bar"><div class="checklist-progress-fill" id="cl-fill"></div></div><span class="checklist-progress-label" id="cl-label">0 / 6</span></div>
    <div class="checklist">
      <div class="check-item" onclick="toggleCheck(this,0)"><div class="check-box">‚úì</div><div class="check-text">5 custom managed IAM policies created in console</div></div>
      <div class="check-item" onclick="toggleCheck(this,1)"><div class="check-box">‚úì</div><div class="check-text">Test role created with all 5 policies attached</div></div>
      <div class="check-item" onclick="toggleCheck(this,2)"><div class="check-box">‚úì</div><div class="check-text">All 6 Policy Simulator tests run and results match expected outcomes</div></div>
      <div class="check-item" onclick="toggleCheck(this,3)"><div class="check-box">‚úì</div><div class="check-text">Screenshots saved to portfolio/screenshots/day-08-simulator/</div></div>
      <div class="check-item" onclick="toggleCheck(this,4)"><div class="check-box">‚úì</div><div class="check-text">Policy JSON files exported to labs/week-2/day-08-policies/</div></div>
      <div class="check-item" onclick="toggleCheck(this,5)"><div class="check-box">‚úì</div><div class="check-text">DAY-08-IAM-Policies.md written and committed to GitHub</div></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn lab-btn" onclick="finish()">Complete Day 8 ‚úì</button></div>
  </div>

  <!-- COMPLETION -->
  <div class="lesson-pane" id="pane-complete">
    <div class="completion-card">
      <span class="completion-icon">üéØ</span>
      <h1>Day 8 Complete!</h1>
      <p>You understand IAM evaluation logic, policy anatomy, least privilege patterns, permission boundaries, and can validate policies with the simulator before deployment.</p>
      <div class="score-pill"><span>‚ö°</span> Quiz: <span id="score-val">‚Äî</span></div><br>
      <div class="lab-score-pill"><span>üî¨</span> Lab: <span id="lab-score-val">‚Äî</span></div>
      <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
        <a href="../index.html" style="text-decoration:none"><button class="prev-btn">‚Üê Course Index</button></a>
        <a href="day-09.html" style="text-decoration:none"><button class="next-btn">Day 9: Access Analyzer ‚Üí</button></a>
      </div>
    </div>
  </div>
</div>
</div>
<script src="csm-core.js"></script>
<script>
initPage({
  storageKey: 'csm-day08',
  total: 5,
  quizCount: 4,
  checkTotal: 6,
  titles: ['IAM Evaluation Logic','Policy Types & Structure','Least Privilege & Boundaries','IAM Policy Simulator','Hands-on: 5 Custom IAM Policies'],
  fb: {
  0:{good:"Correct. SCPs are evaluated before identity policies. An explicit deny in an SCP overrides any Allow in an identity policy ‚Äî even AdministratorAccess. The developer's request is denied immediately at step 2.",bad:"Not quite. IAM evaluation is hierarchical: SCPs are checked before identity policies. An SCP deny cannot be overridden by an identity policy, regardless of admin status or specificity."},
  1:{good:"Correct. For cross-account access, the cleanest architecture is a resource-based bucket policy that allows the vendor's AWS account to assume a role with read access. No long-lived credentials leave your account, and you can revoke access instantly.",bad:"Not quite. Creating an IAM user and sharing keys creates long-lived credentials you can't easily revoke. Cross-account role assumption via resource-based policy is the right pattern ‚Äî no keys leave your account."},
  2:{good:"Correct. For an action to be allowed, it must be permitted by BOTH the identity policy AND the permission boundary. The boundary doesn't include iam:CreateRole, so even though the identity policy allows it, the request is denied.",bad:"Not quite. Permission boundaries work as an intersection: an action must be allowed in BOTH the identity policy AND the boundary to succeed. Since the boundary only allows S3 and Lambda, iam:CreateRole is denied regardless of what the identity policy says."},
  3:{good:"Correct. ImplicitDeny means no policy statement explicitly denied the action, but no statement explicitly allowed it either. The default state in AWS is deny ‚Äî so without an Allow, nothing is permitted.",bad:"Not quite. ImplicitDeny and ExplicitDeny are different. ImplicitDeny means no Allow was found anywhere in the evaluation chain ‚Äî it's the default. ExplicitDeny means a Deny statement actively blocked it. You'd see ExplicitDeny if an SCP or Deny statement was involved."}
}
});
</script>
</body>
</html>
