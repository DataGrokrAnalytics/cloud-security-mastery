<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Day 9 ‚Äî Zero Trust: IAM Access Analyzer</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root{--bg:#0d0f14;--surface:#13161d;--surface2:#181c26;--border:#1f2330;--border-hi:#2e3447;--text:#c8d0e0;--muted:#5a6178;--faint:#3a3f52;--accent:#8a7fff;--accent-dim:rgba(138,127,255,.08);--amber:#f0924a;--violet:#8a7fff;--danger:#f05a5a;--code-bg:#0a0c10;--pill:#1a1f2e;--lab:#f0c84a;--lab-dim:rgba(240,200,74,.08);--w2:#8a7fff;}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;font-weight:300;font-size:15px;line-height:1.75;min-height:100vh;overflow-x:hidden}
.shell{display:grid;grid-template-columns:268px 1fr;min-height:100vh}
.sidebar{background:var(--surface);border-right:1px solid var(--border);padding:32px 0;position:sticky;top:0;height:100vh;overflow-y:auto;display:flex;flex-direction:column}
.sidebar-header{padding:0 24px 24px;border-bottom:1px solid var(--border)}
.day-badge{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.12em;text-transform:uppercase;color:var(--w2);margin-bottom:6px}
.sidebar-header h2{font-family:'DM Serif Display',serif;font-size:15px;font-weight:400;color:#e4eaf6;line-height:1.4}
.sidebar-meta{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
.chip{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.06em;background:var(--pill);color:var(--muted);padding:3px 8px;border-radius:3px}
.lesson-nav{padding:16px 0;flex:1}
.nav-group-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.14em;text-transform:uppercase;color:var(--faint);padding:10px 24px 6px}
.nav-item{display:flex;align-items:center;gap:10px;padding:9px 24px;cursor:pointer;transition:background .15s;border-left:2px solid transparent}
.nav-item:hover{background:rgba(255,255,255,.03)}
.nav-item.active{background:var(--accent-dim);border-left-color:var(--accent)}.nav-item.active .nav-label{color:var(--accent)}
.nav-item.lab-item.active{background:var(--lab-dim);border-left-color:var(--lab)}.nav-item.lab-item.active .nav-label{color:var(--lab)}
.nav-num{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);width:18px;flex-shrink:0;text-align:right}
.nav-label{font-size:12.5px;color:#8a92a8;line-height:1.3}
.nav-check{margin-left:auto;width:14px;height:14px;border-radius:50%;border:1px solid var(--border-hi);flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:8px;color:transparent;transition:all .2s}
.nav-item.done .nav-check{background:var(--accent);border-color:var(--accent);color:var(--bg)}
.nav-item.lab-item.done .nav-check{background:var(--lab);border-color:var(--lab);color:var(--bg)}
.sidebar-footer{padding:20px 24px;border-top:1px solid var(--border);margin-top:auto}
.progress-label{display:flex;justify-content:space-between;font-size:11px;color:var(--muted);margin-bottom:8px}
.progress-bar{height:3px;background:var(--border);border-radius:2px;overflow:hidden}
.progress-fill{height:100%;background:var(--accent);border-radius:2px;transition:width .4s ease;width:0%}

/* ‚îÄ‚îÄ Sidebar back navigation ‚îÄ‚îÄ */
.sidebar-back{padding:14px 24px 12px;border-bottom:1px solid var(--border);display:flex;flex-direction:column;gap:6px}
.back-index{display:flex;align-items:center;gap:8px;font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.06em;color:var(--muted);text-decoration:none;padding:6px 10px;border-radius:5px;border:1px solid var(--border-hi);transition:all .15s;background:transparent}
.back-index:hover{color:var(--accent);border-color:var(--accent);background:var(--accent-dim)}
.back-index svg{flex-shrink:0;opacity:.6}
.week-jumps-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.1em;text-transform:uppercase;color:var(--faint);margin-bottom:1px}
.week-jumps{display:flex;gap:5px;flex-wrap:wrap;margin-top:2px}
.week-jump{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.06em;padding:3px 9px;border-radius:3px;border:1px solid var(--border-hi);color:var(--muted);text-decoration:none;transition:all .12s;background:transparent}
.week-jump:hover{color:var(--text);background:rgba(255,255,255,.04)}
.week-jump.wj1{color:#4af0c4;border-color:rgba(74,240,196,.3)}
.week-jump.wj2{color:#8a7fff;border-color:rgba(138,127,255,.3)}
.week-jump.wj3{color:#f0924a;border-color:rgba(240,146,74,.3)}
.week-jump.wj4{color:#f05a5a;border-color:rgba(240,90,90,.3)}

/* ‚îÄ‚îÄ Day nav strip ‚îÄ‚îÄ */
.day-nav-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.1em;text-transform:uppercase;color:var(--faint);margin-top:8px;margin-bottom:2px}
.day-nav{display:flex;gap:4px;flex-wrap:wrap}
.day-link{font-family:'IBM Plex Mono',monospace;font-size:9px;padding:3px 7px;border-radius:3px;border:1px solid var(--border-hi);color:var(--muted);text-decoration:none;transition:all .12s;background:transparent}
.day-link:hover{color:var(--text);background:rgba(255,255,255,.04)}
.day-link.current{color:var(--accent);border-color:rgba(74,240,196,.4);background:rgba(74,240,196,.06);font-weight:600}


.main{display:flex;flex-direction:column}
.lesson-topbar{display:flex;align-items:center;justify-content:space-between;padding:16px 48px;border-bottom:1px solid var(--border);background:var(--surface);position:sticky;top:0;z-index:10}
.lesson-crumb{font-family:'IBM Plex Mono',monospace;font-size:11px;color:var(--muted)}.lesson-crumb span{color:var(--text)}
.nav-arrows{display:flex;gap:8px}
.arrow-btn{background:var(--pill);border:1px solid var(--border-hi);color:var(--muted);border-radius:5px;padding:5px 12px;font-size:12px;cursor:pointer;font-family:'IBM Plex Mono',monospace;transition:all .15s}
.arrow-btn:hover:not(:disabled){border-color:var(--accent);color:var(--accent)}.arrow-btn:disabled{opacity:.3;cursor:default}
.lesson-pane{display:none;flex-direction:column;padding:56px 48px 80px;max-width:760px;animation:fadeIn .3s ease}
.lesson-pane.active{display:flex}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.lesson-tag{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.12em;text-transform:uppercase;margin-bottom:14px}
.tag-concept{color:var(--violet)}.tag-warning{color:var(--amber)}.tag-security{color:var(--accent)}.tag-lab{color:var(--lab)}
.lesson-pane h1{font-family:'DM Serif Display',serif;font-size:28px;font-weight:400;line-height:1.25;color:#e8eef8;margin-bottom:24px}
.lesson-pane h1 em{font-style:italic;color:var(--accent)}.lab-pane h1 em{color:var(--lab)}
.lesson-pane p{color:var(--text);margin-bottom:18px;font-size:15px}
.lesson-pane strong{color:#e0e6f0;font-weight:500}
.callout{border-left:3px solid;padding:16px 20px;border-radius:0 6px 6px 0;margin:24px 0;font-size:14px;line-height:1.7}
.callout-title{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.1em;text-transform:uppercase;margin-bottom:8px;font-weight:600}
.callout.breach{border-color:var(--danger);background:rgba(240,90,90,.06)}.callout.breach .callout-title{color:var(--danger)}
.callout.insight{border-color:var(--violet);background:rgba(138,127,255,.06)}.callout.insight .callout-title{color:var(--violet)}
.callout.tip{border-color:var(--accent);background:var(--accent-dim)}.callout.tip .callout-title{color:var(--accent)}
.callout.warning{border-color:var(--amber);background:rgba(240,146,74,.06)}.callout.warning .callout-title{color:var(--amber)}
.callout.lab-note{border-color:var(--lab);background:var(--lab-dim)}.callout.lab-note .callout-title{color:var(--lab)}
.zt-pillars{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:24px 0}
.zt-pillar{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:16px 18px}
.zt-pillar-icon{font-size:22px;margin-bottom:8px}
.zt-pillar-name{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.06em;text-transform:uppercase;color:var(--violet);margin-bottom:6px}
.zt-pillar-desc{font-size:13px;color:#8a92a8;line-height:1.55}
.finding-types{display:flex;flex-direction:column;gap:0;border:1px solid var(--border);border-radius:8px;overflow:hidden;margin:24px 0}
.finding-row{display:grid;grid-template-columns:120px 80px 1fr;align-items:start;gap:0;border-bottom:1px solid var(--border)}
.finding-row:last-child{border-bottom:none}
.finding-row:first-child{background:var(--surface)}
.finding-type{font-family:'IBM Plex Mono',monospace;font-size:11px;color:var(--amber);padding:12px 16px;border-right:1px solid var(--border)}
.finding-pct{font-family:'IBM Plex Mono',monospace;font-size:11px;color:var(--muted);padding:12px 12px;border-right:1px solid var(--border)}
.finding-desc{font-size:13px;color:var(--text);padding:12px 16px;line-height:1.6}
.finding-row:first-child .finding-type,.finding-row:first-child .finding-pct,.finding-row:first-child .finding-desc{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.1em;text-transform:uppercase;color:var(--muted);font-weight:600}
.code-block{background:var(--code-bg);border:1px solid var(--border);border-radius:6px;margin:20px 0;overflow:hidden}
.code-header{display:flex;align-items:center;justify-content:space-between;padding:8px 16px;border-bottom:1px solid var(--border);background:rgba(255,255,255,.02)}
.code-lang{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.06em;color:var(--muted);text-transform:uppercase}
.copy-btn{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);background:transparent;border:1px solid var(--border-hi);border-radius:3px;padding:2px 8px;cursor:pointer;transition:all .15s}
.copy-btn:hover{color:var(--accent);border-color:var(--accent)}
.code-block pre{font-family:'IBM Plex Mono',monospace;font-size:12.5px;line-height:1.8;padding:16px 20px;color:#a8b4cc;overflow-x:auto}
.code-block pre .hl{color:#8a7fff}.code-block pre .hl2{color:var(--amber)}.code-block pre .str{color:#7ec88c}.code-block pre .comment{color:var(--muted)}.code-block pre .key{color:#f0c84a}
.kcheck{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:28px 28px 24px;margin:36px 0 24px}
.kcheck-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.14em;text-transform:uppercase;color:var(--violet);margin-bottom:14px}
.kcheck-q{font-size:15px;color:#d0d8ec;font-weight:500;margin-bottom:20px;line-height:1.5}
.kcheck-options{display:flex;flex-direction:column;gap:10px}
.kcheck-opt{display:flex;align-items:flex-start;gap:12px;padding:12px 16px;border:1px solid var(--border-hi);border-radius:7px;cursor:pointer;transition:all .15s;font-size:13.5px;color:#8a92a8;background:transparent;width:100%;text-align:left}
.kcheck-opt:hover:not(.disabled){border-color:var(--violet);background:rgba(138,127,255,.05);color:var(--text)}
.kcheck-opt.correct{border-color:var(--accent);background:rgba(138,127,255,.1);color:var(--accent)}
.kcheck-opt.wrong{border-color:var(--danger);background:rgba(240,90,90,.07);color:var(--danger)}
.kcheck-opt.reveal-correct{border-color:var(--accent);background:rgba(138,127,255,.05);color:#7a70cc}
.opt-key{font-family:'IBM Plex Mono',monospace;font-size:11px;width:22px;height:22px;border-radius:4px;background:var(--border);display:flex;align-items:center;justify-content:center;flex-shrink:0;color:var(--muted);transition:all .15s;margin-top:1px}
.kcheck-opt.correct .opt-key{background:var(--accent);color:#fff}.kcheck-opt.wrong .opt-key{background:var(--danger);color:#fff}.kcheck-opt.reveal-correct .opt-key{background:rgba(138,127,255,.25);color:var(--accent)}
.kcheck-feedback{margin-top:18px;padding:14px 16px;border-radius:7px;font-size:13.5px;line-height:1.65;display:none}
.kcheck-feedback.show{display:block}.kcheck-feedback.good{background:rgba(138,127,255,.08);border:1px solid rgba(138,127,255,.2);color:#9d94d8}.kcheck-feedback.bad{background:rgba(240,90,90,.08);border:1px solid rgba(240,90,90,.2);color:#c47a7a}
.lab-steps{display:flex;flex-direction:column;gap:0;margin:24px 0}
.lab-step{display:flex;gap:20px;padding:20px 0;border-bottom:1px solid var(--border)}.lab-step:last-child{border-bottom:none}
.step-num-wrap{display:flex;flex-direction:column;align-items:center;flex-shrink:0}
.step-num{width:32px;height:32px;border-radius:50%;background:var(--pill);border:2px solid var(--border-hi);font-family:'IBM Plex Mono',monospace;font-size:12px;color:var(--muted);display:flex;align-items:center;justify-content:center}
.step-connector{width:2px;flex:1;background:var(--border);margin-top:4px}.lab-step:last-child .step-connector{display:none}
.step-content{flex:1;padding-top:4px}
.step-title{font-family:'DM Serif Display',serif;font-size:16px;color:#e4eaf6;margin-bottom:8px}
.step-body{font-size:14px;color:var(--text);line-height:1.7}
.step-body ol{padding-left:20px;display:flex;flex-direction:column;gap:6px;margin:10px 0}.step-body li{color:#a0a8bc}
.step-body code{font-family:'IBM Plex Mono',monospace;font-size:12px;background:var(--pill);padding:1px 6px;border-radius:3px;color:var(--violet)}
.checklist{display:flex;flex-direction:column;gap:10px;margin:24px 0}
.check-item{display:flex;align-items:flex-start;gap:12px;padding:12px 16px;background:var(--surface);border:1px solid var(--border);border-radius:7px;cursor:pointer;transition:all .2s;user-select:none}
.check-item:hover{border-color:var(--border-hi)}.check-item.checked{border-color:rgba(240,200,74,.3);background:rgba(240,200,74,.05)}
.check-box{width:18px;height:18px;border-radius:4px;border:2px solid var(--border-hi);flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:all .2s;margin-top:1px;font-size:10px;color:transparent}
.check-item.checked .check-box{background:var(--lab);border-color:var(--lab);color:var(--bg)}
.check-text{font-size:13.5px;color:#8a92a8;line-height:1.5}.check-item.checked .check-text{color:var(--muted);text-decoration:line-through;text-decoration-color:var(--faint)}
.checklist-progress{display:flex;align-items:center;gap:12px;margin-bottom:16px}
.checklist-progress-bar{flex:1;height:3px;background:var(--border);border-radius:2px;overflow:hidden}
.checklist-progress-fill{height:100%;background:var(--lab);border-radius:2px;transition:width .4s ease}
.checklist-progress-label{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);white-space:nowrap}
.lesson-nav-footer{display:flex;justify-content:space-between;align-items:center;margin-top:52px;padding-top:28px;border-top:1px solid var(--border)}
.next-btn{background:var(--accent);color:#fff;border:none;border-radius:6px;padding:11px 24px;font-family:'IBM Plex Mono',monospace;font-size:12px;font-weight:600;cursor:pointer;letter-spacing:.04em;transition:opacity .15s;display:flex;align-items:center;gap:8px;text-decoration:none}
.next-btn:hover{opacity:.88}.next-btn.lab-btn{background:var(--lab);color:var(--bg)}
.prev-btn{background:transparent;color:var(--muted);border:1px solid var(--border-hi);border-radius:6px;padding:11px 20px;font-family:'IBM Plex Mono',monospace;font-size:12px;cursor:pointer;letter-spacing:.04em;transition:all .15s;text-decoration:none;display:inline-flex;align-items:center}
.prev-btn:hover{color:var(--text);border-color:var(--text)}
.completion-card{text-align:center;padding:56px 32px}
.completion-icon{font-size:48px;margin-bottom:20px;display:block}
.completion-card h1{font-family:'DM Serif Display',serif;font-size:32px;color:var(--accent);margin-bottom:12px}
.completion-card p{color:var(--muted);max-width:420px;margin:0 auto 28px;font-size:14px}
.score-pill{display:inline-flex;align-items:center;gap:8px;background:rgba(138,127,255,.1);border:1px solid rgba(138,127,255,.25);color:var(--accent);border-radius:40px;padding:8px 20px;font-family:'IBM Plex Mono',monospace;font-size:13px;margin-bottom:8px}
.lab-score-pill{display:inline-flex;align-items:center;gap:8px;background:rgba(240,200,74,.1);border:1px solid rgba(240,200,74,.25);color:var(--lab);border-radius:40px;padding:8px 20px;font-family:'IBM Plex Mono',monospace;font-size:13px;margin-bottom:32px}
::-webkit-scrollbar{width:5px;height:5px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border-hi);border-radius:3px}
@media(max-width:768px){.shell{grid-template-columns:1fr}.sidebar{display:none}.lesson-pane{padding:32px 24px 60px}.lesson-topbar{padding:14px 24px}.zt-pillars{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="shell">
<nav class="sidebar">
  <div class="sidebar-header">
    <div class="day-badge">Week 2 ¬∑ Day 9</div>
    <h2>Zero Trust:<br>IAM Access Analyzer</h2>
    <div class="sidebar-meta"><span class="chip">Zero Trust</span><span class="chip">4 lessons</span><span class="chip">1 lab</span><span class="chip">~4h</span></div>
  </div>

  <div class="sidebar-back">
    <a class="back-index" href="../index.html">
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M7.5 2L3.5 6L7.5 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      Course Index
    </a>
    <div class="week-jumps-label">Jump to week</div>
    <div class="week-jumps">
      <a class="week-jump wj1" href="../index.html#week-1">W1</a>
      <a class="week-jump wj2" href="../index.html#week-2">W2</a>
      <a class="week-jump wj3" href="../index.html#week-3">W3</a>
      <a class="week-jump wj4" href="../index.html#week-4">W4</a>
    </div>
    <div class="day-nav-label">Week 2 days</div>
    <div class="day-nav">
      <a class="day-link " href="day-08.html">D8</a>
      <a class="day-link current" href="day-09.html">D9</a>
      <a class="day-link" href="day-10.html">D10</a>
      <a class="day-link" href="day-11.html">D11</a>
      <a class="day-link" href="day-12.html">D12</a>
      <a class="day-link" href="day-13.html">D13</a>
      <a class="day-link" href="day-14.html">D14</a>
   
    </div>
  </div>


  <div class="lesson-nav">
    <div class="nav-group-label">Lessons</div>
    <div class="nav-item active" onclick="goTo(0)"><span class="nav-num">01</span><span class="nav-label">Zero Trust Architecture</span><span class="nav-check">‚úì</span></div>
    <div class="nav-item" onclick="goTo(1)"><span class="nav-num">02</span><span class="nav-label">Access Analyzer: How It Works</span><span class="nav-check">‚úì</span></div>
    <div class="nav-item" onclick="goTo(2)"><span class="nav-num">03</span><span class="nav-label">Finding Types &amp; Triage</span><span class="nav-check">‚úì</span></div>
    <div class="nav-item" onclick="goTo(3)"><span class="nav-num">04</span><span class="nav-label">Automated Remediation</span><span class="nav-check">‚úì</span></div>
    <div class="nav-group-label" style="margin-top:8px">Lab</div>
    <div class="nav-item lab-item" onclick="goTo(4)"><span class="nav-num" style="color:var(--lab)">üî¨</span><span class="nav-label">Hands-on: Activate &amp; Triage Findings</span><span class="nav-check">‚úì</span></div>
  </div>
  <div class="sidebar-footer">
    <div class="progress-label"><span>Progress</span><span id="progress-pct">0 / 5</span></div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
  </div>
</nav>
<div class="main">
  <div class="lesson-topbar">
    <div class="lesson-crumb">Week 2 ¬∑ Day 9 &nbsp;/&nbsp; <span id="topbar-title">Zero Trust Architecture</span></div>
    <div class="nav-arrows">
      <button class="arrow-btn" id="btn-prev" onclick="prev()" disabled>‚Üê Prev</button>
      <button class="arrow-btn" id="btn-next" onclick="next()">Next ‚Üí</button>
    </div>
  </div>

  <!-- LESSON 1 -->
  <div class="lesson-pane active" id="pane-0">
    <div class="lesson-tag tag-security">Zero Trust</div>
    <h1>Zero Trust<br><em>Architecture</em></h1>
    <p><strong>Objective:</strong> Understand the Zero Trust model from first principles ‚Äî what it means in a cloud identity context, why it replaced perimeter security, and how IAM implements it.</p>
    <p>The perimeter model assumed: "inside the network = trusted." Cloud destroyed this assumption. In AWS, there is no inside. An EC2 instance, a Lambda function, an on-premise server, and an attacker with stolen credentials all look identical to the IAM service. The only thing that differentiates them is the identity and its associated policies.</p>
    <p>Zero Trust replaces "trust the network" with three principles:</p>

    <div class="zt-pillars">
      <div class="zt-pillar"><div class="zt-pillar-icon">üîç</div><div class="zt-pillar-name">Verify Explicitly</div><div class="zt-pillar-desc">Always authenticate and authorise on every request. Use all available signals: identity, location, device, service, data classification, anomalies.</div></div>
      <div class="zt-pillar"><div class="zt-pillar-icon">üîë</div><div class="zt-pillar-name">Least Privilege Access</div><div class="zt-pillar-desc">Limit access with just-in-time, just-enough-access. Minimise blast radius. Never standing admin access.</div></div>
      <div class="zt-pillar"><div class="zt-pillar-icon">üí•</div><div class="zt-pillar-name">Assume Breach</div><div class="zt-pillar-desc">Design assuming an attacker is already inside. Segment access, encrypt everything, log all actions, minimise lateral movement paths.</div></div>
      <div class="zt-pillar"><div class="zt-pillar-icon">üëÅÔ∏è</div><div class="zt-pillar-name">Continuous Verification</div><div class="zt-pillar-desc">Don't grant and forget. Continuously re-evaluate access as context changes: new CVEs, credential age, usage patterns, anomaly signals.</div></div>
    </div>

    <div class="callout insight"><div class="callout-title">üí° AWS IAM is a Zero Trust Engine</div>Every IAM evaluation is stateless: no historical context, no "we verified this user last week." Every API call is independently evaluated from scratch. This is Zero Trust by design ‚Äî the challenge is configuring policies that reflect the principle.</div>

    <div class="callout breach"><div class="callout-title">‚ö† Stolen Credentials ‚Äî 20% of All Cloud Breaches</div>IBM CDBIR 2025: stolen or compromised credentials account for 20% of cloud breaches. The attacker doesn't need to exploit a vulnerability ‚Äî they just need valid credentials. Zero Trust's "assume breach" pillar means designing for the scenario where credentials are already stolen.</div>

    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">A developer's laptop is stolen. The attacker recovers long-lived IAM access keys from the disk. Under a proper Zero Trust implementation, what limits the damage?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">A</span>The attacker can't use the keys from a different IP ‚Äî AWS blocks unfamiliar locations</button>
        <button class="kcheck-opt" onclick="check(this,true,0)"><span class="opt-key">B</span>Least privilege limits what the keys can access, JIT means they should have expired, and continuous monitoring detects anomalous usage for rapid revocation</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">C</span>MFA protects access keys ‚Äî the attacker needs the second factor</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">D</span>AWS automatically invalidates keys when a new IP accesses them</button>
      </div>
      <div class="kcheck-feedback" id="fb-0"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" disabled>‚Üê Previous</button><button class="next-btn" onclick="next()">Next Lesson ‚Üí</button></div>
  </div>

  <!-- LESSON 2 -->
  <div class="lesson-pane" id="pane-1">
    <div class="lesson-tag tag-concept">Core Service</div>
    <h1>Access Analyzer:<br><em>How It Works</em></h1>
    <p><strong>Objective:</strong> Understand how IAM Access Analyzer uses automated reasoning to find external access paths ‚Äî not heuristics, but mathematical proof of what can be accessed by whom.</p>
    <p>IAM Access Analyzer is not a scanner that guesses at risks. It uses <strong>automated reasoning</strong> ‚Äî a formal method that mathematically proves whether a given external principal can access a given resource, given any combination of policies. It analyses every resource-based policy in your account and identifies those that grant access to principals outside your account's trust zone.</p>

    <div class="callout insight"><div class="callout-title">üí° Zone of Trust</div>When you create an analyzer, you define a Zone of Trust. Any principal outside this zone that has access to your resources generates a finding. Zones can be: a single account (most common), an AWS Organization (catches cross-account, not cross-org), or multiple accounts.</div>

    <div class="code-block">
      <div class="code-header"><span class="code-lang">bash ‚Äî Create an Analyzer</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
      <pre><span class="comment"># Account-level analyzer (catches access from outside your account)</span>
aws accessanalyzer create-analyzer \
  --analyzer-name <span class="hl">csm-account-analyzer</span> \
  --type <span class="hl2">ACCOUNT</span>

<span class="comment"># Organization-level (requires AWS Organizations management account)</span>
aws accessanalyzer create-analyzer \
  --analyzer-name <span class="str">csm-org-analyzer</span> \
  --type <span class="hl2">ORGANIZATION</span>

<span class="comment"># List active analyzers</span>
aws accessanalyzer list-analyzers</pre>
    </div>

    <p>Access Analyzer continuously monitors these resource types: S3 buckets, IAM roles (trust policies), KMS keys, Lambda functions and layers, SQS queues, Secrets Manager secrets, and SNS topics. Any policy change that creates a new external access path triggers a new finding within minutes.</p>

    <div class="callout warning"><div class="callout-title">‚ö† What Access Analyzer Does NOT Find</div>It does not find unused permissions (that's CIEM ‚Äî Day 10). It does not find privilege escalation paths within your account. It does not scan S3 object ACLs. It only finds where external principals have been explicitly granted access via policy.</div>

    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">You create an account-level Access Analyzer. An S3 bucket has a bucket policy granting read access to <code>arn:aws:iam::999999999:role/AuditRole</code> (a different AWS account). What happens?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,true,1)"><span class="opt-key">A</span>Access Analyzer generates a finding ‚Äî the external account's role is outside your zone of trust</button>
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">B</span>No finding ‚Äî the external role has a specific ARN, which means it's intentional and trusted</button>
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">C</span>Access Analyzer blocks the bucket policy from being applied</button>
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">D</span>A finding is only generated if the bucket is public (no authentication required)</button>
      </div>
      <div class="kcheck-feedback" id="fb-1"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn" onclick="next()">Next Lesson ‚Üí</button></div>
  </div>

  <!-- LESSON 3 -->
  <div class="lesson-pane" id="pane-2">
    <div class="lesson-tag tag-warning">Operations</div>
    <h1>Finding Types<br><em>&amp; Triage</em></h1>
    <p><strong>Objective:</strong> Know how to triage Access Analyzer findings efficiently ‚Äî which patterns are genuinely risky vs. expected, and how to build an archive workflow so findings don't become noise.</p>

    <div class="finding-types">
      <div class="finding-row"><div class="finding-type">Type</div><div class="finding-pct">% of Findings</div><div class="finding-desc">Description &amp; Action</div></div>
      <div class="finding-row"><div class="finding-type">Internet</div><div class="finding-pct">~15%</div><div class="finding-desc">Resource accessible to anyone (<code>"Principal": "*"</code> with no conditions). <strong>Almost always critical</strong> ‚Äî investigate immediately and remediate unless deliberately public.</div></div>
      <div class="finding-row"><div class="finding-type">Cross-account</div><div class="finding-pct">~25%</div><div class="finding-desc">Specific external account has access. Review against your list of approved vendors/partners. Archive if expected, remediate if unexpected.</div></div>
      <div class="finding-row"><div class="finding-type">Cross-org</div><div class="finding-pct">~10%</div><div class="finding-desc">Another AWS account in your Organisation but a different OU. Often legitimate (shared services) ‚Äî confirm OU ownership and archive if approved.</div></div>
      <div class="finding-row"><div class="finding-type">Federated</div><div class="finding-pct">~30%</div><div class="finding-desc">Identity provider (Okta, Azure AD) has access via SAML/OIDC. Usually expected for SSO ‚Äî confirm IdP and archive.</div></div>
      <div class="finding-row"><div class="finding-type">AWS Service</div><div class="finding-pct">~20%</div><div class="finding-desc">AWS service principal (e.g. lambda.amazonaws.com). Almost always legitimate service integrations ‚Äî archive after verifying the use case.</div></div>
    </div>

    <div class="callout tip"><div class="callout-title">‚úì Archive, Don't Suppress</div>When a finding is legitimate, archive it with a note explaining why (e.g. "Vendor X cross-account read ‚Äî approved 2025-01-15 by CISO"). This creates an auditable record. Unreviewed findings = audit failure. Archived with rationale = audit pass.</div>

    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">Access Analyzer finds that your S3 log bucket has a bucket policy granting read access to <code>delivery.logs.amazonaws.com</code>. What should you do?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,2)"><span class="opt-key">A</span>Remove the policy ‚Äî no AWS service should have direct access to S3</button>
        <button class="kcheck-opt" onclick="check(this,true,2)"><span class="opt-key">B</span>Verify this is the ELB/CloudFront log delivery service, then archive the finding with a note explaining the legitimate use case</button>
        <button class="kcheck-opt" onclick="check(this,false,2)"><span class="opt-key">C</span>Escalate as a critical incident ‚Äî AWS service principals accessing S3 indicate a supply chain attack</button>
        <button class="kcheck-opt" onclick="check(this,false,2)"><span class="opt-key">D</span>Do nothing ‚Äî AWS service access is outside the Zone of Trust and won't generate findings</button>
      </div>
      <div class="kcheck-feedback" id="fb-2"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn" onclick="next()">Next Lesson ‚Üí</button></div>
  </div>

  <!-- LESSON 4 -->
  <div class="lesson-pane" id="pane-3">
    <div class="lesson-tag tag-security">Automation</div>
    <h1>Automated<br><em>Remediation</em></h1>
    <p><strong>Objective:</strong> Build an automated remediation pipeline for Access Analyzer findings using EventBridge and Lambda so critical findings are acted on within minutes, not weeks.</p>
    <p>Access Analyzer emits EventBridge events for every new finding. This lets you build automated workflows: notify on new Internet-access findings, auto-remediate specific patterns, or auto-archive expected vendor access. The pattern is: Analyzer finding ‚Üí EventBridge rule ‚Üí Lambda function ‚Üí remediate or notify.</p>

    <div class="code-block">
      <div class="code-header"><span class="code-lang">JSON ‚Äî EventBridge Rule: Alert on Internet Access Findings</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
      <pre>{
  <span class="key">"source"</span>: [<span class="str">"aws.access-analyzer"</span>],
  <span class="key">"detail-type"</span>: [<span class="str">"Access Analyzer Finding"</span>],
  <span class="key">"detail"</span>: {
    <span class="key">"status"</span>: [<span class="str">"ACTIVE"</span>],
    <span class="key">"principal"</span>: {
      <span class="key">"AWS"</span>: [<span class="str">"*"</span>]  <span class="comment">// Any AWS principal (catches internet access)</span>
    },
    <span class="key">"isPublic"</span>: [<span class="hl2">true</span>]  <span class="comment">// Only public findings</span>
  }
}</pre>
    </div>

    <div class="callout insight"><div class="callout-title">üí° Portfolio Proof: Automated Findings Response</div>A SOAR automation that automatically archives expected findings and pages on unexpected ones is a strong portfolio piece. It demonstrates you can build a detection workflow, not just read a findings dashboard. Day 26 covers full SOAR ‚Äî today's lab builds the foundation.</div>

    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">You want to automatically revoke S3 bucket public access whenever Access Analyzer finds an internet-accessible bucket. Which architecture is correct?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">A</span>Configure Access Analyzer's built-in auto-remediation setting in the console</button>
        <button class="kcheck-opt" onclick="check(this,true,3)"><span class="opt-key">B</span>EventBridge rule (filter: Access Analyzer + isPublic=true + resourceType=S3) ‚Üí Lambda function ‚Üí S3:PutPublicAccessBlock to block public access + SNS notification</button>
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">C</span>CloudWatch Alarm on AccessAnalyzer:FindingCount ‚Üí Lambda remediation</button>
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">D</span>Config rule with auto-remediation SSM document targeting the S3 bucket</button>
      </div>
      <div class="kcheck-feedback" id="fb-3"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn lab-btn" onclick="next()">Start Lab ‚Üí</button></div>
  </div>

  <!-- LAB -->
  <div class="lesson-pane lab-pane" id="pane-4">
    <div class="lesson-tag tag-lab">üî¨ Hands-On Lab</div>
    <h1>Activate &amp; Triage<br><em>Access Analyzer Findings</em></h1>
    <p>Enable IAM Access Analyzer, generate intentional findings to test it, triage and archive findings with rationale, and export the findings report for your portfolio.</p>
    <div class="callout lab-note"><div class="callout-title">‚ö° Cost Note</div>IAM Access Analyzer is free. The findings you generate in this lab don't incur charges. You'll create a temporary public S3 bucket purely to test the detector, then make it private immediately.</div>

    <div class="lab-steps">
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">1</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Enable Access Analyzer <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~5 min</span></div>
          <div class="step-body">
            <ol>
              <li>IAM ‚Üí Access Analyzer ‚Üí Create analyzer</li>
              <li>Name: <code>csm-account-analyzer</code>, Type: Account</li>
              <li>Click Create Analyzer ‚Äî initial scan runs immediately</li>
              <li>Note: if you have existing cross-account findings from Day 4 SCP testing, they may appear here</li>
            </ol>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">2</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Generate a Test Finding <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~10 min</span></div>
          <div class="step-body">
            <p style="color:#8a92a8;margin-bottom:10px">Create a temporary S3 bucket with a public policy to trigger an Internet-access finding:</p>
            <div class="code-block" style="margin:8px 0">
              <div class="code-header"><span class="code-lang">bash</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
              <pre><span class="comment"># Create test bucket</span>
aws s3api create-bucket --bucket csm-analyzer-test-$(date +%s) \
  --region us-east-1

<span class="comment"># Apply a public read policy (DO NOT do this in production)</span>
aws s3api put-bucket-policy --bucket YOUR-BUCKET-NAME --policy '{
  "Version":"2012-10-17",
  "Statement":[{"Effect":"Allow","Principal":"*","Action":"s3:GetObject","Resource":"arn:aws:s3:::YOUR-BUCKET-NAME/*"}]
}'

<span class="comment"># Wait ~2 minutes, then check findings</span>
aws accessanalyzer list-findings --analyzer-arn YOUR-ANALYZER-ARN</pre>
            </div>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">3</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Remediate, Then Archive <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~10 min</span></div>
          <div class="step-body">
            <ol>
              <li>Immediately remove the public policy: <code>aws s3api delete-bucket-policy --bucket YOUR-BUCKET-NAME</code></li>
              <li>In Console: Access Analyzer ‚Üí click the finding ‚Üí Review action ‚Üí Archive</li>
              <li>Archive note: <code>"Test finding ‚Äî deliberately created 2025-XX-XX for Day 9 lab. Bucket policy removed immediately."</code></li>
              <li>Delete the test bucket: <code>aws s3api delete-bucket --bucket YOUR-BUCKET-NAME</code></li>
            </ol>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">4</div></div>
        <div class="step-content">
          <div class="step-title">Export Findings Report <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~10 min</span></div>
          <div class="step-body">
            <ol>
              <li>CLI: <code>aws accessanalyzer list-findings --analyzer-arn YOUR-ANALYZER-ARN &gt; day-09-findings.json</code></li>
              <li>Save to <code>portfolio/reports/day-09-access-analyzer-findings.json</code></li>
              <li>Write <code>DAY-09-Access-Analyzer.md</code>: document the finding type, what triggered it, how you triaged it, and the archive rationale</li>
              <li>GitHub commit: <code>"Day 9: Access Analyzer activated ‚Äî internet-access finding triaged and remediated"</code></li>
            </ol>
          </div>
        </div>
      </div>
    </div>

    <h2 style="font-family:'DM Serif Display',serif;font-size:20px;color:#e4eaf6;margin:32px 0 16px;font-weight:400">Lab Completion Checklist</h2>
    <div class="checklist-progress"><div class="checklist-progress-bar"><div class="checklist-progress-fill" id="cl-fill"></div></div><span class="checklist-progress-label" id="cl-label">0 / 6</span></div>
    <div class="checklist">
      <div class="check-item" onclick="toggleCheck(this,0)"><div class="check-box">‚úì</div><div class="check-text">IAM Access Analyzer enabled (account-level)</div></div>
      <div class="check-item" onclick="toggleCheck(this,1)"><div class="check-box">‚úì</div><div class="check-text">Test S3 bucket created with public policy ‚Äî Internet-access finding generated</div></div>
      <div class="check-item" onclick="toggleCheck(this,2)"><div class="check-box">‚úì</div><div class="check-text">Public policy removed immediately after confirming finding</div></div>
      <div class="check-item" onclick="toggleCheck(this,3)"><div class="check-box">‚úì</div><div class="check-text">Finding archived with rationale note in console</div></div>
      <div class="check-item" onclick="toggleCheck(this,4)"><div class="check-box">‚úì</div><div class="check-text">Findings report exported to portfolio/reports/</div></div>
      <div class="check-item" onclick="toggleCheck(this,5)"><div class="check-box">‚úì</div><div class="check-text">DAY-09 markdown written and committed to GitHub</div></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn lab-btn" onclick="finish()">Complete Day 9 ‚úì</button></div>
  </div>

  <!-- COMPLETION -->
  <div class="lesson-pane" id="pane-complete">
    <div class="completion-card">
      <span class="completion-icon">üîç</span>
      <h1>Day 9 Complete!</h1>
      <p>You understand Zero Trust architecture, how Access Analyzer uses automated reasoning, finding types and triage, and how to build automated remediation pipelines.</p>
      <div class="score-pill"><span>‚ö°</span> Quiz: <span id="score-val">‚Äî</span></div><br>
      <div class="lab-score-pill"><span>üî¨</span> Lab: <span id="lab-score-val">‚Äî</span> / 6 items</div>
      <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
        <a href="../../index.html" style="text-decoration:none"><button class="prev-btn">‚Üê Course Index</button></a>
        <a href="day-10.html" style="text-decoration:none"><button class="next-btn">Day 10: CIEM Operations ‚Üí</button></a>
      </div>
    </div>
  </div>
</div>
</div>
<script>
const STORAGE_KEY='csm-day09';const TOTAL=5;
const titles=['Zero Trust Architecture','Access Analyzer: How It Works','Finding Types & Triage','Automated Remediation','Hands-on: Activate & Triage Findings'];
const fb={
  0:{good:"Correct. Long-lived access keys are the problem ‚Äî Zero Trust mitigates the impact through least privilege (limits what stolen keys can do), JIT (keys should have expired), and continuous monitoring (detects anomalous usage). MFA doesn't protect access keys ‚Äî it only protects console logins.",bad:"Not quite. AWS does not block access from unfamiliar IPs, and MFA protects console logins not programmatic access keys. Zero Trust limits damage via least privilege (limits scope), JIT (keys should have expired), and anomaly detection (rapid revocation)."},
  1:{good:"Correct. Any principal outside your account's Zone of Trust that has access to a resource generates a finding ‚Äî including specific named external roles. The finding lets you review whether this is an approved vendor or unexpected access.",bad:"Not quite. Access Analyzer generates findings for ALL external principals, including specifically named roles from other accounts. The specificity of the ARN doesn't imply trust ‚Äî it still needs to be reviewed and archived if legitimate."},
  2:{good:"Correct. delivery.logs.amazonaws.com is the AWS log delivery service used by ELB, CloudFront, and others to write access logs to S3. This is a legitimate AWS service principal. Verify the use case, then archive with a rationale note.",bad:"Not quite. delivery.logs.amazonaws.com is a legitimate AWS service principal ‚Äî not a threat indicator. These findings require verification, not alarm. Check that the service matches your infrastructure (ELB/CloudFront logging), then archive with a note."},
  3:{good:"Correct. The correct architecture is: EventBridge rule filtering for Access Analyzer findings where isPublic=true and resourceType=AWS::S3::Bucket ‚Üí Lambda function that calls s3:PutPublicAccessBlock ‚Üí SNS notification. Access Analyzer has no built-in auto-remediation.",bad:"Not quite. Access Analyzer has no built-in auto-remediation feature. The correct approach is EventBridge (catches the finding event) ‚Üí Lambda (executes the remediation) ‚Üí S3:PutPublicAccessBlock + notification. Config remediation targets detected drift, not Analyzer findings specifically."}
};
let state=loadState();
function loadState(){try{const s=localStorage.getItem(STORAGE_KEY);if(s)return JSON.parse(s);}catch(e){}return{current:0,done:[],correct:[],answered:[],checks:[]};}
function saveState(){try{localStorage.setItem(STORAGE_KEY,JSON.stringify(state));}catch(e){}}
function goTo(n){document.querySelectorAll('.lesson-pane').forEach(p=>p.classList.remove('active'));document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('active'));state.current=n;document.getElementById('pane-'+(n===TOTAL?'complete':n)).classList.add('active');const items=document.querySelectorAll('.nav-item');if(items[n])items[n].classList.add('active');document.getElementById('topbar-title').textContent=titles[n]||'Complete';document.getElementById('btn-prev').disabled=(n===0);document.getElementById('btn-next').disabled=(n>=TOTAL-1);window.scrollTo(0,0);saveState();updateProgress();}
function next(){if(state.current<TOTAL-1)goTo(state.current+1);}function prev(){if(state.current>0)goTo(state.current-1);}
function finish(){markDone(state.current);document.querySelectorAll('.lesson-pane').forEach(p=>p.classList.remove('active'));document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('active'));document.getElementById('score-val').textContent=state.correct.length+' / 4';document.getElementById('lab-score-val').textContent=state.checks.filter(Boolean).length;document.getElementById('pane-complete').classList.add('active');document.getElementById('topbar-title').textContent='Day 9 Complete!';document.getElementById('btn-prev').disabled=true;document.getElementById('btn-next').disabled=true;saveState();}
function markDone(n){if(!state.done.includes(n))state.done.push(n);const items=document.querySelectorAll('.nav-item');if(items[n])items[n].classList.add('done');updateProgress();}
function updateProgress(){const c=state.done.length;document.getElementById('progress-pct').textContent=c+' / '+TOTAL;document.getElementById('progress-fill').style.width=(c/TOTAL*100)+'%';}
function check(btn,isCorrect,idx){if(state.answered.includes(idx))return;state.answered.push(idx);const opts=btn.closest('.kcheck-options').querySelectorAll('.kcheck-opt');opts.forEach(o=>{o.classList.add('disabled');o.style.pointerEvents='none';});const fbEl=document.getElementById('fb-'+idx);if(isCorrect){btn.classList.add('correct');fbEl.className='kcheck-feedback show good';fbEl.textContent='‚úì '+fb[idx].good;if(!state.correct.includes(idx))state.correct.push(idx);}else{btn.classList.add('wrong');fbEl.className='kcheck-feedback show bad';fbEl.textContent='‚úó '+fb[idx].bad;opts.forEach(o=>{if(o.getAttribute('onclick')&&o.getAttribute('onclick').includes('true'))o.classList.add('reveal-correct');});}markDone(idx);saveState();}
function toggleCheck(el,idx){if(!state.checks[idx])state.checks[idx]=false;state.checks[idx]=!state.checks[idx];el.classList.toggle('checked',state.checks[idx]);updateChecklist();saveState();}
function updateChecklist(){const total=6,checked=state.checks.filter(Boolean).length;document.getElementById('cl-fill').style.width=(checked/total*100)+'%';document.getElementById('cl-label').textContent=checked+' / '+total;if(checked===total&&!state.done.includes(4))markDone(4);}
function copyCode(btn){const pre=btn.closest('.code-block').querySelector('pre');navigator.clipboard.writeText(pre.innerText).then(()=>{btn.textContent='copied!';setTimeout(()=>btn.textContent='copy',1500);});}
function restoreState(){state.done.forEach(n=>{const items=document.querySelectorAll('.nav-item');if(items[n])items[n].classList.add('done');});state.answered.forEach(idx=>{const paneEl=document.getElementById('pane-'+idx);if(!paneEl)return;const opts=paneEl.querySelectorAll('.kcheck-opt');opts.forEach(o=>{o.classList.add('disabled');o.style.pointerEvents='none';});const fbEl=document.getElementById('fb-'+idx);if(state.correct.includes(idx)){const co=Array.from(opts).find(o=>o.getAttribute('onclick')&&o.getAttribute('onclick').includes('true'));if(co)co.classList.add('correct');if(fbEl){fbEl.className='kcheck-feedback show good';fbEl.textContent='‚úì '+fb[idx].good;}}else{opts.forEach(o=>{if(o.getAttribute('onclick')&&o.getAttribute('onclick').includes('true'))o.classList.add('reveal-correct');});if(fbEl){fbEl.className='kcheck-feedback show bad';fbEl.textContent='‚úó '+fb[idx].bad;}}});state.checks.forEach((v,i)=>{if(v){const items=document.querySelectorAll('.check-item');if(items[i])items[i].classList.add('checked');}});updateChecklist();updateProgress();goTo(state.current||0);}
restoreState();
</script>
</body>
</html>
