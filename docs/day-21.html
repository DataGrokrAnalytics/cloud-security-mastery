<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Day 21 â€” Week 3 Protection Portfolio</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root{--bg:#0d0f14;--surface:#13161d;--surface2:#181c26;--border:#1f2330;--border-hi:#2e3447;--text:#c8d0e0;--muted:#5a6178;--faint:#3a3f52;--accent:#3ecfcf;--accent-dim:rgba(62,207,207,.08);--amber:#f0924a;--violet:#8a7fff;--danger:#f05a5a;--code-bg:#0a0c10;--pill:#1a1f2e;--lab:#f0c84a;--lab-dim:rgba(240,200,74,.08);--w3:#3ecfcf;}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;font-weight:300;font-size:15px;line-height:1.75;min-height:100vh;overflow-x:hidden}
.shell{display:grid;grid-template-columns:268px 1fr;min-height:100vh}
.sidebar{background:var(--surface);border-right:1px solid var(--border);padding:32px 0;position:sticky;top:0;height:100vh;overflow-y:auto;display:flex;flex-direction:column}
.sidebar-header{padding:0 24px 24px;border-bottom:1px solid var(--border)}
.day-badge{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.12em;text-transform:uppercase;color:var(--w3);margin-bottom:6px}
.sidebar-header h2{font-family:'DM Serif Display',serif;font-size:15px;font-weight:400;color:#e4eaf6;line-height:1.4}
.sidebar-meta{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
.chip{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.06em;background:var(--pill);color:var(--muted);padding:3px 8px;border-radius:3px}
.lesson-nav{padding:16px 0;flex:1}
.nav-group-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.14em;text-transform:uppercase;color:var(--faint);padding:10px 24px 6px}
.nav-item{display:flex;align-items:center;gap:10px;padding:9px 24px;cursor:pointer;transition:background .15s;border-left:2px solid transparent}
.nav-item:hover{background:rgba(255,255,255,.03)}
.nav-item.active{background:var(--accent-dim);border-left-color:var(--accent)}.nav-item.active .nav-label{color:var(--accent)}
.nav-item.lab-item.active{background:var(--lab-dim);border-left-color:var(--lab)}.nav-item.lab-item.active .nav-label{color:var(--lab)}
.nav-num{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);width:18px;flex-shrink:0;text-align:right}
.nav-label{font-size:12.5px;color:#8a92a8;line-height:1.3}
.nav-check{margin-left:auto;width:14px;height:14px;border-radius:50%;border:1px solid var(--border-hi);flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:8px;color:transparent;transition:all .2s}
.nav-item.done .nav-check{background:var(--accent);border-color:var(--accent);color:var(--bg)}
.nav-item.lab-item.done .nav-check{background:var(--lab);border-color:var(--lab);color:var(--bg)}
.sidebar-footer{padding:20px 24px;border-top:1px solid var(--border);margin-top:auto}
.progress-label{display:flex;justify-content:space-between;font-size:11px;color:var(--muted);margin-bottom:8px}
.progress-bar{height:3px;background:var(--border);border-radius:2px;overflow:hidden}
.progress-fill{height:100%;background:var(--accent);border-radius:2px;transition:width .4s ease;width:0%}

/* â”€â”€ Sidebar back navigation â”€â”€ */
.sidebar-back{padding:14px 24px 12px;border-bottom:1px solid var(--border);display:flex;flex-direction:column;gap:6px}
.back-index{display:flex;align-items:center;gap:8px;font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.06em;color:var(--muted);text-decoration:none;padding:6px 10px;border-radius:5px;border:1px solid var(--border-hi);transition:all .15s;background:transparent}
.back-index:hover{color:var(--accent);border-color:var(--accent);background:var(--accent-dim)}
.back-index svg{flex-shrink:0;opacity:.6}
.week-jumps-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.1em;text-transform:uppercase;color:var(--faint);margin-bottom:1px}
.week-jumps{display:flex;gap:5px;flex-wrap:wrap;margin-top:2px}
.week-jump{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.06em;padding:3px 9px;border-radius:3px;border:1px solid var(--border-hi);color:var(--muted);text-decoration:none;transition:all .12s;background:transparent}
.week-jump:hover{color:var(--text);background:rgba(255,255,255,.04)}
.week-jump.wj1{color:#4af0c4;border-color:rgba(74,240,196,.3)}
.week-jump.wj2{color:#8a7fff;border-color:rgba(138,127,255,.3)}
.week-jump.wj3{color:#f0924a;border-color:rgba(240,146,74,.3)}
.week-jump.wj4{color:#f05a5a;border-color:rgba(240,90,90,.3)}

/* â”€â”€ Day nav strip â”€â”€ */
.day-nav-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.1em;text-transform:uppercase;color:var(--faint);margin-top:8px;margin-bottom:2px}
.day-nav{display:flex;gap:4px;flex-wrap:wrap}
.day-link{font-family:'IBM Plex Mono',monospace;font-size:9px;padding:3px 7px;border-radius:3px;border:1px solid var(--border-hi);color:var(--muted);text-decoration:none;transition:all .12s;background:transparent}
.day-link:hover{color:var(--text);background:rgba(255,255,255,.04)}
.day-link.current{color:var(--accent);border-color:rgba(74,240,196,.4);background:rgba(74,240,196,.06);font-weight:600}




.main{display:flex;flex-direction:column}
.lesson-topbar{display:flex;align-items:center;justify-content:space-between;padding:16px 48px;border-bottom:1px solid var(--border);background:var(--surface);position:sticky;top:0;z-index:10}
.lesson-crumb{font-family:'IBM Plex Mono',monospace;font-size:11px;color:var(--muted)}.lesson-crumb span{color:var(--text)}
.nav-arrows{display:flex;gap:8px}
.arrow-btn{background:var(--pill);border:1px solid var(--border-hi);color:var(--muted);border-radius:5px;padding:5px 12px;font-size:12px;cursor:pointer;font-family:'IBM Plex Mono',monospace;transition:all .15s}
.arrow-btn:hover:not(:disabled){border-color:var(--accent);color:var(--accent)}.arrow-btn:disabled{opacity:.3;cursor:default}
.lesson-pane{display:none;flex-direction:column;padding:56px 48px 80px;max-width:760px;animation:fadeIn .3s ease}
.lesson-pane.active{display:flex}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.lesson-tag{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.12em;text-transform:uppercase;margin-bottom:14px}
.tag-concept{color:var(--violet)}.tag-warning{color:var(--amber)}.tag-security{color:var(--w3)}.tag-lab{color:var(--lab)}.tag-ops{color:#f0c84a}.tag-review{color:var(--w3)}
.lesson-pane h1{font-family:'DM Serif Display',serif;font-size:28px;font-weight:400;line-height:1.25;color:#e8eef8;margin-bottom:24px}
.lesson-pane h1 em{font-style:italic;color:var(--accent)}.lab-pane h1 em{color:var(--lab)}
.lesson-pane p{color:var(--text);margin-bottom:18px;font-size:15px}
.lesson-pane strong{color:#e0e6f0;font-weight:500}
.callout{border-left:3px solid;padding:16px 20px;border-radius:0 6px 6px 0;margin:24px 0;font-size:14px;line-height:1.7}
.callout-title{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.1em;text-transform:uppercase;margin-bottom:8px;font-weight:600}
.callout.breach{border-color:var(--danger);background:rgba(240,90,90,.06)}.callout.breach .callout-title{color:var(--danger)}
.callout.insight{border-color:var(--violet);background:rgba(138,127,255,.06)}.callout.insight .callout-title{color:var(--violet)}
.callout.tip{border-color:var(--accent);background:var(--accent-dim)}.callout.tip .callout-title{color:var(--accent)}
.callout.warning{border-color:var(--amber);background:rgba(240,146,74,.06)}.callout.warning .callout-title{color:var(--amber)}
.callout.lab-note{border-color:var(--lab);background:var(--lab-dim)}.callout.lab-note .callout-title{color:var(--lab)}
.callout.week-complete{border-color:var(--w3);background:rgba(62,207,207,.06)}.callout.week-complete .callout-title{color:var(--w3)}
/* Day recap cards */
.recap-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:24px 0}
.recap-card{border:1px solid var(--border);border-radius:8px;padding:16px;background:var(--surface);transition:border-color .15s}
.recap-card:hover{border-color:var(--border-hi)}
.recap-day{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--w3);letter-spacing:.08em;margin-bottom:6px}
.recap-title{font-size:13.5px;color:#e4eaf6;font-weight:500;margin-bottom:8px}
.recap-bullets{font-size:12.5px;color:#6a7490;line-height:1.7;padding-left:14px}
.recap-bullets li{margin-bottom:2px}
/* Architecture diagram */
.arch-diagram {
  background: var(--code-bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 20px 24px;
  margin: 24px 0;
  overflow-x: auto;
}
.arch-diagram pre {
  font-family: 'IBM Plex Mono', monospace;
  font-size: 12.5px;
  line-height: 1.55;
  margin: 0;
  padding: 0;
  color: #6a7490;
  white-space: pre;
}
/* Mastery quiz â€” same kcheck but multi-section */
.quiz-section-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.14em;text-transform:uppercase;color:var(--muted);margin:32px 0 12px;padding-bottom:8px;border-bottom:1px solid var(--border)}
.kcheck{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:28px 28px 24px;margin:20px 0 16px}
.kcheck-label{font-family:'IBM Plex Mono',monospace;font-size:9px;letter-spacing:.14em;text-transform:uppercase;color:var(--w3);margin-bottom:14px}
.kcheck-q{font-size:15px;color:#d0d8ec;font-weight:500;margin-bottom:20px;line-height:1.5}
.kcheck-options{display:flex;flex-direction:column;gap:10px}
.kcheck-opt{display:flex;align-items:flex-start;gap:12px;padding:12px 16px;border:1px solid var(--border-hi);border-radius:7px;cursor:pointer;transition:all .15s;font-size:13.5px;color:#8a92a8;background:transparent;width:100%;text-align:left}
.kcheck-opt:hover:not(.disabled){border-color:var(--w3);background:rgba(62,207,207,.05);color:var(--text)}
.kcheck-opt.correct{border-color:var(--accent);background:rgba(62,207,207,.07);color:var(--accent)}
.kcheck-opt.wrong{border-color:var(--danger);background:rgba(240,90,90,.07);color:var(--danger)}
.kcheck-opt.reveal-correct{border-color:rgba(62,207,207,.4);background:rgba(62,207,207,.04);color:#5ab8b8}
.opt-key{font-family:'IBM Plex Mono',monospace;font-size:11px;width:22px;height:22px;border-radius:4px;background:var(--border);display:flex;align-items:center;justify-content:center;flex-shrink:0;color:var(--muted);transition:all .15s;margin-top:1px}
.kcheck-opt.correct .opt-key{background:var(--accent);color:var(--bg)}.kcheck-opt.wrong .opt-key{background:var(--danger);color:#fff}.kcheck-opt.reveal-correct .opt-key{background:rgba(62,207,207,.2);color:var(--w3)}
.kcheck-feedback{margin-top:18px;padding:14px 16px;border-radius:7px;font-size:13.5px;line-height:1.65;display:none}
.kcheck-feedback.show{display:block}.kcheck-feedback.good{background:rgba(62,207,207,.08);border:1px solid rgba(62,207,207,.2);color:#7ecece}.kcheck-feedback.bad{background:rgba(240,90,90,.08);border:1px solid rgba(240,90,90,.2);color:#c47a7a}
/* Portfolio lab */
.lab-steps{display:flex;flex-direction:column;gap:0;margin:24px 0}
.lab-step{display:flex;gap:20px;padding:20px 0;border-bottom:1px solid var(--border)}.lab-step:last-child{border-bottom:none}
.step-num-wrap{display:flex;flex-direction:column;align-items:center;flex-shrink:0}
.step-num{width:32px;height:32px;border-radius:50%;background:var(--pill);border:2px solid var(--border-hi);font-family:'IBM Plex Mono',monospace;font-size:12px;color:var(--muted);display:flex;align-items:center;justify-content:center;position:relative;z-index:1}
.step-connector{width:2px;flex:1;background:var(--border);margin-top:4px}.lab-step:last-child .step-connector{display:none}
.step-content{flex:1;padding-top:4px}
.step-title{font-family:'DM Serif Display',serif;font-size:16px;color:#e4eaf6;margin-bottom:8px}
.step-body{font-size:14px;color:var(--text);line-height:1.7}
.step-body ol{padding-left:20px;display:flex;flex-direction:column;gap:6px;margin:10px 0}.step-body li{color:#a0a8bc}
.step-body code{font-family:'IBM Plex Mono',monospace;font-size:12px;background:var(--pill);padding:1px 6px;border-radius:3px;color:var(--violet)}
.code-block{background:var(--code-bg);border:1px solid var(--border);border-radius:6px;margin:20px 0;overflow:hidden}
.code-header{display:flex;align-items:center;justify-content:space-between;padding:8px 16px;border-bottom:1px solid var(--border);background:rgba(255,255,255,.02)}
.code-lang{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:.06em;color:var(--muted);text-transform:uppercase}
.copy-btn{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);background:transparent;border:1px solid var(--border-hi);border-radius:3px;padding:2px 8px;cursor:pointer;transition:all .15s}
.copy-btn:hover{color:var(--accent);border-color:var(--accent)}
.code-block pre{font-family:'IBM Plex Mono',monospace;font-size:12.5px;line-height:1.8;padding:16px 20px;color:#a8b4cc;overflow-x:auto}
.code-block pre .hl{color:#3ecfcf}.code-block pre .hl2{color:var(--amber)}.code-block pre .str{color:#7ec88c}.code-block pre .comment{color:var(--muted)}.code-block pre .key{color:#f0c84a}
.checklist{display:flex;flex-direction:column;gap:10px;margin:24px 0}
.check-item{display:flex;align-items:flex-start;gap:12px;padding:12px 16px;background:var(--surface);border:1px solid var(--border);border-radius:7px;cursor:pointer;transition:all .2s;user-select:none}
.check-item:hover{border-color:var(--border-hi)}.check-item.checked{border-color:rgba(240,200,74,.3);background:rgba(240,200,74,.05)}
.check-box{width:18px;height:18px;border-radius:4px;border:2px solid var(--border-hi);flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:all .2s;margin-top:1px;font-size:10px;color:transparent}
.check-item.checked .check-box{background:var(--lab);border-color:var(--lab);color:var(--bg)}
.check-text{font-size:13.5px;color:#8a92a8;line-height:1.5}.check-item.checked .check-text{color:var(--muted);text-decoration:line-through;text-decoration-color:var(--faint)}
.checklist-progress{display:flex;align-items:center;gap:12px;margin-bottom:16px}
.checklist-progress-bar{flex:1;height:3px;background:var(--border);border-radius:2px;overflow:hidden}
.checklist-progress-fill{height:100%;background:var(--lab);border-radius:2px;transition:width .4s ease}
.checklist-progress-label{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);white-space:nowrap}
.lesson-nav-footer{display:flex;justify-content:space-between;align-items:center;margin-top:52px;padding-top:28px;border-top:1px solid var(--border)}
.next-btn{background:var(--accent);color:var(--bg);border:none;border-radius:6px;padding:11px 24px;font-family:'IBM Plex Mono',monospace;font-size:12px;font-weight:600;cursor:pointer;letter-spacing:.04em;transition:opacity .15s;display:flex;align-items:center;gap:8px;text-decoration:none}
.next-btn:hover{opacity:.88}.next-btn.lab-btn{background:var(--lab)}
.prev-btn{background:transparent;color:var(--muted);border:1px solid var(--border-hi);border-radius:6px;padding:11px 20px;font-family:'IBM Plex Mono',monospace;font-size:12px;cursor:pointer;letter-spacing:.04em;transition:all .15s;text-decoration:none;display:inline-flex;align-items:center}
.prev-btn:hover{color:var(--text);border-color:var(--text)}
/* Week complete card */
.completion-card{text-align:center;padding:56px 32px}
.completion-icon{font-size:56px;margin-bottom:20px;display:block}
.completion-card h1{font-family:'DM Serif Display',serif;font-size:32px;color:var(--accent);margin-bottom:12px}
.completion-card p{color:var(--muted);max-width:460px;margin:0 auto 28px;font-size:14px;line-height:1.75}
.score-pill{display:inline-flex;align-items:center;gap:8px;background:rgba(62,207,207,.1);border:1px solid rgba(62,207,207,.25);color:var(--accent);border-radius:40px;padding:8px 20px;font-family:'IBM Plex Mono',monospace;font-size:13px;margin-bottom:8px}
.lab-score-pill{display:inline-flex;align-items:center;gap:8px;background:rgba(240,200,74,.1);border:1px solid rgba(240,200,74,.25);color:var(--lab);border-radius:40px;padding:8px 20px;font-family:'IBM Plex Mono',monospace;font-size:13px;margin-bottom:32px}
.week-badge{display:inline-flex;align-items:center;gap:10px;background:rgba(62,207,207,.06);border:1px solid rgba(62,207,207,.2);border-radius:8px;padding:16px 24px;margin-bottom:28px;font-size:13.5px;color:var(--text);line-height:1.6}
.week-badge-icon{font-size:28px;flex-shrink:0}
::-webkit-scrollbar{width:5px;height:5px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border-hi);border-radius:3px}
@media(max-width:768px){.shell{grid-template-columns:1fr}.sidebar{display:none}.lesson-pane{padding:32px 24px 60px}.lesson-topbar{padding:14px 24px}.recap-grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="shell">
<nav class="sidebar">
  <div class="sidebar-header">
    <div class="day-badge">Week 3 Â· Day 21</div>
    <h2>Week 3 Protection<br>Portfolio</h2>
    <div class="sidebar-meta"><span class="chip">Capstone</span><span class="chip">Portfolio</span><span class="chip">4 sections</span><span class="chip">1 lab</span></div>
  </div>

<div class="sidebar-back">
    <a class="back-index" href="../index.html">
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M7.5 2L3.5 6L7.5 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      Course Index
    </a>
    <div class="week-jumps-label">Jump to week</div>
    <div class="week-jumps">
      <a class="week-jump wj1" href="../index.html#week-1">W1</a>
      <a class="week-jump wj2" href="../index.html#week-2">W2</a>
      <a class="week-jump wj3" href="../index.html#week-3">W3</a>
      <a class="week-jump wj4" href="../index.html#week-4">W4</a>
    </div>
    <div class="day-nav-label">Week 3 days</div>
    <div class="day-nav">
      <a class="day-link " href="day-15.html">D15</a>
      <a class="day-link" href="day-16.html">D16</a>
      <a class="day-link" href="day-17.html">D17</a>
      <a class="day-link" href="day-18.html">D18</a>
      <a class="day-link" href="day-19.html">D19</a>
      <a class="day-link " href="day-20.html">D20</a>
      <a class="day-link current" href="day-21.html">D21</a>
    </div>
  </div>

  <div class="lesson-nav">
    <div class="nav-group-label">Review</div>
    <div class="nav-item active" onclick="goTo(0)"><span class="nav-num">01</span><span class="nav-label">Week 3 Recap: 7 Days of Protection</span><span class="nav-check">âœ“</span></div>
    <div class="nav-item" onclick="goTo(1)"><span class="nav-num">02</span><span class="nav-label">Week 3 Architecture Diagram</span><span class="nav-check">âœ“</span></div>
    <div class="nav-item" onclick="goTo(2)"><span class="nav-num">03</span><span class="nav-label">Mastery Quiz â€” All 7 Days</span><span class="nav-check">âœ“</span></div>
    <div class="nav-item" onclick="goTo(3)"><span class="nav-num">04</span><span class="nav-label">Week 3 Cleanup Checklist</span><span class="nav-check">âœ“</span></div>
    <div class="nav-group-label" style="margin-top:8px">Lab</div>
    <div class="nav-item lab-item" onclick="goTo(4)"><span class="nav-num" style="color:var(--lab)">ğŸ”¬</span><span class="nav-label">Portfolio Lab: GitHub Commit & Executive Summary</span><span class="nav-check">âœ“</span></div>
  </div>
  <div class="sidebar-footer">
    <div class="progress-label"><span>Progress</span><span id="progress-pct">0 / 5</span></div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
  </div>
</nav>
<div class="main">
  <div class="lesson-topbar">
    <div class="lesson-crumb">Day 21 &nbsp;/&nbsp; <span id="topbar-title">Week 3 Recap: 7 Days of Protection</span></div>
    <div class="nav-arrows">
      <button class="arrow-btn" id="btn-prev" onclick="prev()" disabled>â† Prev</button>
      <button class="arrow-btn" id="btn-next" onclick="next()">Next â†’</button>
    </div>
  </div>

  <!-- SECTION 1: RECAP -->
  <div class="lesson-pane active" id="pane-0">
    <div class="lesson-tag tag-review">Week 3 Review</div>
    <h1>Week 3 Recap:<br><em>7 Days of Protection</em></h1>
    <p>Over the past seven days you built a complete network, data, and workload protection stack from scratch â€” each day's control layering on top of the last. Before building your portfolio, take a moment to see the full picture.</p>
    <div class="recap-grid">
      <div class="recap-card">
        <div class="recap-day">Day 15 â€” VPC</div>
        <div class="recap-title">Network Foundation</div>
        <ul class="recap-bullets">
          <li>3-tier VPC: public / app / isolated DB</li>
          <li>Route table isolation as primary control</li>
          <li>SGs (stateful, per-ENI) vs NACLs (stateless, subnet)</li>
          <li>Transit Gateway for multi-VPC selective routing</li>
        </ul>
      </div>
      <div class="recap-card">
        <div class="recap-day">Day 16 â€” KMS + S3</div>
        <div class="recap-title">Data Encryption</div>
        <ul class="recap-bullets">
          <li>SSE-KMS with Customer Managed Key (CMK)</li>
          <li>Key policy: separate admin vs usage roles</li>
          <li>Bucket policy enforcing CMK on every upload</li>
          <li>Automatic key rotation + HTTPS-only access</li>
        </ul>
      </div>
      <div class="recap-card">
        <div class="recap-day">Day 17 â€” Macie</div>
        <div class="recap-title">DLP Operations</div>
        <ul class="recap-bullets">
          <li>PII / PHI / PCI discovery across S3</li>
          <li>Managed + custom data identifiers</li>
          <li>Allow lists to suppress false positives</li>
          <li>EventBridge â†’ Lambda auto-remediation</li>
        </ul>
      </div>
      <div class="recap-card">
        <div class="recap-day">Day 18 â€” Inspector</div>
        <div class="recap-title">Vulnerability Management</div>
        <ul class="recap-bullets">
          <li>Agentless EC2 + ECR enhanced scanning</li>
          <li>CVSS + environmental context prioritisation</li>
          <li>Patch SLAs: Critical 24h / High 72h</li>
          <li>SSM Patch Manager automation</li>
        </ul>
      </div>
      <div class="recap-card">
        <div class="recap-day">Day 19 â€” ECR / ECS</div>
        <div class="recap-title">Container Security</div>
        <ul class="recap-bullets">
          <li>ECR image immutability + enhanced scanning</li>
          <li>ECS Task Role least-privilege (not task exec role)</li>
          <li>Secrets Manager over env var secrets</li>
          <li>Fargate: non-root user + read-only root FS</li>
        </ul>
      </div>
      <div class="recap-card">
        <div class="recap-day">Day 20 â€” Lambda / EKS</div>
        <div class="recap-title">Serverless & K8s Security</div>
        <ul class="recap-bullets">
          <li>Lambda execution role least-privilege</li>
          <li>Secrets Manager at runtime, not env vars</li>
          <li>IRSA: per-pod IAM roles via ServiceAccount</li>
          <li>Pod Security Standards: Restricted namespace</li>
        </ul>
      </div>
    </div>
    <div class="callout week-complete">
      <div class="callout-title">ğŸ›¡ï¸ The Defence-in-Depth Stack You Built</div>
      Every layer depends on the one beneath it: the VPC isolates traffic before SGs filter it. KMS protects data that Macie then classifies. Inspector finds vulnerabilities in the workloads running inside the network. Container security hardens the runtime of those workloads. Together they form a coherent, auditable defence-in-depth stack â€” not a collection of isolated controls.
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" disabled>â† Previous</button><button class="next-btn" onclick="next()">Next â†’</button></div>
  </div>

<!-- SECTION 2: ARCHITECTURE DIAGRAM -->
  <div class="lesson-pane" id="pane-1">
    <div class="lesson-tag tag-security">Architecture</div>
    <h1>Week 3<br><em>Architecture Diagram</em></h1>
    <p>This is the end-state architecture you've built across the week. Use this as the basis for your portfolio diagram â€” recreate it in draw.io, Lucidchart, or as an ASCII art diagram in your README. Every layer here is something you actually built and can prove.</p>
    <div class="arch-diagram"><pre>
<span style="color:var(--muted)">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span style="color:var(--muted)">â”‚  </span><span style="color:var(--w3)">AWS Account</span><span style="color:var(--muted)">  â”‚  Inspector (D18) Â· Macie (D17) Â· Security Hub  â”‚</span>
<span style="color:var(--muted)">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span style="color:var(--muted)">â”‚  </span><span style="color:#f0924a">VPC 10.0.0.0/16</span><span style="color:var(--muted)">  â”€â”€ Transit Gateway (multi-VPC)             â”‚</span>
<span style="color:var(--muted)">â”‚                                                             â”‚</span>
<span style="color:var(--muted)">â”‚  </span><span style="color:#f0924a">Public Subnet .1.0/24</span><span style="color:var(--muted)">  â†’ IGW                             â”‚</span>
<span style="color:var(--muted)">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  NACL: deny bad IPs                      â”‚</span>
<span style="color:var(--muted)">â”‚  â”‚ </span><span style="color:#e4eaf6">ALB  sg-alb</span><span style="color:var(--muted)">  â”‚  443 from 0.0.0.0/0                      â”‚</span>
<span style="color:var(--muted)">â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚</span>
<span style="color:var(--muted)">â”‚         â”‚ 8080                                             â”‚</span>
<span style="color:var(--muted)">â”‚  </span><span style="color:var(--w3)">App Subnet .2.0/24</span><span style="color:var(--muted)">  â†’ NAT GW (outbound only)            â”‚</span>
<span style="color:var(--muted)">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚</span>
<span style="color:var(--muted)">â”‚  â”‚ </span><span style="color:#e4eaf6">ECS/Fargate sg-app</span><span style="color:var(--muted)">   â”‚   â”‚ </span><span style="color:#e4eaf6">Lambda  sg-app</span><span style="color:var(--muted)">   â”‚          â”‚</span>
<span style="color:var(--muted)">â”‚  â”‚ non-root Â· RO FS      â”‚   â”‚ least-priv role  â”‚          â”‚</span>
<span style="color:var(--muted)">â”‚  â”‚ Task Role (IRSA)      â”‚   â”‚ Secrets Mgr ref  â”‚          â”‚</span>
<span style="color:var(--muted)">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚</span>
<span style="color:var(--muted)">â”‚             â”‚ 5432                   â”‚                     â”‚</span>
<span style="color:var(--muted)">â”‚  </span><span style="color:var(--violet)">DB Subnet .3.0/24</span><span style="color:var(--muted)">  â”€â”€ NACL: allow .2.0 only â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚</span>
<span style="color:var(--muted)">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚</span>
<span style="color:var(--muted)">â”‚  â”‚ </span><span style="color:#e4eaf6">RDS  sg-db</span><span style="color:var(--muted)">   â”‚  Encrypted: KMS CMK (D16)                â”‚</span>
<span style="color:var(--muted)">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚</span>
<span style="color:var(--muted)">â”‚                                                             â”‚</span>
<span style="color:var(--muted)">â”‚  </span><span style="color:var(--w3)">S3 Buckets</span><span style="color:var(--muted)">  SSE-KMS CMK Â· enforce policy Â· Macie scan   â”‚</span>
<span style="color:var(--muted)">â”‚  </span><span style="color:var(--w3)">ECR</span><span style="color:var(--muted)">         Immutable tags Â· Enhanced scanning (D19)      â”‚</span>
<span style="color:var(--muted)">â”‚  </span><span style="color:var(--w3)">Secrets Mgr</span><span style="color:var(--muted)"> Runtime secret fetch Â· auto-rotation          â”‚</span>
<span style="color:var(--muted)">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</pre></div>
    <div class="callout tip">
      <div class="callout-title">âœ“ Portfolio Diagram Tip</div>
      For your GitHub portfolio, export this architecture as a proper diagram using <strong>draw.io</strong> (free, no account required at app.diagrams.net). Use colour-coding that matches the Week 3 teal theme. Add annotations for each control layer. Label every security boundary â€” reviewers and interviewers want to see that you understand why each layer exists, not just that it exists.
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">â† Previous</button><button class="next-btn" onclick="next()">Next â†’</button></div>
  </div>

  <!-- SECTION 3: MASTERY QUIZ -->
  <div class="lesson-pane" id="pane-2">
    <div class="lesson-tag tag-review">Mastery Assessment</div>
    <h1>Week 3<br><em>Mastery Quiz</em></h1>
    <p>Six questions â€” one cross-cutting scenario per major topic from the week. These are designed to test whether you can apply concepts across days, not just recall individual facts.</p>

    <div class="quiz-section-label">Network + Data â€” Days 15 & 16</div>

    <div class="kcheck">
      <div class="kcheck-label">Mastery Question 1</div>
      <div class="kcheck-q">An attacker compromises your app-tier EC2 instance via a web vulnerability. They find AWS credentials in the instance metadata. The credentials belong to the app's IAM role, which has <code>s3:GetObject</code> on your PCI data bucket, encrypted with your CMK. What stops them from exfiltrating the data?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">A</span>The VPC NACL on the DB subnet â€” it blocks all outbound traffic from the app tier</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">B</span>The S3 bucket policy â€” it denies requests without the CMK encryption header</button>
        <button class="kcheck-opt" onclick="check(this,true,0)"><span class="opt-key">C</span>Nothing â€” the IAM role already has s3:GetObject and kms:Decrypt (needed to read), so S3 will decrypt and serve the objects. The real defence should have been least-privilege IAM removing kms:Decrypt from the app role if it only needs to write</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">D</span>The CMK key policy â€” it only allows the SecurityOps role to decrypt, not the app role</button>
      </div>
      <div class="kcheck-feedback" id="fb-0"></div>
    </div>

    <div class="quiz-section-label">DLP + Vulnerability â€” Days 17 & 18</div>

    <div class="kcheck">
      <div class="kcheck-label">Mastery Question 2</div>
      <div class="kcheck-q">Macie finds a HIGH severity finding: a CSV with 5,000 SSNs in an S3 bucket tagged "dev-scratch". Inspector simultaneously flags a Critical CVE (CVSS 9.1, public exploit, fix available) on an EC2 in your isolated DB subnet with no internet route. Which do you act on first?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">A</span>Inspector finding first â€” Critical CVE always outranks a Macie HIGH finding by severity rules</button>
        <button class="kcheck-opt" onclick="check(this,true,1)"><span class="opt-key">B</span>Macie finding first â€” 5,000 real SSNs in a dev bucket is an active data exposure risk with no network barrier. The CVE, despite its score, requires local access to an isolated instance with no public exploit path from the internet</button>
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">C</span>Both simultaneously â€” they are equally urgent and must be triaged in parallel</button>
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">D</span>Neither immediately â€” escalate both to the CISO for prioritisation before taking action</button>
      </div>
      <div class="kcheck-feedback" id="fb-1"></div>
    </div>

    <div class="quiz-section-label">Containers + Serverless â€” Days 19 & 20</div>

    <div class="kcheck">
      <div class="kcheck-label">Mastery Question 3</div>
      <div class="kcheck-q">A Fargate task and a Lambda function both need to read from the same DynamoDB table. A developer proposes creating one shared IAM role for both to reduce management overhead. What's the security problem?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,true,0)"><span class="opt-key">A</span>A compromise of either workload gives the attacker the other workload's permissions too. Separate roles enforce blast-radius containment â€” a compromised Lambda can't impersonate the ECS task, and vice versa</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">B</span>IAM roles cannot be shared between Lambda and ECS â€” each service requires a service-linked role</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">C</span>Shared roles cause throttling â€” IAM has per-role API call limits that would affect both services</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">D</span>There is no security problem â€” sharing a read-only DynamoDB role between two services is fine practice</button>
      </div>
      <div class="kcheck-feedback" id="fb-2"></div>
    </div>

    <div class="quiz-section-label">Cross-Week Integration â€” All Days</div>

    <div class="kcheck">
      <div class="kcheck-label">Mastery Question 4</div>
      <div class="kcheck-q">A security audit asks: "How do you prove that no unencrypted PII left your S3 environment in the last 30 days?" Which combination of Week 3 controls provides the evidence chain?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">A</span>VPC flow logs showing no S3 traffic left the VPC boundary</button>
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">B</span>Inspector scan showing no CVEs on the instances accessing S3</button>
        <button class="kcheck-opt" onclick="check(this,true,3)"><span class="opt-key">C</span>KMS CloudTrail showing every decrypt used your CMK (Day 16) + Macie scheduled scan report showing no unclassified PII findings (Day 17) + S3 bucket policy deny logs showing zero unencrypted upload attempts succeeded (Day 16)</button>
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">D</span>GuardDuty findings showing no S3 data exfiltration events in the period</button>
      </div>
      <div class="kcheck-feedback" id="fb-3"></div>
    </div>

    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">â† Previous</button><button class="next-btn" onclick="next()">Next â†’</button></div>
  </div>

  <!-- SECTION 4: CLEANUP -->
  <div class="lesson-pane" id="pane-3">
    <div class="lesson-tag tag-ops">Week 3 Cleanup</div>
    <h1>Week 3<br><em>Cleanup Checklist</em></h1>
    <p>Before building your portfolio, verify every billable resource from the week is deleted. Missing one NAT Gateway or running EC2 instance can cost $30â€“50 over a month without you noticing.</p>
    <div class="code-block">
      <div class="code-header"><span class="code-lang">bash â€” Week 3 cost verification</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
      <pre><span class="comment"># Check for any running EC2 instances (should be 0)</span>
aws ec2 describe-instances \
  --filters <span class="str">"Name=instance-state-name,Values=running"</span> \
  --query <span class="str">"Reservations[*].Instances[*].{ID:InstanceId,Type:InstanceType}"</span>

<span class="comment"># Check for NAT Gateways (each costs ~$1/day)</span>
aws ec2 describe-nat-gateways \
  --filter <span class="str">"Name=state,Values=available"</span> \
  --query <span class="str">"NatGateways[*].{ID:NatGatewayId,State:State}"</span>

<span class="comment"># Check for active KMS CMKs (each costs $1/month)</span>
aws kms list-keys --query <span class="str">"Keys[*].KeyId"</span>

<span class="comment"># Check Macie status (per-bucket charge if still enabled)</span>
aws macie2 get-macie-session --query <span class="str">"status"</span>

<span class="comment"># Check Inspector status (per instance-hour charge)</span>
aws inspector2 get-configuration</pre>
    </div>
    <div class="callout warning">
      <div class="callout-title">âš  Keep These â€” They're Free</div>
      The following resources are free and should be <strong>kept</strong> for your portfolio: VPC, Subnets, Route Tables, Internet Gateway, Security Groups, NACLs, S3 buckets (no objects = no charge), ECR repositories (empty), IAM roles and policies. Only delete resources that generate hourly or per-GB charges.
    </div>
    <p>Resources to <strong>delete</strong> if still running:</p>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:16px 0 24px">
      <div style="border:1px solid rgba(240,90,90,.3);border-radius:7px;padding:14px;background:rgba(240,90,90,.04)">
        <div style="font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--danger);letter-spacing:.08em;margin-bottom:8px">DELETE â€” BILLABLE</div>
        <div style="font-size:13px;color:#8a92a8;line-height:1.8">
          NAT Gateway (~$1/day)<br>
          EC2 instances (~$0.01/hr)<br>
          KMS CMK ($1/month)<br>
          Macie (per-bucket/GB)<br>
          Inspector (per instance-hr)<br>
          Secrets Manager ($0.40/mo)
        </div>
      </div>
      <div style="border:1px solid rgba(62,207,207,.3);border-radius:7px;padding:14px;background:rgba(62,207,207,.04)">
        <div style="font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--w3);letter-spacing:.08em;margin-bottom:8px">KEEP â€” FREE TIER</div>
        <div style="font-size:13px;color:#8a92a8;line-height:1.8">
          VPC + Subnets + RT<br>
          Security Groups + NACLs<br>
          Internet Gateway<br>
          S3 buckets (empty)<br>
          ECR repos (empty)<br>
          IAM roles + policies
        </div>
      </div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">â† Previous</button><button class="next-btn lab-btn" onclick="next()">Start Lab â†’</button></div>
  </div>

  <!-- LAB: PORTFOLIO -->
  <div class="lesson-pane lab-pane" id="pane-4">
    <div class="lesson-tag tag-lab">ğŸ”¬ Portfolio Lab</div>
    <h1>GitHub Commit &<br><em>Executive Summary</em></h1>
    <p>Assemble your complete Week 3 portfolio â€” architecture diagram, all seven day artefacts, and a one-page executive summary that a CISO could read in five minutes and understand what you built, why, and what it protects against.</p>
    <div class="callout lab-note"><div class="callout-title">âš¡ This is your Week 3 proof of work</div>Everything you submit here becomes evidence for job applications and certifications. Write the executive summary as if presenting to a security-aware hiring manager who wants to see both technical depth and business understanding.</div>
    <div class="lab-steps">
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">1</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Organise the Portfolio Structure <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~10 min</span></div>
          <div class="step-body">
            <div class="code-block">
              <div class="code-header"><span class="code-lang">bash â€” create the Week 3 portfolio structure</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
              <pre>mkdir -p portfolio/week3/{diagrams,labs,reports,screenshots}

<span class="comment"># Move all Day 15â€“21 artefacts into place</span>
mv screenshots/day-1{5,6,7,8,9}*.png  portfolio/week3/screenshots/
mv screenshots/day-2{0,1}*.png        portfolio/week3/screenshots/
mv portfolio/week3/day1*.md           portfolio/week3/reports/

<span class="comment"># Verify structure</span>
find portfolio/week3 -type f | sort</pre>
            </div>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">2</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Create the Architecture Diagram <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~20 min</span></div>
          <div class="step-body">
            <ol>
              <li>Open <strong>app.diagrams.net</strong> (free, no login)</li>
              <li>Recreate the architecture from Section 2 using AWS shape library</li>
              <li>Use teal (#3ecfcf) for security control annotations</li>
              <li>Label each boundary with: the control type, the Day it was built, and what it prevents</li>
              <li>Export as <strong>PNG</strong> (2x resolution) â†’ save to <code>portfolio/week3/diagrams/week3-architecture.png</code></li>
            </ol>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">3</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Write the Executive Summary <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~20 min</span></div>
          <div class="step-body">
            <p style="margin-bottom:10px">Create <code>portfolio/week3/WEEK3-EXECUTIVE-SUMMARY.md</code> using this structure:</p>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">markdown â€” Executive summary template</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
              <pre><span class="hl"># Week 3: Network, Data & Workload Protection</span>
<span class="comment">## Executive Summary</span>

<span class="str">**Objective:**</span> Build a defence-in-depth protection stack covering
network segmentation, data encryption, DLP, vulnerability management,
and workload runtime security on AWS.

<span class="str">**Duration:**</span> 7 days (Days 15â€“21) | <span class="str">**Cost:**</span> $0 (AWS Free Tier)

<span class="comment">## Controls Implemented</span>

| Day | Control | Threat Mitigated | Evidence |
|-----|---------|-----------------|----------|
| 15 | 3-tier VPC, SGs, NACLs | Lateral movement | VPC resource map |
| 16 | CMK encryption + enforcement | Data exfiltration | CloudTrail KMS |
| 17 | Macie PII discovery | Accidental exposure | Findings report |
| 18 | Inspector CVE scanning | Known exploits | CVE assessment |
| 19 | ECR scanning + Fargate hardening | Container supply chain | Image scan |
| 20 | Lambda least-priv + IRSA | Credential abuse | Role policy |

<span class="comment">## Key Decisions</span>
- CMK over SSE-S3: audit trail of every decrypt via CloudTrail
- NACLs supplement SGs: explicit deny for incident response
- Macie scheduled scans: catch accidental PII uploads within hours
- IRSA over node roles: per-workload blast-radius containment

<span class="comment">## Architecture</span>
![Week 3 Architecture](diagrams/week3-architecture.png)

<span class="comment">## Compliance Mapping</span>
- PCI DSS 3.4: CMK encryption on all cardholder data storage
- GDPR Art. 32: Macie continuous PII classification
- NIST 800-40: Inspector patch SLA enforcement</pre>
            </div>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">4</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Update the Repository README <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~10 min</span></div>
          <div class="step-body">
            <p>Add a Week 3 section to your root <code>README.md</code> with a progress badge and link to the executive summary. Hiring managers read READMEs first.</p>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">markdown â€” add to root README.md</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
              <pre><span class="comment">## Week 3: Network, Data & Workload Protection âœ…</span>

<span class="str">**Status:**</span> Complete | <span class="str">**Days:**</span> 15â€“21 | <span class="str">**Cost:**</span> $0

Controls: VPC segmentation Â· KMS CMK encryption Â· Macie DLP Â·
Inspector CVE scanning Â· Container security Â· Serverless IAM

â†’ [Executive Summary](portfolio/week3/WEEK3-EXECUTIVE-SUMMARY.md)
â†’ [Architecture Diagram](portfolio/week3/diagrams/week3-architecture.png)</pre>
            </div>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">5</div></div>
        <div class="step-content">
          <div class="step-title">Final Commit & Push <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~5 min</span></div>
          <div class="step-body">
            <div class="code-block">
              <div class="code-header"><span class="code-lang">bash</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
              <pre>git add portfolio/week3/ README.md
git commit -m <span class="str">"Week 3 complete: network, data & workload protection portfolio

- Day 15: 3-tier VPC, SGs, NACLs, Transit Gateway pattern
- Day 16: CMK encryption, key policy, bucket enforcement
- Day 17: Macie PII discovery, findings report
- Day 18: Inspector EC2 scan, CVE assessment with SLAs
- Day 19: ECR scanning, Fargate hardening, Task IAM
- Day 20: Lambda least-priv, IRSA, Pod Security Standards
- Day 21: Architecture diagram, executive summary, cleanup"</span>
git push
git log --oneline -7  <span class="comment"># verify all 7 days visible in history</span></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <h2 style="font-family:'DM Serif Display',serif;font-size:20px;color:#e4eaf6;margin:32px 0 16px;font-weight:400">Portfolio Checklist</h2>
    <div class="checklist-progress"><div class="checklist-progress-bar"><div class="checklist-progress-fill" id="cl-fill"></div></div><span class="checklist-progress-label" id="cl-label">0 / 9</span></div>
    <div class="checklist">
      <div class="check-item" onclick="toggleCheck(this,0)"><div class="check-box">âœ“</div><div class="check-text">All Day 15â€“21 screenshots organised in <code>portfolio/week3/screenshots/</code></div></div>
      <div class="check-item" onclick="toggleCheck(this,1)"><div class="check-box">âœ“</div><div class="check-text">Architecture diagram created in draw.io and exported to <code>portfolio/week3/diagrams/week3-architecture.png</code></div></div>
      <div class="check-item" onclick="toggleCheck(this,2)"><div class="check-box">âœ“</div><div class="check-text">Day 17 Macie findings report in <code>portfolio/week3/reports/</code></div></div>
      <div class="check-item" onclick="toggleCheck(this,3)"><div class="check-box">âœ“</div><div class="check-text">Day 18 CVE assessment report with prioritised findings table in <code>portfolio/week3/reports/</code></div></div>
      <div class="check-item" onclick="toggleCheck(this,4)"><div class="check-box">âœ“</div><div class="check-text">Day 20 runtime security checklist (Lambda + EKS) in <code>portfolio/week3/reports/</code></div></div>
      <div class="check-item" onclick="toggleCheck(this,5)"><div class="check-box">âœ“</div><div class="check-text">Executive summary <code>WEEK3-EXECUTIVE-SUMMARY.md</code> complete with controls table and compliance mapping</div></div>
      <div class="check-item" onclick="toggleCheck(this,6)"><div class="check-box">âœ“</div><div class="check-text">Root <code>README.md</code> updated with Week 3 progress badge and links</div></div>
      <div class="check-item" onclick="toggleCheck(this,7)"><div class="check-box">âœ“</div><div class="check-text">Week 3 cleanup complete â€” no billable resources running (verified via CLI commands)</div></div>
      <div class="check-item" onclick="toggleCheck(this,8)"><div class="check-box">âœ“</div><div class="check-text">Final commit pushed â€” <code>git log --oneline -7</code> shows all 7 days in history</div></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">â† Previous</button><button class="next-btn lab-btn" onclick="finish()">Complete Week 3 âœ“</button></div>
  </div>

<div class="lesson-pane" id="pane-complete">
    <div class="completion-card">
      <span class="completion-icon">ğŸ†</span>
      <h1>Week 3 Complete</h1>
      <div class="week-badge">
        <span class="week-badge-icon">ğŸ›¡ï¸</span>
        <div>
          <strong style="color:#e4eaf6;display:block;margin-bottom:4px">Network, Data & Workload Protection</strong>
          VPC segmentation Â· KMS CMK Â· Macie DLP Â· Inspector CVE scanning Â· Container security Â· Serverless IAM hardening Â· EKS Pod Security Standards
        </div>
      </div>
      <p>You've completed the most technically dense week of the programme. Every control you built this week is something real security engineers use in production â€” and you have the screenshots, reports, and architecture diagram to prove it.</p>
      <div class="score-pill"><span>âš¡</span> Mastery Quiz: <span id="score-val">â€”</span></div><br>
      <div class="lab-score-pill"><span>ğŸ”¬</span> Portfolio: <span id="lab-score-val">â€”</span> / 9 complete</div>
      <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
        <a href="index.html" style="text-decoration:none"><button class="prev-btn">â† Course Index</button></a>
        <a href="day-22.html" style="text-decoration:none"><button class="next-btn">Week 4: Detection & Operations â†’</button></a>
      </div>
    </div>
  </div>
<script>
const STORAGE_KEY='csm-day21';const TOTAL=5;
const titles=['Week 3 Recap: 7 Days of Protection','Week 3 Architecture Diagram','Mastery Quiz â€” All 7 Days','Week 3 Cleanup Checklist','Portfolio Lab: GitHub Commit & Executive Summary'];
const fb={
  0:{good:"Correct â€” and this is the most important insight of Week 3. Encryption at rest does not add a second authentication factor for API calls. If the app's IAM role legitimately needs to read PII for its function, and the key policy allows it, then anyone who steals those credentials can read PII too. The real fix is least-privilege: if the app only writes data (never reads it back), it should have kms:GenerateDataKey but not kms:Decrypt. Encryption protects against storage-layer theft, not credential theft.",bad:"Not quite. The app tier's IAM role is what S3 and KMS evaluate. The DB subnet NACL controls database traffic, not S3. The bucket policy enforce condition checks the encryption header on uploads â€” it doesn't restrict reads. If the key policy allows the app role to decrypt (which it must, or the app couldn't read its own data), the attacker with those credentials can decrypt too. The only fix for credential theft is: (1) prevent theft (IMDSv2, JIT credentials), (2) detect it (GuardDuty), and (3) limit what stolen credentials can access (least-privilege, no kms:Decrypt if not needed)."},
  1:{good:"Correct. Severity scores don't exist in isolation â€” exposure context determines real-world risk. 5,000 SSNs in a dev bucket is an immediate regulatory and reputational exposure: GDPR/CCPA notification obligations may be triggered, and the data is accessible to anyone with dev bucket access right now. The CVE, despite a higher CVSS, is on an instance in an isolated subnet with no internet route â€” exploitation requires local access that an external attacker doesn't have. Contextual risk beats raw severity scores every time.",bad:"Not quite. Inspector's CVSS 9.1 score measures theoretical maximum impact, not your actual risk. The instance is in an isolated DB subnet with no internet route â€” exploitation requires local access. The Macie finding is different: 5,000 SSNs in a dev scratch bucket is an active, accessible exposure right now, with potential regulatory notification obligations. Contextual factors (network exposure, accessibility, regulatory impact) must override raw severity scores in prioritisation."},
  2:{good:"Correct. Shared IAM roles undermine blast-radius containment. If both the Lambda and the ECS task share one role, a compromise of either workload grants an attacker that role's full permissions â€” and potentially the ability to impersonate the other service's identity. Separate roles enforce the principle that a compromise of service A cannot directly affect service B's permissions or data access. The overhead of an extra IAM role is minutes; the security benefit is permanent.",bad:"Not quite. IAM roles can technically be shared between Lambda and ECS (via trust policy allowing both services). The security problem is blast radius: a shared role means compromising either service gives an attacker both workloads' permissions. If the Lambda has a code injection vulnerability and the shared role has DynamoDB write access, the attacker can now corrupt data â€” even if the ECS task is the only one that should write. Separate roles for separate workloads is non-negotiable."},
  3:{good:"Correct. This is a three-source evidence chain: (1) KMS CloudTrail gives you a complete log of every decrypt operation â€” who called it, when, using which key. If every object was encrypted with your CMK and every decrypt is logged, you know all data access. (2) Macie's scheduled scan report shows whether new PII objects appeared in buckets that shouldn't have it. (3) The S3 server access log + bucket policy deny events show that unencrypted upload attempts failed. Together they prove: all PII was encrypted, all access was logged, and no unencrypted PII existed.",bad:"Not quite. VPC flow logs show IP-level traffic metadata but don't tell you whether objects were encrypted. GuardDuty detects known attack patterns but a legitimate API call to GetObject won't generate a finding even if it exfiltrates data. Inspector shows OS/package vulnerabilities, not data access patterns. The correct evidence chain is: KMS CloudTrail (all decrypts logged) + Macie scan reports (no unclassified PII) + S3 bucket policy deny logs (no unencrypted uploads succeeded). These three together answer the auditor's question."}
};
let state=loadState();
function loadState(){try{const s=localStorage.getItem(STORAGE_KEY);if(s)return JSON.parse(s);}catch(e){}return{current:0,done:[],correct:[],answered:[],checks:[]};}
function saveState(){try{localStorage.setItem(STORAGE_KEY,JSON.stringify(state));}catch(e){}}
function goTo(n){document.querySelectorAll('.lesson-pane').forEach(p=>p.classList.remove('active'));document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('active'));state.current=n;document.getElementById('pane-'+(n===TOTAL?'complete':n)).classList.add('active');const items=document.querySelectorAll('.nav-item');if(items[n])items[n].classList.add('active');document.getElementById('topbar-title').textContent=titles[n]||'Complete';document.getElementById('btn-prev').disabled=(n===0);document.getElementById('btn-next').disabled=(n>=TOTAL-1);window.scrollTo(0,0);saveState();updateProgress();}
function next(){if(state.current<TOTAL-1)goTo(state.current+1);}function prev(){if(state.current>0)goTo(state.current-1);}
function finish(){markDone(state.current);document.querySelectorAll('.lesson-pane').forEach(p=>p.classList.remove('active'));document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('active'));const pct=Math.round(state.correct.length/4*100);document.getElementById('score-val').textContent=state.correct.length+' / 4 ('+pct+'%)';const checked=state.checks.filter(Boolean).length;document.getElementById('lab-score-val').textContent=checked;document.getElementById('pane-complete').classList.add('active');document.getElementById('btn-prev').disabled=true;document.getElementById('btn-next').disabled=true;saveState();}
function markDone(n){if(!state.done.includes(n))state.done.push(n);const items=document.querySelectorAll('.nav-item');if(items[n])items[n].classList.add('done');updateProgress();}
function updateProgress(){const c=state.done.length;document.getElementById('progress-pct').textContent=c+' / '+TOTAL;document.getElementById('progress-fill').style.width=(c/TOTAL*100)+'%';}
function check(btn,isCorrect,idx){if(state.answered.includes(idx))return;state.answered.push(idx);const opts=btn.closest('.kcheck-options').querySelectorAll('.kcheck-opt');opts.forEach(o=>{o.classList.add('disabled');o.style.pointerEvents='none';});const fbEl=document.getElementById('fb-'+idx);if(isCorrect){btn.classList.add('correct');fbEl.className='kcheck-feedback show good';fbEl.textContent='âœ“ '+fb[idx].good;if(!state.correct.includes(idx))state.correct.push(idx);}else{btn.classList.add('wrong');fbEl.className='kcheck-feedback show bad';fbEl.textContent='âœ— '+fb[idx].bad;opts.forEach(o=>{if(o.getAttribute('onclick')&&o.getAttribute('onclick').includes('true'))o.classList.add('reveal-correct');});}markDone(idx);saveState();}
function toggleCheck(el,idx){if(!state.checks[idx])state.checks[idx]=false;state.checks[idx]=!state.checks[idx];el.classList.toggle('checked',state.checks[idx]);updateChecklist();saveState();}
function updateChecklist(){const total=9,checked=state.checks.filter(Boolean).length;document.getElementById('cl-fill').style.width=(checked/total*100)+'%';document.getElementById('cl-label').textContent=checked+' / '+total;if(checked===total&&!state.done.includes(4))markDone(4);}
function copyCode(btn){const pre=btn.closest('.code-block').querySelector('pre');navigator.clipboard.writeText(pre.innerText).then(()=>{btn.textContent='copied!';setTimeout(()=>btn.textContent='copy',1500);});}
function restoreState(){state.done.forEach(n=>{const items=document.querySelectorAll('.nav-item');if(items[n])items[n].classList.add('done');});state.answered.forEach(idx=>{const opts=document.querySelectorAll('#pane-'+idx+' .kcheck-opt');if(!opts.length)return;opts.forEach(o=>{o.classList.add('disabled');o.style.pointerEvents='none';});const fbEl=document.getElementById('fb-'+idx);if(state.correct.includes(idx)){const co=Array.from(opts).find(o=>o.getAttribute('onclick')&&o.getAttribute('onclick').includes('true'));if(co)co.classList.add('correct');if(fbEl){fbEl.className='kcheck-feedback show good';fbEl.textContent='âœ“ '+fb[idx].good;}}else{opts.forEach(o=>{if(o.getAttribute('onclick')&&o.getAttribute('onclick').includes('true'))o.classList.add('reveal-correct');});if(fbEl){fbEl.className='kcheck-feedback show bad';fbEl.textContent='âœ— '+fb[idx].bad;}}});state.checks.forEach((v,i)=>{if(v){const items=document.querySelectorAll('.check-item');if(items[i])items[i].classList.add('checked');}});updateChecklist();updateProgress();goTo(state.current||0);}
restoreState();
</script>
</body>
</html>
