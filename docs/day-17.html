<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Day 17 ‚Äî Macie DLP Operations</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="shared.css">
</head>
<body>
<div class="shell">
<nav class="sidebar">
  <div class="sidebar-header">
    <div class="day-badge">Week 3 ¬∑ Day 17</div>
    <h2>Macie DLP<br>Operations</h2>
    <div class="sidebar-meta"><span class="chip">Macie</span><span class="chip">DLP</span><span class="chip">PII</span><span class="chip">4 lessons</span><span class="chip">1 lab</span></div>
  </div>
  <div class="sidebar-back">
    <a class="back-index" href="../index.html">
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M7.5 2L3.5 6L7.5 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      Course Index
    </a>
    <div class="week-jumps-label">Jump to week</div>
    <div class="week-jumps">
      <a class="week-jump wj1" href="../index.html#week-1">W1</a>
      <a class="week-jump wj2" href="../index.html#week-2">W2</a>
      <a class="week-jump wj3" href="../index.html#week-3">W3</a>
      <a class="week-jump wj4" href="../index.html#week-4">W4</a>
    </div>
    <div class="day-nav-label">Week 3 days</div>
    <div class="day-nav">
      <a class="day-link" href="day-15.html">D15</a>
      <a class="day-link" href="day-16.html">D16</a>
      <a class="day-link current" href="day-17.html">D17</a>
      <a class="day-link" href="day-18.html">D18</a>
      <a class="day-link" href="day-19.html">D19</a>
      <a class="day-link" href="day-20.html">D20</a>
      <a class="day-link" href="day-21.html">D21</a>
    </div>
  </div>

  <div class="lesson-nav">
    <div class="nav-group-label">Lessons</div>
    <div class="nav-item active" onclick="goTo(0)"><span class="nav-num">01</span><span class="nav-label">What Is DLP and Why It Matters</span><span class="nav-check">‚úì</span></div>
    <div class="nav-item" onclick="goTo(1)"><span class="nav-num">02</span><span class="nav-label">How Macie Detects PII</span><span class="nav-check">‚úì</span></div>
    <div class="nav-item" onclick="goTo(2)"><span class="nav-num">03</span><span class="nav-label">Managing False Positives</span><span class="nav-check">‚úì</span></div>
    <div class="nav-item" onclick="goTo(3)"><span class="nav-num">04</span><span class="nav-label">Automated Remediation with EventBridge</span><span class="nav-check">‚úì</span></div>
    <div class="nav-group-label" style="margin-top:8px">Lab</div>
    <div class="nav-item lab-item" onclick="goTo(4)"><span class="nav-num" style="color:var(--lab)">üî¨</span><span class="nav-label">Hands-on: PII Discovery Job & Findings Report</span><span class="nav-check">‚úì</span></div>
  </div>
  <div class="sidebar-footer">
    <div class="progress-label"><span>Progress</span><span id="progress-pct">0 / 5</span></div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
  </div>
</nav>
<div class="main">
  <div class="lesson-topbar">
    <div class="lesson-crumb">Day 17 &nbsp;/&nbsp; <span id="topbar-title">What Is DLP and Why It Matters</span></div>
    <div class="nav-arrows">
      <button class="arrow-btn" id="btn-prev" onclick="prev()" disabled>‚Üê Prev</button>
      <button class="arrow-btn" id="btn-next" onclick="next()">Next ‚Üí</button>
    </div>
  </div>

  <!-- LESSON 1 -->
  <div class="lesson-pane active" id="pane-0">
    <div class="lesson-tag tag-security">Data Loss Prevention ¬∑ Foundational</div>
    <h1>What Is DLP and<br><em>Why It Matters</em></h1>
    <p>Day 16 taught you to encrypt data at rest. But encryption protects against raw storage theft ‚Äî it doesn't tell you <strong>what sensitive data you already have, where it lives, or whether it should be there at all</strong>. That's the job of Data Loss Prevention (DLP).</p>
    <p>DLP answers the most important question in data security: <strong>"Do I have sensitive data I don't know about?"</strong> In practice, developers upload CSVs with test data that contains real SSNs, ETL jobs drop unmasked PII into staging buckets, and third-party integrations land customer records in unexpected locations. Without automated scanning, you won't find it until a breach does.</p>
    <div class="callout breach">
      <div class="callout-title">‚ö† Real Breach ‚Äî Uber (2016)</div>
      Attackers found GitHub repositories containing AWS credentials. Once inside S3, they discovered a backup bucket containing the names, email addresses, and phone numbers of 57 million users ‚Äî stored as a plain CSV. The data was there for months before discovery. A scheduled Macie scan would have flagged the PII-containing file within hours of upload. Uber paid $148M in settlements.
    </div>
    <p>The data protection lifecycle has four stages ‚Äî most teams only implement the first two:</p>
    <div class="flow-steps">
      <div class="flow-step"><div class="flow-num">1</div><div class="flow-body"><strong>Classify</strong> ‚Äî identify what sensitive data exists and where. Macie automates this for S3 using ML + managed data identifiers.</div></div>
      <div class="flow-step"><div class="flow-num">2</div><div class="flow-body"><strong>Encrypt</strong> ‚Äî protect classified data at rest (Day 16 KMS) and in transit (TLS).</div></div>
      <div class="flow-step"><div class="flow-num">3</div><div class="flow-body"><strong>Control Access</strong> ‚Äî IAM least-privilege, bucket policies, and KMS key policies limit who can reach the data.</div></div>
      <div class="flow-step"><div class="flow-num">4</div><div class="flow-body"><strong>Monitor</strong> ‚Äî ongoing scanning detects new sensitive data as it lands and alerts on policy violations.</div></div>
    </div>
    <div class="callout insight">
      <div class="callout-title">üí° Business Context ‚Äî $4.88M Average Breach Cost</div>
      The IBM Cost of a Data Breach Report 2025 puts the average breach cost at $4.88M. For breaches involving PII, regulatory fines alone (GDPR Art. 83: up to 4% of global annual turnover) can dwarf the remediation cost. Macie at $1.00/GB scanned is among the cheapest lines of defence available.
    </div>
    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">Your S3 bucket contains only "internal analytics data." You've enabled CMK encryption and applied a strict bucket policy. A developer asks why you still need Macie. What's the best answer?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">A</span>You don't ‚Äî encryption and bucket policies are sufficient controls for any data type</button>
        <button class="kcheck-opt" onclick="check(this,true,0)"><span class="opt-key">B</span>Encryption protects data from raw access, but it doesn't tell you whether PII has been accidentally dropped into the "analytics" bucket ‚Äî Macie finds that automatically</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">C</span>Macie is only needed for buckets that are already known to contain PII</button>
        <button class="kcheck-opt" onclick="check(this,false,0)"><span class="opt-key">D</span>Macie is required only for HIPAA workloads ‚Äî it's optional for general analytics data</button>
      </div>
      <div class="kcheck-feedback" id="fb-0"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" disabled>‚Üê Previous</button><button class="next-btn" onclick="next()">Next Lesson ‚Üí</button></div>
  </div>

  <!-- LESSON 2 -->
  <div class="lesson-pane" id="pane-1">
    <div class="lesson-tag tag-concept">Macie Architecture ¬∑ Foundational</div>
    <h1>How Macie<br><em>Detects PII</em></h1>
    <p><strong>Objective:</strong> Understand Macie's detection architecture ‚Äî managed data identifiers, custom regex identifiers, sensitivity scoring, and the difference between one-time and scheduled discovery jobs.</p>
    <p>Amazon Macie uses two layers of detection working in parallel:</p>
    <table class="styled-table">
      <thead><tr><th>Layer</th><th>What it is</th><th>Examples</th><th>Tunable?</th></tr></thead>
      <tbody>
        <tr><td>Managed IDs</td><td>AWS-built ML models for regulated data types</td><td>SSN, credit card, passport, IBAN, HIPAA PHI</td><td>Enable/disable per job</td></tr>
        <tr><td>Custom IDs</td><td>Your own regex + keyword patterns</td><td>Internal employee IDs, policy numbers, VIN</td><td>Fully custom</td></tr>
      </tbody>
    </table>
    <p>Macie scans S3 object content ‚Äî not just metadata. It reads CSVs, JSON, Parquet, text, Excel, and more, looking for data identifier patterns within each file.</p>
    <div class="pii-grid">
      <div class="pii-card">
        <div class="pii-card-label">Financial PCI</div>
        <div class="pii-card-examples">
          Credit card numbers<br>
          Bank account numbers<br>
          IBAN / routing numbers<br>
          <code>CVV</code> values
        </div>
      </div>
      <div class="pii-card">
        <div class="pii-card-label">Identity PII</div>
        <div class="pii-card-examples">
          Social Security Numbers<br>
          Passport numbers<br>
          Driver's licence IDs<br>
          Date of birth patterns
        </div>
      </div>
      <div class="pii-card">
        <div class="pii-card-label">HIPAA PHI</div>
        <div class="pii-card-examples">
          Medical record numbers<br>
          Health insurance IDs<br>
          Diagnosis codes<br>
          Drug prescription data
        </div>
      </div>
    </div>
    <div class="callout tip">
      <div class="callout-title">‚úì One-Time vs. Scheduled Jobs</div>
      Use a <strong>one-time job</strong> for an initial baseline scan of all existing objects. Then set up a <strong>scheduled daily or weekly job</strong> to catch new objects as they land. Scheduled jobs only scan objects added or modified since the last run ‚Äî significantly cheaper than re-scanning everything each time.
    </div>
    <div class="callout insight">
      <div class="callout-title">üí° Sensitivity Score</div>
      Macie assigns each S3 bucket a sensitivity score from 1‚Äì100 based on the types and volume of sensitive data found. A bucket with 10,000 SSNs scores higher than one with 3 email addresses. Use the score to prioritise remediation ‚Äî tackle score-90 buckets before score-20 ones.
    </div>
    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">You run a Macie job and it returns zero findings on an S3 bucket you believe contains customer SSNs. What's the most likely explanation?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">A</span>Macie confirmed the bucket has no PII ‚Äî your assumption was incorrect</button>
        <button class="kcheck-opt" onclick="check(this,true,1)"><span class="opt-key">B</span>The SSNs may be in an unsupported file format, in encrypted objects Macie can't decrypt, or the managed SSN identifier was not enabled for the job</button>
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">C</span>Macie only scans file metadata ‚Äî it cannot read file contents for SSN patterns</button>
        <button class="kcheck-opt" onclick="check(this,false,1)"><span class="opt-key">D</span>Zero findings always means the bucket is compliant ‚Äî no further action needed</button>
      </div>
      <div class="kcheck-feedback" id="fb-1"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn" onclick="next()">Next Lesson ‚Üí</button></div>
  </div>

  <!-- LESSON 3 -->
  <div class="lesson-pane" id="pane-2">
    <div class="lesson-tag tag-ops">Operational Tuning ¬∑ Intermediate</div>
    <h1>Managing<br><em>False Positives</em></h1>
    <p><strong>Objective:</strong> Understand why Macie has a ~15% false positive rate, learn the three suppression techniques, and know when to use custom data identifiers instead of managed ones.</p>
    <p>Macie's managed identifiers use pattern matching + context ‚Äî but they're intentionally conservative to avoid false negatives (missing real PII). This means a field like <code>test_ssn: 123-45-6789</code> in a synthetic dataset will trigger a finding, even though it's clearly fake. In a busy environment, this noise erodes trust and alert fatigue sets in.</p>
    <table class="styled-table">
      <thead><tr><th>Suppression method</th><th>Use case</th><th>Scope</th></tr></thead>
      <tbody>
        <tr><td>Allow list (regex)</td><td>Known-safe patterns (e.g. internal test SSNs like 000-00-XXXX)</td><td>Account-wide</td></tr>
        <tr><td>Suppression rule</td><td>Suppress findings by bucket, severity, or data type for known-safe locations</td><td>Per-rule filter</td></tr>
        <tr><td>Archive finding</td><td>Manually review and archive individual false positives with a note</td><td>Per finding</td></tr>
      </tbody>
    </table>
    <div class="callout tip">
      <div class="callout-title">‚úì Build an Allow List First</div>
      Before running a production Macie job, create allow lists for your known synthetic data patterns. For example, if your staging pipeline generates fake SSNs in the format <code>000-00-####</code>, add a regex allow list for that pattern. This eliminates entire categories of false positives before they generate noise.
    </div>
    <div class="code-block">
      <div class="code-header"><span class="code-lang">JSON ‚Äî Custom Data Identifier (Internal Employee ID)</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
      <pre>{
  <span class="key">"name"</span>: <span class="str">"InternalEmployeeID"</span>,
  <span class="key">"regex"</span>: <span class="str">"EMP-[0-9]{6}"</span>,
  <span class="key">"keywords"</span>: [<span class="str">"employee_id"</span>, <span class="str">"emp_id"</span>, <span class="str">"staff_id"</span>],
  <span class="key">"maximumMatchDistance"</span>: 50,
  <span class="comment">// keyword must appear within 50 chars of the pattern</span>
  <span class="key">"ignoreWords"</span>: [<span class="str">"SAMPLE"</span>, <span class="str">"TEST"</span>, <span class="str">"DEMO"</span>]
  <span class="comment">// findings suppressed if these words appear nearby</span>
}</pre>
    </div>
    <div class="callout warning">
      <div class="callout-title">‚ö† Don't Suppress Based on Severity Alone</div>
      A common mistake is creating a suppression rule for all "LOW" severity findings. Some low-severity findings (e.g. a single email address in an unexpected bucket) are high priority in context. Always evaluate findings against business context ‚Äî not just Macie's severity score.
    </div>
    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">Macie generates 200 HIGH severity findings per day in your dev S3 bucket. Investigation reveals they're all test credit card numbers your QA team uses (format: <code>4111-1111-1111-####</code>). What's the right fix?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,2)"><span class="opt-key">A</span>Disable Macie on the dev bucket ‚Äî test environments don't need DLP scanning</button>
        <button class="kcheck-opt" onclick="check(this,true,2)"><span class="opt-key">B</span>Create an allow list with a regex for the test card pattern ‚Äî Macie will skip matches of that pattern and stop generating the false positive findings</button>
        <button class="kcheck-opt" onclick="check(this,false,2)"><span class="opt-key">C</span>Archive all 200 findings daily ‚Äî this is the expected workflow for managing false positives</button>
        <button class="kcheck-opt" onclick="check(this,false,2)"><span class="opt-key">D</span>Switch to custom data identifiers for all credit card detection ‚Äî managed identifiers can't be tuned</button>
      </div>
      <div class="kcheck-feedback" id="fb-2"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn" onclick="next()">Next Lesson ‚Üí</button></div>
  </div>

  <!-- LESSON 4 -->
  <div class="lesson-pane" id="pane-3">
    <div class="lesson-tag tag-ops">Automation ¬∑ Intermediate</div>
    <h1>Automated Remediation<br><em>with EventBridge</em></h1>
    <p><strong>Objective:</strong> Connect Macie findings to automated response actions using EventBridge and Lambda ‚Äî moving from "alert and wait" to "detect and fix" within minutes.</p>
    <p>Macie publishes findings to EventBridge as structured JSON events. You can route those events to Lambda, SNS, SQS, or Security Hub ‚Äî enabling automated responses such as quarantining a bucket, enabling encryption on an unprotected object, or notifying the data owner.</p>
    <div class="flow-steps">
      <div class="flow-step"><div class="flow-num">1</div><div class="flow-body"><strong>Macie finding</strong> ‚Äî job detects SSNs in an S3 object. Publishes a finding event to EventBridge with bucket name, object key, severity, and data type.</div></div>
      <div class="flow-step"><div class="flow-num">2</div><div class="flow-body"><strong>EventBridge rule</strong> ‚Äî matches on <code>source: aws.macie</code>, severity HIGH, data type <code>SensitiveData:S3Object/Personal</code>. Routes to Lambda.</div></div>
      <div class="flow-step"><div class="flow-num">3</div><div class="flow-body"><strong>Lambda remediation</strong> ‚Äî applies a restrictive bucket ACL, copies the object to a quarantine bucket, and sends a Slack/SNS alert to the data owner with object name and finding details.</div></div>
      <div class="flow-step"><div class="flow-num">4</div><div class="flow-body"><strong>Security Hub</strong> ‚Äî finding is forwarded to Security Hub for centralised tracking, where it's assigned to a team member and tracked to closure.</div></div>
    </div>
    <div class="code-block">
      <div class="code-header"><span class="code-lang">JSON ‚Äî EventBridge Rule Pattern for Macie HIGH Findings</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
      <pre>{
  <span class="key">"source"</span>: [<span class="str">"aws.macie"</span>],
  <span class="key">"detail-type"</span>: [<span class="str">"Macie Finding"</span>],
  <span class="key">"detail"</span>: {
    <span class="hl">"severity"</span>: {
      <span class="hl2">"description"</span>: [<span class="str">"High"</span>, <span class="str">"Critical"</span>]
    },
    <span class="hl">"type"</span>: [{
      <span class="str">"prefix"</span>: <span class="str">"SensitiveData:S3Object"</span>
    }]
  }
}</pre>
    </div>
    <div class="callout tip">
      <div class="callout-title">‚úì Send Findings to Security Hub</div>
      Enable the Macie ‚Üí Security Hub integration in both services. This means all Macie findings appear in the Security Hub findings dashboard alongside GuardDuty, Inspector, and Config findings ‚Äî giving you one place to triage all security events. This is the CNAPP pattern you'll build out on Day 24.
    </div>
    <div class="kcheck">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">A Macie job detects an unencrypted S3 object containing credit card numbers. Your EventBridge rule triggers a Lambda. Which Lambda action best balances security and business continuity?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">A</span>Immediately delete the object ‚Äî PCI data cannot remain in an unencrypted state under any circumstances</button>
        <button class="kcheck-opt" onclick="check(this,true,3)"><span class="opt-key">B</span>Copy the object to an encrypted quarantine bucket with restricted access, block public access on the source bucket, and notify the data owner ‚Äî preserving the data while removing exposure</button>
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">C</span>Send an SNS alert to the security team and take no automated action ‚Äî humans should decide how to handle PCI data</button>
        <button class="kcheck-opt" onclick="check(this,false,3)"><span class="opt-key">D</span>Enable default encryption on the source bucket ‚Äî this retroactively encrypts the existing unencrypted object</button>
      </div>
      <div class="kcheck-feedback" id="fb-3"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn lab-btn" onclick="next()">Start Lab ‚Üí</button></div>
  </div>

  <!-- LAB -->
  <div class="lesson-pane lab-pane" id="pane-4">
    <div class="lesson-tag tag-lab">üî¨ Hands-On Lab</div>
    <h1>PII Discovery Job<br><em>& Findings Report</em></h1>
    <p>Enable Macie, seed an S3 bucket with synthetic PII data, run a discovery job, and produce a structured findings report documenting every sensitive data type found ‚Äî your DLP evidence for the Week 3 portfolio.</p>
    <div class="callout lab-note"><div class="callout-title">‚ö° Cost Note</div>Macie charges $1.00/GB of S3 data scanned and $0.10/bucket/month for bucket inventory. For this lab, your synthetic data file will be under 1KB ‚Äî total cost under $0.01. <strong>Disable Macie after the lab</strong> to avoid the per-bucket monthly charge.</div>
    <div class="lab-steps">
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">1</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Enable Macie & Create a Test Bucket <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~10 min</span></div>
          <div class="step-body">
            <ol>
              <li>Macie Console ‚Üí <strong>Get started</strong> ‚Üí Enable Amazon Macie (30-day free trial for new accounts)</li>
              <li>S3 Console ‚Üí Create bucket: <code>macie-lab-pii-&lt;your-account-id&gt;</code></li>
              <li>Block public access: enabled. No default encryption (so Macie can scan it)</li>
            </ol>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">2</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Seed the Bucket with Synthetic PII <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~5 min</span></div>
          <div class="step-body">
            <div class="code-block">
              <div class="code-header"><span class="code-lang">bash ‚Äî Create synthetic PII file (NOT real data)</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
              <pre><span class="comment"># Generate a CSV with clearly synthetic PII patterns</span>
cat > synthetic_customers.csv << <span class="str">'EOF'</span>
name,ssn,credit_card,email
John Test,123-45-6789,4532015112830366,john.test@example.com
Jane Sample,987-65-4321,5425233430109903,jane.sample@example.com
Bob Demo,111-22-3333,371449635398431,bob.demo@example.com
<span class="str">EOF</span>

aws s3 cp synthetic_customers.csv \
  s3://<span class="hl">macie-lab-pii-YOUR_ACCOUNT_ID</span>/customers/synthetic_customers.csv</pre>
            </div>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">3</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Run a Sensitive Data Discovery Job <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~10 min</span></div>
          <div class="step-body">
            <ol>
              <li>Macie Console ‚Üí <strong>S3 jobs</strong> ‚Üí <strong>Create job</strong></li>
              <li>Job type: <strong>One-time job</strong></li>
              <li>Select bucket: <code>macie-lab-pii-YOUR_ACCOUNT_ID</code></li>
              <li>Managed data identifiers: <strong>All</strong> (SSN, credit card, email, passport, etc.)</li>
              <li>Name: <code>lab-pii-scan-day17</code> ‚Üí Create and run</li>
              <li>Wait 5‚Äì10 minutes for the job to complete (Status: Complete)</li>
            </ol>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">4</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Review Findings & Export Report <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~10 min</span></div>
          <div class="step-body">
            <ol>
              <li>Macie Console ‚Üí <strong>Findings</strong> ‚Äî review findings by type (should show SensitiveData:S3Object/Financial and /Personal)</li>
              <li>Click each finding ‚Üí note: severity, object path, data identifier that triggered it, occurrence count</li>
              <li>Export findings: <strong>Actions ‚Üí Export findings</strong> ‚Üí download JSON</li>
              <li>Create <code>portfolio/week3/day17-macie-findings-report.md</code> with a summary table of findings, severity, and recommended action for each</li>
            </ol>
            <div class="code-block">
              <div class="code-header"><span class="code-lang">bash ‚Äî Commit findings report</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div>
              <pre>git add screenshots/day-17-*.png \
     portfolio/week3/day17-macie-findings-report.md
git commit -m <span class="str">"Day 17: Macie PII scan ‚Äî SSN, CC, email findings documented"</span>
git push</pre>
            </div>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">5</div></div>
        <div class="step-content">
          <div class="step-title">Cleanup <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~5 min</span></div>
          <div class="step-body">
            <ol>
              <li>Empty and delete <code>macie-lab-pii-*</code> bucket</li>
              <li>Macie Console ‚Üí Settings ‚Üí <strong>Disable Macie</strong> (stops the per-bucket monthly charge)</li>
            </ol>
          </div>
        </div>
      </div>
    </div>
    <h2 style="font-family:'DM Serif Display',serif;font-size:20px;color:#e4eaf6;margin:32px 0 16px;font-weight:400">Lab Checklist</h2>
    <div class="checklist-progress"><div class="checklist-progress-bar"><div class="checklist-progress-fill" id="cl-fill"></div></div><span class="checklist-progress-label" id="cl-label">0 / 6</span></div>
    <div class="checklist">
      <div class="check-item" onclick="toggleCheck(this,0)"><div class="check-box">‚úì</div><div class="check-text">Macie enabled; test bucket created with synthetic PII CSV uploaded</div></div>
      <div class="check-item" onclick="toggleCheck(this,1)"><div class="check-box">‚úì</div><div class="check-text">One-time discovery job <code>lab-pii-scan-day17</code> completed successfully</div></div>
      <div class="check-item" onclick="toggleCheck(this,2)"><div class="check-box">‚úì</div><div class="check-text">Findings reviewed ‚Äî at least SSN + credit card findings visible in console</div></div>
      <div class="check-item" onclick="toggleCheck(this,3)"><div class="check-box">‚úì</div><div class="check-text">Findings exported as JSON from Macie console</div></div>
      <div class="check-item" onclick="toggleCheck(this,4)"><div class="check-box">‚úì</div><div class="check-text">Findings report <code>day17-macie-findings-report.md</code> committed to portfolio</div></div>
      <div class="check-item" onclick="toggleCheck(this,5)"><div class="check-box">‚úì</div><div class="check-text">Test bucket deleted; Macie disabled (cost control)</div></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">‚Üê Previous</button><button class="next-btn lab-btn" onclick="finish()">Complete Day 17 ‚úì</button></div>
  </div>

  <!-- COMPLETION -->
  <div class="lesson-pane" id="pane-complete">
    <div class="completion-card">
      <span class="completion-icon">üîç</span>
      <h1>Day 17 Complete</h1>
      <p>You can now discover, classify, and automate response to sensitive data across your S3 estate. Day 18 shifts from data to compute ‚Äî scanning EC2 instances for known CVEs with Amazon Inspector.</p>
      <div class="score-pill"><span>‚ö°</span> Quiz: <span id="score-val">‚Äî</span></div><br>
      <div class="lab-score-pill"><span>üî¨</span> Lab: <span id="lab-score-val">‚Äî</span> complete</div>
      <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
        <a href="day-16.html" style="text-decoration:none"><button class="prev-btn">‚Üê Day 16</button></a>
        <a href="day-18.html" style="text-decoration:none"><button class="next-btn">Day 18 ‚Üí</button></a>
      </div>
    </div>
  </div>
</div>
</div>
<script src="csm-core.js"></script>
<script>
initPage({
  storageKey: 'csm-day17',
  total: 5,
  quizCount: 4,
  checkTotal: 6,
  titles: ['What Is DLP and Why It Matters','How Macie Detects PII','Managing False Positives','Automated Remediation with EventBridge','Hands-on: PII Discovery Job & Findings Report'],
  fb: {
  0:{good:"Correct. Encryption and bucket policies are access controls ‚Äî they protect data from unauthorised access. But they say nothing about what data is inside the bucket. A developer could have dropped a CSV of real customer SSNs into the 'analytics' bucket last month. Macie's job is to find that ‚Äî automatically, continuously ‚Äî before a breach does.",bad:"Not quite. Encryption and bucket policies are essential access controls, but they don't classify what data is inside. Without DLP, you're operating blind ‚Äî you don't know if your 'analytics' bucket contains accidental PII uploads from ETL jobs, developer test data with real SSNs, or third-party integrations that landed customer records in the wrong place. Macie is the discovery layer."},
  1:{good:"Correct. Macie zero findings doesn't mean zero PII. Common causes of missed findings include: (1) the file format is unsupported or binary, (2) the objects are encrypted with a key Macie doesn't have kms:Decrypt permission for, (3) the relevant managed data identifier (SSN) wasn't included in the job scope, or (4) the SSN format doesn't match Macie's patterns (e.g. no dashes). Always verify job configuration before concluding a bucket is clean.",bad:"Not quite. Zero Macie findings has several possible explanations beyond 'no PII present'. File format support, encryption keys, data identifier configuration, and SSN formatting all affect detection. Never treat zero findings as a clean bill of health without verifying the job was configured to scan the right file types with the right identifiers. Investigate the job details first."},
  2:{good:"Correct. An allow list is the right tool for known-safe patterns. You add a regex that matches the test card format (e.g. starting with 4111-1111-1111) and Macie excludes those matches globally. This eliminates the false positive category entirely rather than dealing with 200 individual findings daily. Disabling Macie on dev entirely would create a blind spot where real accidental PII uploads could go undetected.",bad:"Not quite. Disabling Macie on dev creates a blind spot ‚Äî real accidental PII uploads would go undetected. Archiving 200 findings daily is unsustainable noise management. The right tool for known-safe patterns is an allow list: define a regex that matches the test card format and Macie stops generating findings for that pattern account-wide, without losing coverage for other PII types."},
  3:{good:"Correct. Deleting the object risks business continuity if it's needed. Enabling encryption retroactively doesn't work ‚Äî default encryption only applies to new uploads, not existing objects. Just alerting without action leaves the data exposed during human response time. Copying to an encrypted quarantine bucket removes the exposure (restricted access) while preserving the data for investigation and compliance purposes, and the notification ensures the right team takes ownership.",bad:"Not quite. Deleting PCI data without investigation could destroy evidence needed for breach forensics. Retroactive encryption via bucket default settings doesn't work ‚Äî it only applies to new objects. Just alerting without automated quarantine leaves the data exposed for however long it takes a human to respond. Copy-to-quarantine balances containment (restrict access immediately) with data preservation (don't destroy evidence), which is the standard incident response pattern."}
}
});
</script>
</body>
</html>
