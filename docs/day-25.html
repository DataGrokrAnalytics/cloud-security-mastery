<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Day 25 â€” STRIDE Threat Modelling</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="shared.css">
</head>
<body>
<div class="shell">
<aside class="sidebar">
  <div class="sidebar-header">
    <div class="day-badge">Week 4 Â· Day 25</div>
    <h2>STRIDE Threat Modelling</h2>
    <div class="sidebar-meta"><span class="chip">Advanced</span><span class="chip">4 hours</span><span class="chip">STRIDE</span></div>
  </div>
  <div class="sidebar-back">
    <a class="back-index" href="../index.html">
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M7.5 2L3.5 6L7.5 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      Course Index
    </a>
    <div class="week-jumps-label">Jump to week</div>
    <div class="week-jumps">
      <a class="week-jump wj1" href="../index.html#week-1">W1</a>
      <a class="week-jump wj2" href="../index.html#week-2">W2</a>
      <a class="week-jump wj3" href="../index.html#week-3">W3</a>
      <a class="week-jump wj4" href="../index.html#week-4">W4</a>
    </div>
    <div class="day-nav-label">Week 4 days</div>
    <div class="day-nav">
      <a class="day-link" href="day-22.html">D22</a>
      <a class="day-link" href="day-23.html">D23</a>
      <a class="day-link" href="day-24.html">D24</a>
      <a class="day-link current" href="day-25.html">D25</a>
      <a class="day-link" href="day-26.html">D26</a>
      <a class="day-link" href="day-27.html">D27</a>
      <a class="day-link" href="day-28.html">D28</a>
    </div>
  </div>

  <nav class="lesson-nav">
    <div class="nav-group-label">Lessons</div>
    <div class="nav-item active" onclick="goTo(0)"><span class="nav-num">1</span><span class="nav-label">Why Threat Modelling</span><span class="nav-check">âœ“</span></div>
    <div class="nav-item" onclick="goTo(1)"><span class="nav-num">2</span><span class="nav-label">STRIDE: Six Threat Categories</span><span class="nav-check">âœ“</span></div>
    <div class="nav-item" onclick="goTo(2)"><span class="nav-num">3</span><span class="nav-label">Data Flow Diagrams & Trust Boundaries</span><span class="nav-check">âœ“</span></div>
    <div class="nav-item" onclick="goTo(3)"><span class="nav-num">4</span><span class="nav-label">DREAD Scoring & Prioritisation</span><span class="nav-check">âœ“</span></div>
    <div class="nav-group-label">Lab</div>
    <div class="nav-item lab-item" onclick="goTo(4)"><span class="nav-num">5</span><span class="nav-label">Hands-on: Build Your Threat Model</span><span class="nav-check">âœ“</span></div>
  </nav>
  <div class="sidebar-footer">
    <div class="progress-label"><span>Day progress</span><span id="progress-pct">0 / 5</span></div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
  </div>
</aside>
<main class="main">
  <div class="lesson-topbar">
    <div class="lesson-crumb">Week 4 &nbsp;/&nbsp; <span id="topbar-title">Why Threat Modelling</span></div>
    <div class="nav-arrows">
      <button class="arrow-btn" id="btn-prev" onclick="prev()" disabled>â† Prev</button>
      <button class="arrow-btn" id="btn-next" onclick="next()">Next â†’</button>
    </div>
  </div>

  <!-- PANE 0 â€” Why Threat Modelling -->
  <div class="lesson-pane active" id="pane-0">
    <div class="lesson-tag tag-detect">ğŸ¯ Strategy</div>
    <h1>Why <em>Threat Modelling</em></h1>
    <p>Security controls without threat modelling are answers to unasked questions. You might implement perfect encryption but have no protection against an insider threat. You might have excellent network segmentation but leave an identity path wide open.</p>
    <p><strong>Threat modelling</strong> is the structured practice of asking "what can go wrong?" before it goes wrong â€” for a specific system, from the perspective of an attacker. Done before controls are built, it tells you <em>what</em> to build and <em>why</em>. Done after, it finds the gaps.</p>

    <h2>The Four Questions</h2>
    <table class="styled-table">
      <thead><tr><th>#</th><th>Question</th><th>Output</th></tr></thead>
      <tbody>
        <tr><td>1</td><td>What are we building?</td><td>Data flow diagram â€” components, flows, trust boundaries</td></tr>
        <tr><td>2</td><td>What can go wrong?</td><td>Threat enumeration using STRIDE</td></tr>
        <tr><td>3</td><td>What are we doing about it?</td><td>Control mapping â€” each threat paired with its mitigation</td></tr>
        <tr><td>4</td><td>Did we do a good enough job?</td><td>Residual risk register â€” gaps accepted or scheduled for remediation</td></tr>
      </tbody>
    </table>

    <div class="callout insight">
      <div class="callout-title">ğŸ’¡ The Most Valuable Output</div>
      The document threat modelling produces is useful â€” but the most valuable output is the <em>conversation</em>. A developer who has walked through the STRIDE threats on their own feature will write different code than one who hasn't. A security engineer who has modelled a system will ask different questions during a design review. The process changes how people think, not just what they document.
    </div>

    <h2>When to Threat Model</h2>
    <ul>
      <li>When designing a new service or significant new feature</li>
      <li>When adding a new data flow across a trust boundary</li>
      <li>After a security incident â€” to understand what the model missed</li>
      <li>Annually for your most critical services (things change)</li>
    </ul>

    <div class="callout warning">
      <div class="callout-title">âš ï¸ Common Mistake â€” Threat Modelling Too Late</div>
      Threat modelling done after a system is built is harder and more expensive. You're adding controls to an existing architecture rather than designing security in. Some threats can only be addressed by architectural changes â€” which are much cheaper to make on a whiteboard than in production.
    </div>

    <div class="kcheck" id="pane-0-quiz">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">Your team is designing a new Lambda function that reads from an S3 bucket and writes results to DynamoDB. A senior engineer says "we already have Config and GuardDuty â€” we don't need to threat model this." What is the most important thing threat modelling would add that Config and GuardDuty cannot provide?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,0)">Real-time detection of misconfiguration in the Lambda's IAM role.</button>
        <button class="kcheck-opt" onclick="check(this,false,0)">Automated remediation if the Lambda function is exploited.</button>
        <button class="kcheck-opt" onclick="check(this,true,0)">Proactive identification of attack paths before the function is deployed â€” including threats Config and GuardDuty have no rules to detect.</button>
        <button class="kcheck-opt" onclick="check(this,false,0)">A compliance score showing whether the Lambda meets CIS benchmark controls.</button>
      </div>
      <div class="kcheck-feedback" id="fb-0"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()" disabled>â† Previous</button><button class="next-btn" onclick="next()">Next â†’</button></div>
  </div>

  <!-- PANE 1 â€” STRIDE -->
  <div class="lesson-pane" id="pane-1">
    <div class="lesson-tag tag-security">ğŸ” Framework</div>
    <h1><em>STRIDE</em>: Six Threat Categories</h1>
    <p>STRIDE is a mnemonic for six categories of threat, developed at Microsoft and widely adopted across the industry. Each category maps to a security property being violated. For every component and data flow in your architecture, you ask: which of these six threats applies here?</p>

    <div class="stride-grid">
      <div class="stride-card">
        <div class="stride-head"><span class="stride-letter s-color">S</span><div><div class="stride-name">Spoofing</div><div class="stride-prop">Violates: Authentication</div></div></div>
        <div class="stride-body">Attacker impersonates a legitimate identity â€” user, service, or system.<div class="stride-example">Stolen IAM credentials used to impersonate a developer role</div></div>
      </div>
      <div class="stride-card">
        <div class="stride-head"><span class="stride-letter t-color">T</span><div><div class="stride-name">Tampering</div><div class="stride-prop">Violates: Integrity</div></div></div>
        <div class="stride-body">Attacker modifies data in transit or at rest without authorisation.<div class="stride-example">S3 object modified without CloudTrail data event logging</div></div>
      </div>
      <div class="stride-card">
        <div class="stride-head"><span class="stride-letter r-color">R</span><div><div class="stride-name">Repudiation</div><div class="stride-prop">Violates: Non-repudiation</div></div></div>
        <div class="stride-body">Attacker performs actions and then denies them â€” or erases the evidence.<div class="stride-example">CloudTrail logging disabled to cover tracks after IAM changes</div></div>
      </div>
      <div class="stride-card">
        <div class="stride-head"><span class="stride-letter i-color">I</span><div><div class="stride-name">Information Disclosure</div><div class="stride-prop">Violates: Confidentiality</div></div></div>
        <div class="stride-body">Sensitive data exposed to unauthorised parties.<div class="stride-example">Public S3 bucket exposes customer PII</div></div>
      </div>
      <div class="stride-card">
        <div class="stride-head"><span class="stride-letter d-color">D</span><div><div class="stride-name">Denial of Service</div><div class="stride-prop">Violates: Availability</div></div></div>
        <div class="stride-body">Attacker disrupts a service, making it unavailable to legitimate users.<div class="stride-example">API Gateway flooded â€” Lambda concurrency limit hit, legitimate requests rejected</div></div>
      </div>
      <div class="stride-card">
        <div class="stride-head"><span class="stride-letter e-color">E</span><div><div class="stride-name">Elevation of Privilege</div><div class="stride-prop">Violates: Authorisation</div></div></div>
        <div class="stride-body">Attacker gains permissions beyond what they should have.<div class="stride-example">Lambda execution role has <code>iam:*</code> â€” attacker uses it to create an admin user</div></div>
      </div>
    </div>

    <div class="callout tip">
      <div class="callout-title">ğŸ’¡ Where Threats Concentrate</div>
      Not every STRIDE category applies to every component equally. <strong>Trust boundary crossings</strong> â€” the points where data flows from one zone of trust to another â€” are where the majority of threats concentrate. An attacker crossing from the internet to your application tier, or from the application tier to your database, is where Spoofing, Tampering, and Information Disclosure threats are most relevant.
    </div>

    <div class="kcheck" id="pane-1-quiz">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">A developer accidentally commits AWS credentials to a public GitHub repository. An attacker finds them and uses them to call <code>s3:GetObject</code> on your customer data bucket. Which STRIDE categories does this incident involve? (Pick the most complete answer.)</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,1)">Tampering only â€” the attacker modified your data access patterns.</button>
        <button class="kcheck-opt" onclick="check(this,false,1)">Denial of Service â€” the attacker consumed your S3 API quota.</button>
        <button class="kcheck-opt" onclick="check(this,true,1)">Spoofing (attacker impersonates the developer's identity) and Information Disclosure (customer data read without authorisation).</button>
        <button class="kcheck-opt" onclick="check(this,false,1)">Elevation of Privilege only â€” the attacker gained access they shouldn't have.</button>
      </div>
      <div class="kcheck-feedback" id="fb-1"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">â† Previous</button><button class="next-btn" onclick="next()">Next â†’</button></div>
  </div>

  <!-- PANE 2 â€” DFDs -->
  <div class="lesson-pane" id="pane-2">
    <div class="lesson-tag tag-arch">ğŸ—º Architecture</div>
    <h1>Data Flow Diagrams<br>&amp; <em>Trust Boundaries</em></h1>
    <p>Before applying STRIDE, you need a <strong>Data Flow Diagram (DFD)</strong> â€” a map of your system that shows where data comes from, where it goes, and which zones of trust it crosses. Without a DFD you'll miss threats, because threats live in the flows, not just the components.</p>

    <h2>DFD Elements</h2>
    <table class="styled-table">
      <thead><tr><th>Element</th><th>What it represents</th><th>Example</th></tr></thead>
      <tbody>
        <tr><td>External Entity</td><td>Something outside your system that interacts with it</td><td>Internet user, third-party API, another AWS account</td></tr>
        <tr><td>Process</td><td>A component that transforms or processes data</td><td>Lambda function, EC2 app server, ECS task</td></tr>
        <tr><td>Data Store</td><td>Where data is persisted</td><td>S3 bucket, RDS database, DynamoDB table, Secrets Manager</td></tr>
        <tr><td>Data Flow</td><td>How data moves between elements</td><td>HTTPS request, S3 PutObject, DynamoDB query</td></tr>
        <tr><td>Trust Boundary</td><td>Line separating zones of different trust</td><td>Internet / VPC, public subnet / private subnet, AWS account boundary</td></tr>
      </tbody>
    </table>

    <h2>Your Lab Architecture as a DFD</h2>
    <div class="dfd-block">
<span class="entity">[Internet User]</span> <span class="flow">â”€â”€HTTPSâ”€â”€â–¶</span> <span class="entity">[ALB â€” Public Subnet]</span><br>
<span class="tb">â”â”â”â”â”â”â”â”â”â” TRUST BOUNDARY: Internet / Public Subnet â”â”â”â”â”â”â”â”â”â”</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="flow">â”€â”€port 8080â”€â”€â–¶</span> <span class="entity">[App Server â€” Private Subnet]</span><br>
<span class="tb">â”â”â”â”â”â”â”â”â”â” TRUST BOUNDARY: Public / Private Subnet â”â”â”â”â”â”â”â”â”â”â”</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="entity">[App Server]</span> <span class="flow">â”€â”€port 5432â”€â”€â–¶</span> <span class="entity">[RDS â€” DB Subnet]</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="entity">[App Server]</span> <span class="flow">â”€â”€HTTPSâ”€â”€â–¶</span> <span class="entity">[S3 Bucket]</span> <span class="flow">(via VPC endpoint / internet)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="entity">[App Server]</span> <span class="flow">â”€â”€HTTPSâ”€â”€â–¶</span> <span class="entity">[Secrets Manager]</span><br>
<span class="tb">â”â”â”â”â”â”â”â”â”â” TRUST BOUNDARY: VPC / AWS Service APIs â”â”â”â”â”â”â”â”â”â”â”</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="entity">[Lambda]</span> <span class="flow">â”€â”€triggered byâ”€â”€â–¶</span> <span class="entity">[EventBridge]</span> <span class="flow">â”€â”€â–¶</span> <span class="entity">[S3 remediation]</span>
    </div>

    <div class="callout insight">
      <div class="callout-title">ğŸ’¡ Every Trust Boundary is a STRIDE Battleground</div>
      For every arrow that crosses a trust boundary line, ask all six STRIDE questions. An HTTP request crossing the internet/VPC boundary: can it be spoofed? can the data be tampered with? can it disclose information? can it be used for DoS? Trust boundaries are where authentication, encryption, input validation, and rate limiting decisions live.
    </div>

    <div class="kcheck" id="pane-2-quiz">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">Your DFD shows a data flow from the App Server (private subnet) to Secrets Manager (AWS API). The App Server fetches the database password at startup. Which STRIDE threat is most relevant for this specific flow, and what control addresses it?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,2)">Denial of Service â€” the app could call Secrets Manager too frequently and hit rate limits. Control: exponential backoff.</button>
        <button class="kcheck-opt" onclick="check(this,true,2)">Information Disclosure â€” if the execution role is over-privileged, a compromised app server could read secrets it shouldn't access. Control: IAM least-privilege role scoped to only the specific secret ARN.</button>
        <button class="kcheck-opt" onclick="check(this,false,2)">Tampering â€” an attacker could modify the secret value in transit. Control: TLS encryption (already provided by the Secrets Manager API).</button>
        <button class="kcheck-opt" onclick="check(this,false,2)">Spoofing â€” Secrets Manager cannot verify the caller's identity. Control: VPC endpoint policy.</button>
      </div>
      <div class="kcheck-feedback" id="fb-2"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">â† Previous</button><button class="next-btn" onclick="next()">Next â†’</button></div>
  </div>

  <!-- PANE 3 â€” DREAD -->
  <div class="lesson-pane" id="pane-3">
    <div class="lesson-tag tag-concept">ğŸ“Š Prioritisation</div>
    <h1>DREAD Scoring<br>&amp; <em>Prioritisation</em></h1>
    <p>STRIDE tells you <em>what kind</em> of threat exists. DREAD tells you <em>how worried to be</em>. Once you've enumerated threats across your DFD, you need to prioritise â€” not everything can be fixed this sprint.</p>

    <h2>The DREAD Dimensions</h2>
    <p>Score each dimension from <strong>1 (low)</strong> to <strong>3 (high)</strong>:</p>
    <table class="dread-table">
      <thead><tr><th>Letter</th><th>Dimension</th><th>Score 1</th><th>Score 2</th><th>Score 3</th></tr></thead>
      <tbody>
        <tr><td>D</td><td>Damage</td><td>Minor disruption</td><td>Significant data loss</td><td>Complete system compromise</td></tr>
        <tr><td>R</td><td>Reproducibility</td><td>Rare conditions required</td><td>Repeatable with effort</td><td>Trivially reproducible</td></tr>
        <tr><td>E</td><td>Exploitability</td><td>Requires expert skill</td><td>Moderate skill needed</td><td>Script-kiddie level</td></tr>
        <tr><td>A</td><td>Affected Users</td><td>Single user / resource</td><td>Subset of users</td><td>All users / entire system</td></tr>
        <tr><td>D</td><td>Discoverability</td><td>Requires deep access to find</td><td>Public tools can find it</td><td>Documented / obvious</td></tr>
      </tbody>
    </table>
    <p><strong>Total score (5â€“15):</strong> <span class="score-hi">12â€“15 = Critical</span> &nbsp; <span class="score-med">8â€“11 = High</span> &nbsp; <span class="score-lo">5â€“7 = Medium</span></p>

    <h2>Example: Public S3 Bucket with PII</h2>
    <table class="dread-table">
      <thead><tr><th>Dimension</th><th>Score</th><th>Rationale</th></tr></thead>
      <tbody>
        <tr><td>Damage</td><td>3</td><td>Regulatory fines + customer PII exposed = severe business impact</td></tr>
        <tr><td>Reproducibility</td><td>3</td><td>Any internet user can access the URL â€” perfectly reproducible</td></tr>
        <tr><td>Exploitability</td><td>3</td><td>No skill required â€” a web browser is sufficient</td></tr>
        <tr><td>Affected Users</td><td>3</td><td>All customers whose data is in the bucket</td></tr>
        <tr><td>Discoverability</td><td>3</td><td>Public S3 buckets are indexed by search engines and scanning tools</td></tr>
      </tbody>
    </table>
    <p><strong>Total: <span class="score-hi">15 / 15 â€” Critical.</span></strong> This is why public S3 buckets trigger your highest-priority automated remediation.</p>

    <div class="callout warning">
      <div class="callout-title">âš ï¸ DREAD is Subjective</div>
      Different people score the same threat differently â€” especially Discoverability and Exploitability. The value of DREAD isn't mathematical precision; it's that the scoring process forces an explicit conversation about risk. "I think this is a 3, you think it's a 1 â€” let's discuss why" is more valuable than the number itself.
    </div>

    <div class="kcheck" id="pane-3-quiz">
      <div class="kcheck-label">Knowledge Check</div>
      <div class="kcheck-q">You identify an Elevation of Privilege threat: the Lambda execution role has <code>iam:CreateUser</code> and <code>iam:AttachUserPolicy</code>. If exploited, an attacker could create a persistent admin backdoor. You score it: D=3, R=2, E=2, A=3, D=1. Total = 11 (High). Your manager argues it should be lower because "the Lambda has never been exploited." What is the problem with this reasoning?</div>
      <div class="kcheck-options">
        <button class="kcheck-opt" onclick="check(this,false,3)">The manager is correct â€” historical safety is the best indicator of future risk.</button>
        <button class="kcheck-opt" onclick="check(this,false,3)">The DREAD score is too low â€” it should always be Critical for IAM threats.</button>
        <button class="kcheck-opt" onclick="check(this,true,3)">DREAD scores measure the threat's potential, not its historical frequency. "Never been exploited" reflects past attacker choices, not the vulnerability's severity â€” which remains unchanged.</button>
        <button class="kcheck-opt" onclick="check(this,false,3)">The Discoverability score of 1 is incorrect â€” all IAM misconfigurations are trivially discoverable.</button>
      </div>
      <div class="kcheck-feedback" id="fb-3"></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">â† Previous</button><button class="next-btn" onclick="next()">Next â†’</button></div>
  </div>

  <!-- PANE 4 â€” Lab -->
  <div class="lesson-pane lab-pane" id="pane-4">
    <div class="lesson-tag tag-lab">ğŸ”¬ Hands-on Lab</div>
    <h1>Build Your<br><em>Threat Model</em></h1>
    <p>Apply STRIDE to the architecture you've built over 4 weeks. Produce a threat model document that maps every major trust boundary crossing to its threats, controls, and residual risk.</p>
    <div class="callout lab-note"><div class="callout-title">âš¡ No AWS Cost</div>No AWS resources are created today. Threat modelling is a documentation exercise â€” the only tool you need is a text editor (and optionally draw.io or OWASP Threat Dragon for the DFD).</div>
    <div class="lab-steps">
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">1</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Draw Your Data Flow Diagram <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~20 min</span></div>
          <div class="step-body">
            <p>Use <a href="https://app.diagrams.net" target="_blank" style="color:var(--accent)">draw.io</a> (free, no signup) or OWASP <a href="https://www.threatdragon.com" target="_blank" style="color:var(--accent)">Threat Dragon</a> to draw your architecture DFD. At minimum include:</p>
            <ul>
              <li>External entities: Internet user, AWS APIs</li>
              <li>Processes: ALB, App Server / Lambda, SOAR Lambda</li>
              <li>Data stores: S3, RDS/DynamoDB, Secrets Manager</li>
              <li>Data flows with labels (HTTPS, port 5432, S3 PutObject, etc.)</li>
              <li>Trust boundary lines: Internet/VPC, Public/Private subnet, VPC/AWS APIs</li>
            </ul>
            <p>Export as PNG and save to <code>portfolio/week-4/threat-model-dfd.png</code></p>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">2</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Apply STRIDE to 3 Trust Boundaries <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~25 min</span></div>
          <div class="step-body">
            <p>Create <code>portfolio/week-4/threat-model.md</code>. For each of the 3 trust boundaries below, complete the STRIDE table:</p>
            <div class="code-block"><div class="code-header"><span class="code-lang">markdown template</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div><pre><span class="comment">## Trust Boundary: Internet â†’ Public Subnet (ALB)</span>

<span class="key">| Threat | Description | Severity | Control | Residual Risk |</span>
<span class="key">|--------|-------------|----------|---------|---------------|</span>
| Spoofing | Attacker forges requests as legitimate user | HIGH | TLS + WAF | LOW |
| Tampering | Request modified in transit | HIGH | TLS in transit | LOW |
| Repudiation | User denies actions | MEDIUM | ALB access logs + CloudTrail | LOW |
| Info Disclosure | Sensitive data in response | HIGH | TLS, no PII in LB responses | LOW |
| Denial of Service | HTTP flood | MEDIUM | AWS Shield Standard | MEDIUM â€” no WAF |
| EoP | Exploit LB to reach private subnet | HIGH | Security groups | LOW |</pre></div>
            <p>Repeat for: <strong>Public Subnet â†’ Private Subnet (App Server)</strong> and <strong>App Server â†’ S3 (AWS API)</strong>.</p>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">3</div><div class="step-connector"></div></div>
        <div class="step-content">
          <div class="step-title">Build the Controls Coverage Map <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~10 min</span></div>
          <div class="step-body">
            <p>Add a summary section mapping each STRIDE category to the controls you've built across all 4 weeks:</p>
            <div class="code-block"><div class="code-header"><span class="code-lang">markdown</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div><pre><span class="comment">## Controls Coverage Map</span>

<span class="key">| STRIDE Category | Primary Control (Week) | Secondary Control |</span>
<span class="key">|----------------|----------------------|------------------|</span>
| Spoofing | MFA + JIT roles (Week 2) | GuardDuty credential findings |
| Tampering | KMS encryption + S3 versioning (Week 3) | CloudTrail integrity validation |
| Repudiation | CloudTrail multi-region (Week 1) | Log file validation |
| Info Disclosure | Macie + S3 block public access (Week 3) | Access Analyzer |
| Denial of Service | AWS Shield Standard | (WAF â€” gap) |
| Elevation of Privilege | IAM least-privilege + SCPs (Wk 1&2) | Security Hub Config rules |</pre></div>
          </div>
        </div>
      </div>
      <div class="lab-step">
        <div class="step-num-wrap"><div class="step-num">4</div></div>
        <div class="step-content">
          <div class="step-title">Identify Top 3 Residual Risks &amp; Commit <span style="font-size:12px;color:var(--muted);font-family:'IBM Plex Mono',monospace">~5 min</span></div>
          <div class="step-body">
            <p>Close the document with the 3 threats your current controls do <em>not</em> fully address â€” with a recommended action for each:</p>
            <div class="code-block"><div class="code-header"><span class="code-lang">markdown example</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div><pre><span class="comment">## Top 3 Residual Risks</span>

<span class="hl">1. Stolen IAM credentials from unusual geography</span>
   Current: GuardDuty detects post-compromise â€” no prevention
   Fix: IP-based condition on sensitive IAM roles
   Priority: HIGH

<span class="hl">2. No WAF on public endpoints</span>
   Current: App-layer attacks (SQLi, XSS) undetected
   Fix: AWS WAF with managed rule groups
   Priority: MEDIUM

<span class="hl">3. No internal TLS between app tier and database</span>
   Current: DB traffic within VPC is unencrypted
   Fix: RDS with SSL enforcement
   Priority: MEDIUM</pre></div>
            <div class="code-block"><div class="code-header"><span class="code-lang">bash â€” commit</span><button class="copy-btn" onclick="copyCode(this)">copy</button></div><pre>git add portfolio/week-4/threat-model.md portfolio/week-4/threat-model-dfd.png
git commit -m <span class="str">"Day 25: STRIDE threat model â€” 3 boundaries, controls coverage map, residual risks"</span>
git push</pre></div>
          </div>
        </div>
      </div>
    </div>
    <h2 style="font-family:'DM Serif Display',serif;font-size:20px;color:#e4eaf6;margin:32px 0 16px;font-weight:400">Lab Checklist</h2>
    <div class="checklist-progress"><div class="checklist-progress-bar"><div class="checklist-progress-fill" id="cl-fill"></div></div><span class="checklist-progress-label" id="cl-label">0 / 6</span></div>
    <div class="checklist">
      <div class="check-item" onclick="toggleCheck(this,0)"><div class="check-box">âœ“</div><div class="check-text">Data flow diagram created with all components, flows, and trust boundary lines â€” exported to <code>portfolio/week-4/threat-model-dfd.png</code></div></div>
      <div class="check-item" onclick="toggleCheck(this,1)"><div class="check-box">âœ“</div><div class="check-text">STRIDE analysis completed for Trust Boundary 1: Internet â†’ Public Subnet (ALB)</div></div>
      <div class="check-item" onclick="toggleCheck(this,2)"><div class="check-box">âœ“</div><div class="check-text">STRIDE analysis completed for Trust Boundary 2: Public Subnet â†’ Private Subnet (App Server)</div></div>
      <div class="check-item" onclick="toggleCheck(this,3)"><div class="check-box">âœ“</div><div class="check-text">STRIDE analysis completed for Trust Boundary 3: App Server â†’ S3 / AWS APIs</div></div>
      <div class="check-item" onclick="toggleCheck(this,4)"><div class="check-box">âœ“</div><div class="check-text">Controls Coverage Map completed â€” all 6 STRIDE categories mapped to controls from Weeks 1â€“4</div></div>
      <div class="check-item" onclick="toggleCheck(this,5)"><div class="check-box">âœ“</div><div class="check-text">Top 3 residual risks identified with recommended actions â€” <code>portfolio/week-4/threat-model.md</code> committed</div></div>
    </div>
    <div class="lesson-nav-footer"><button class="prev-btn" onclick="prev()">â† Previous</button><button class="next-btn lab-btn" onclick="finish()">Complete Day 25 âœ“</button></div>
  </div>

  <!-- COMPLETION -->
  <div class="lesson-pane" id="pane-complete">
    <div class="completion-card">
      <span class="completion-icon">ğŸ—ºï¸</span>
      <h1>Day 25 Complete</h1>
      <p>You can now explain <em>why</em> every control you've built exists and which attacker behaviour it defeats. That reasoning is what separates a practitioner from someone who followed a checklist. Tomorrow: Lambda SOAR â€” automating remediation so detection becomes response in under 30 seconds.</p>
      <div class="score-pill"><span>âš¡</span> Quiz: <span id="score-val">â€”</span></div><br>
      <div class="lab-score-pill"><span>ğŸ”¬</span> Lab: <span id="lab-score-val">â€”</span> complete</div>
      <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
        <a href="day-24.html" style="text-decoration:none"><button class="prev-btn">â† Day 24</button></a>
        <a href="day-26.html" style="text-decoration:none"><button class="next-btn">Day 26 â†’</button></a>
      </div>
    </div>
  </div>
</main>
</div>
<script src="csm-core.js"></script>
<script>
initPage({
  storageKey: 'csm-day25',
  total: 5,
  quizCount: 4,
  checkTotal: 6,
  titles: ['Why Threat Modelling','STRIDE: Six Threat Categories','Data Flow Diagrams & Trust Boundaries','DREAD Scoring & Prioritisation','Hands-on: Build Your Threat Model'],
  fb: {
  0:{good:"Correct. Config rules detect known misconfigurations after deployment â€” they fire when a resource deviates from a known-good state. GuardDuty detects known attack patterns after they occur. Neither service can identify novel attack paths specific to your architecture before they're exploited. Threat modelling is proactive: it finds the attack path where the Lambda role could be abused to exfiltrate the DynamoDB data, before the Lambda exists. That's a structural difference in timing and coverage.",bad:"Not quite. Config does detect IAM misconfigurations â€” but only against rules you've enabled, and only after the Lambda is deployed. GuardDuty detects attack patterns, but only post-incident. The key word in the question is 'before' â€” threat modelling is the only approach that proactively identifies attack paths before a component is built. It also finds threats that no existing Config rule or GuardDuty finding type covers."},
  1:{good:"Correct. This incident involves two STRIDE categories: Spoofing (the attacker uses stolen credentials to impersonate the developer â€” acting as an identity they're not) and Information Disclosure (customer data is read without authorisation â€” confidentiality violated). The threat model should have flagged this data flow as a Spoofing risk and recommended controls: credential rotation detection, MFA enforcement on sensitive API calls, and a CloudTrail alert for GetObject calls from unusual source IPs.",bad:"Not quite. This incident primarily involves Spoofing and Information Disclosure. Spoofing: the attacker is impersonating the developer by using their credentials â€” they are presenting a false identity to the AWS API. Information Disclosure: customer data was read without authorisation â€” confidentiality was violated. Tampering would apply if data was modified. Elevation of Privilege would apply if the attacker gained permissions beyond what the credentials granted. DoS would apply if availability was disrupted."},
  2:{good:"Correct. The most relevant threat for this specific flow is Information Disclosure. If the execution role has <code>secretsmanager:GetSecretValue</code> on <code>*</code> instead of on the specific secret ARN, then any code running in the Lambda context â€” including injected malicious code â€” could read every secret in the account. The control is least-privilege scoping: the role should only grant access to exactly the secret(s) this Lambda needs, identified by ARN. TLS is already provided by the Secrets Manager API so tampering is addressed. The IAM role is authenticated to Secrets Manager via SigV4 so spoofing is addressed.",bad:"Not quite. TLS is already enforced by the Secrets Manager HTTPS API, so tampering in transit is addressed. The Secrets Manager API authenticates callers via SigV4 signing with the execution role credentials, so Secrets Manager absolutely can verify the caller's identity â€” spoofing is addressed. The most relevant threat here is Information Disclosure: an overly-broad execution role (GetSecretValue on *) means a compromised Lambda function could read every secret in the account. The fix is scoping the role to the specific secret ARN."},
  3:{good:"Correct. DREAD scoring measures the inherent potential of a threat â€” the damage it could cause, how easy it is to exploit, how many users it affects. 'It has never been exploited' is a statement about historical attacker behaviour and choices, not about the vulnerability itself. The IAM misconfiguration exists regardless of exploitation history. A critical vulnerability that has never been exploited is still critical â€” it just hasn't been found by the right attacker yet. Historical safety is the weakest possible argument against fixing a security gap.",bad:"Not quite. The manager's reasoning is a classic security fallacy â€” 'security through obscurity' or 'security through historical non-exploitation.' DREAD scores measure the potential of a threat: what damage could it do, how easy would it be to exploit. 'Never been exploited' doesn't change any of those dimensions. A door without a lock that has never been tested by a burglar is still unlocked. The correct response is: the DREAD score is independent of exploitation history, and the High rating stands â€” the control gap (iam:CreateUser on a Lambda role) should be fixed."}
}
});
</script>
</body>
</html>
